#!/usr/bin/env node
'use strict';var _clientnode=require('clientnode'),_clientnode2=_interopRequireDefault(_clientnode),_fs=require('fs'),fileSystem=_interopRequireWildcard(_fs),_loaderUtils=require('loader-utils'),loaderUtils=_interopRequireWildcard(_loaderUtils),_ejs=require('ejs'),ejs=_interopRequireWildcard(_ejs),_configurator=require('./configurator.compiled'),_configurator2=_interopRequireDefault(_configurator),_helper=require('./helper.compiled'),_helper2=_interopRequireDefault(_helper);function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}try{require('source-map-support/register')}catch(a){}module.exports=function(a){this.cacheable&&this.cacheable();const b=_clientnode2.default.convertSubstringInPlainObject(_clientnode2.default.extendObject(!0,{context:'./',extensions:{file:{external:['.js'],internal:['.js','.css','.svg','.png','.jpg','.gif','.ico','.html','.json','.eot','.ttf','.woff']},module:[]},module:{aliases:{},replacements:{}},precompile:!1},this.options||{},loaderUtils.getOptions(this)||{}),/#%%%#/g,'!'),c=(d,e=b.compiler,f=!1)=>(g={})=>{e=_clientnode2.default.extendObject(!0,{filename:d},e);let h;if(e.isString?(delete e.isString,h=ejs.compile(d,e)):h=ejs.compile(fileSystem.readFileSync(d,_clientnode2.default.extendObject(!0,{encoding:'utf-8'},e),e)),f)return`module.exports = ${h.toString()};`;const i=(j)=>{const k=j.replace(/^(.+)\?[^?]+$/,'$1'),l=j.match(/^[^?]+\?(.+)$/,'$1');let m={};if(l){m=((q,r,s,t,u)=>new Function('request','template','source','compile','locals',`return ${l[1]}`)(q,r,s,t,u))(j,k,a,c,g)}let n=_clientnode2.default.copyLimitedRecursively(e);if(delete n.client,n=_clientnode2.default.extendObject(!0,{encoding:'utf-8'},n,m.options||{}),n.isString)return c(k,n)(m);const o=_helper2.default.determineModuleFilePath(k,b.module.aliases,b.module.replacements,b.extensions,b.context,_configurator2.default.path.source.asset.base,_configurator2.default.path.ignore,_configurator2.default.module.directoryNames,_configurator2.default.package.main.fileNames,_configurator2.default.package.main.propertyNames,_configurator2.default.package.aliasPropertyNames);if(o)return this.addDependency(o),l||o.endsWith('.ejs')?c(o,n)(m):fileSystem.readFileSync(o,n);throw new Error(`Given template file "${k}" couldn't be resolved.`)};return h(_clientnode2.default.extendObject(!0,{configuration:_configurator2.default,Helper:_helper2.default,include:i,require:i,Tools:_clientnode2.default},g))};return c(a,{client:b.precompile,compileDebug:this.debug||!1,debug:this.debug||!1,filename:loaderUtils.getRemainingRequest(this).replace(/^!/,''),isString:!0},b.precompile)(b.locals||{})};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUEyQixTQU4vQixDQU9JLHVCQUFjLE9BQWQsQ0FBc0IsSUFBdEIsQ0FBMkIsYUFQL0IsQ0FRSSx1QkFBYyxPQUFkLENBQXNCLGtCQVIxQixDQURKLENBVUEsR0FBSSxDQUFKLE9BQ0ksTUFBSyxhQUFMLENBQW1CLENBQW5CLENBREosQ0FPUSxHQUFjLEVBQWlCLFFBQWpCLENBQTBCLE1BQTFCLENBUHRCLENBUWUsRUFBUSxDQUFSLENBQTBCLENBQTFCLEVBQ0gsQ0FERyxDQVJmLENBV1csV0FBVyxZQUFYLENBQXdCLENBQXhCLENBQTBDLENBQTFDLENBWFgsQ0FhQSxLQUFNLElBQUksTUFBSixDQUNELHdCQUF1QixDQUFTLHlCQUQvQixDQUVULENBakRELENBa0RBLE1BQU8sR0FBaUIscUJBQU0sWUFBTixJQUF5QixDQUM3QyxvQ0FENkMsQ0FDOUIsdUJBRDhCLENBQ3RCLFFBQVMsQ0FEYSxDQUNKLFNBREksQ0FDSywwQkFETCxDQUF6QixDQUVyQixDQUZxQixDQUFqQixDQUdWLENBdkZELENBd0ZBLE1BQU8sR0FBUSxDQUFSLENBQWdCLENBQ25CLE9BQVEsRUFBTSxVQURLLENBRW5CLGFBQWMsS0FBSyxLQUFMLElBRkssQ0FHbkIsTUFBTyxLQUFLLEtBQUwsSUFIWSxDQUluQixTQUFVLFlBQVksbUJBQVosQ0FBZ0MsSUFBaEMsRUFBc0MsT0FBdEMsQ0FBOEMsSUFBOUMsQ0FBb0QsRUFBcEQsQ0FKUyxDQUtuQixXQUxtQixDQUFoQixDQU1KLEVBQU0sVUFORixFQU1jLEVBQU0sTUFBTixJQU5kLENBT1YsQyIsImZpbGUiOiJlanNMb2FkZXIuY29tcGlsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIEBmbG93XG4vLyAtKi0gY29kaW5nOiB1dGYtOCAtKi1cbid1c2Ugc3RyaWN0J1xuLyogIVxuICAgIHJlZ2lvbiBoZWFkZXJcbiAgICBDb3B5cmlnaHQgVG9yYmVuIFNpY2tlcnQgKGluZm9bXCJ+YXR+XCJddG9yYmVuLndlYnNpdGUpIDE2LjEyLjIwMTJcblxuICAgIExpY2Vuc2VcbiAgICAtLS0tLS0tXG5cbiAgICBUaGlzIGxpYnJhcnkgd3JpdHRlbiBieSBUb3JiZW4gU2lja2VydCBzdGFuZCB1bmRlciBhIGNyZWF0aXZlIGNvbW1vbnMgbmFtaW5nXG4gICAgMy4wIHVucG9ydGVkIGxpY2Vuc2UuIHNlZSBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS8zLjAvZGVlZC5kZVxuICAgIGVuZHJlZ2lvblxuKi9cbi8vIHJlZ2lvbiBpbXBvcnRzXG5pbXBvcnQgVG9vbHMgZnJvbSAnY2xpZW50bm9kZSdcbmltcG9ydCAqIGFzIGZpbGVTeXN0ZW0gZnJvbSAnZnMnXG5pbXBvcnQgKiBhcyBsb2FkZXJVdGlscyBmcm9tICdsb2FkZXItdXRpbHMnXG5pbXBvcnQgKiBhcyBlanMgZnJvbSAnZWpzJ1xuLy8gTk9URTogT25seSBuZWVkZWQgZm9yIGRlYnVnZ2luZyB0aGlzIGZpbGUuXG50cnkge1xuICAgIHJlcXVpcmUoJ3NvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3RlcicpXG59IGNhdGNoIChlcnJvcikge31cblxuaW1wb3J0IGNvbmZpZ3VyYXRpb24gZnJvbSAnLi9jb25maWd1cmF0b3IuY29tcGlsZWQnXG5pbXBvcnQgSGVscGVyIGZyb20gJy4vaGVscGVyLmNvbXBpbGVkJ1xuLy8gZW5kcmVnaW9uXG4vLyByZWdpb24gdHlwZXNcbnR5cGUgVGVtcGxhdGVGdW5jdGlvbiA9IChsb2NhbHM6T2JqZWN0KSA9PiBzdHJpbmdcbnR5cGUgQ29tcGlsZUZ1bmN0aW9uID0gKHRlbXBsYXRlOnN0cmluZywgb3B0aW9uczpPYmplY3QpID0+IFRlbXBsYXRlRnVuY3Rpb25cbi8vIGVuZHJlZ2lvblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzb3VyY2U6c3RyaW5nKTpzdHJpbmcge1xuICAgIGlmICh0aGlzLmNhY2hlYWJsZSlcbiAgICAgICAgdGhpcy5jYWNoZWFibGUoKVxuICAgIGNvbnN0IHF1ZXJ5Ok9iamVjdCA9IFRvb2xzLmNvbnZlcnRTdWJzdHJpbmdJblBsYWluT2JqZWN0KFxuICAgICAgICBUb29scy5leHRlbmRPYmplY3QodHJ1ZSwge1xuICAgICAgICAgICAgY29udGV4dDogJy4vJyxcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICBmaWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVybmFsOiBbJy5qcyddLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgJy5qcycsICcuY3NzJywgJy5zdmcnLCAnLnBuZycsICcuanBnJywgJy5naWYnLCAnLmljbycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnLmh0bWwnLCAnLmpzb24nLCAnLmVvdCcsICcudHRmJywgJy53b2ZmJ1xuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSwgbW9kdWxlOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vZHVsZToge1xuICAgICAgICAgICAgICAgIGFsaWFzZXM6IHt9LFxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50czoge31cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcmVjb21waWxlOiBmYWxzZVxuICAgICAgICB9LCB0aGlzLm9wdGlvbnMgfHwge30sIGxvYWRlclV0aWxzLmdldE9wdGlvbnModGhpcykgfHwge30pLFxuICAgICAgICAvIyUlJSMvZywgJyEnKVxuICAgIGNvbnN0IGNvbXBpbGU6Q29tcGlsZUZ1bmN0aW9uID0gKFxuICAgICAgICB0ZW1wbGF0ZTpzdHJpbmcsIG9wdGlvbnM6T2JqZWN0ID0gcXVlcnkuY29tcGlsZXIsIHByZTpib29sZWFuID0gZmFsc2VcbiAgICApOlRlbXBsYXRlRnVuY3Rpb24gPT4gKGxvY2FsczpPYmplY3QgPSB7fSk6c3RyaW5nID0+IHtcbiAgICAgICAgb3B0aW9ucyA9IFRvb2xzLmV4dGVuZE9iamVjdCh0cnVlLCB7ZmlsZW5hbWU6IHRlbXBsYXRlfSwgb3B0aW9ucylcbiAgICAgICAgbGV0IHRlbXBsYXRlRnVuY3Rpb246VGVtcGxhdGVGdW5jdGlvblxuICAgICAgICBpZiAob3B0aW9ucy5pc1N0cmluZykge1xuICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuaXNTdHJpbmdcbiAgICAgICAgICAgIHRlbXBsYXRlRnVuY3Rpb24gPSBlanMuY29tcGlsZSh0ZW1wbGF0ZSwgb3B0aW9ucylcbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICB0ZW1wbGF0ZUZ1bmN0aW9uID0gZWpzLmNvbXBpbGUoZmlsZVN5c3RlbS5yZWFkRmlsZVN5bmMoXG4gICAgICAgICAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgICAgICAgICAgVG9vbHMuZXh0ZW5kT2JqZWN0KHRydWUsIHtlbmNvZGluZzogJ3V0Zi04J30sIG9wdGlvbnMpLCBvcHRpb25zXG4gICAgICAgICAgICApKVxuICAgICAgICBpZiAocHJlKVxuICAgICAgICAgICAgcmV0dXJuIGBtb2R1bGUuZXhwb3J0cyA9ICR7dGVtcGxhdGVGdW5jdGlvbi50b1N0cmluZygpfTtgXG4gICAgICAgIGNvbnN0IHJlcXVpcmU6RnVuY3Rpb24gPSAocmVxdWVzdDpzdHJpbmcpOnN0cmluZyA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZTpzdHJpbmcgPSByZXF1ZXN0LnJlcGxhY2UoL14oLispXFw/W14/XSskLywgJyQxJylcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5TWF0Y2g6P0FycmF5PHN0cmluZz4gPSByZXF1ZXN0Lm1hdGNoKFxuICAgICAgICAgICAgICAgIC9eW14/XStcXD8oLispJC8sICckMScpXG4gICAgICAgICAgICBsZXQgbmVzdGVkTG9jYWxzOk9iamVjdCA9IHt9XG4gICAgICAgICAgICBpZiAocXVlcnlNYXRjaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2YWx1YXRpb25GdW5jdGlvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdDpzdHJpbmcsIHRlbXBsYXRlOnN0cmluZywgc291cmNlOnN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGlsZTpDb21waWxlRnVuY3Rpb24sIGxvY2FsczpPYmplY3RcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmVUeXBlQ2hlY2tcbiAgICAgICAgICAgICAgICApOk9iamVjdCA9PiBuZXcgRnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICdyZXF1ZXN0JywgJ3RlbXBsYXRlJywgJ3NvdXJjZScsICdjb21waWxlJywgJ2xvY2FscycsXG4gICAgICAgICAgICAgICAgICAgIGByZXR1cm4gJHtxdWVyeU1hdGNoWzFdfWBcbiAgICAgICAgICAgICAgICApKHJlcXVlc3QsIHRlbXBsYXRlLCBzb3VyY2UsIGNvbXBpbGUsIGxvY2FscylcbiAgICAgICAgICAgICAgICBuZXN0ZWRMb2NhbHMgPSBldmFsdWF0aW9uRnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QsIHRlbXBsYXRlLCBzb3VyY2UsIGNvbXBpbGUsIGxvY2FscylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuZXN0ZWRPcHRpb25zOk9iamVjdCA9IFRvb2xzLmNvcHlMaW1pdGVkUmVjdXJzaXZlbHkob3B0aW9ucylcbiAgICAgICAgICAgIGRlbGV0ZSBuZXN0ZWRPcHRpb25zLmNsaWVudFxuICAgICAgICAgICAgbmVzdGVkT3B0aW9ucyA9IFRvb2xzLmV4dGVuZE9iamVjdChcbiAgICAgICAgICAgICAgICB0cnVlLCB7ZW5jb2Rpbmc6ICd1dGYtOCd9LCBuZXN0ZWRPcHRpb25zLFxuICAgICAgICAgICAgICAgIG5lc3RlZExvY2Fscy5vcHRpb25zIHx8IHt9KVxuICAgICAgICAgICAgaWYgKG5lc3RlZE9wdGlvbnMuaXNTdHJpbmcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGUodGVtcGxhdGUsIG5lc3RlZE9wdGlvbnMpKG5lc3RlZExvY2FscylcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZVBhdGg6P3N0cmluZyA9XG4gICAgICAgICAgICAgICAgSGVscGVyLmRldGVybWluZU1vZHVsZUZpbGVQYXRoKFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZSwgcXVlcnkubW9kdWxlLmFsaWFzZXMsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5Lm1vZHVsZS5yZXBsYWNlbWVudHMsIHF1ZXJ5LmV4dGVuc2lvbnMsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5LmNvbnRleHQsIGNvbmZpZ3VyYXRpb24ucGF0aC5zb3VyY2UuYXNzZXQuYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmlnbm9yZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUuZGlyZWN0b3J5TmFtZXMsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGFja2FnZS5tYWluLmZpbGVOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYWNrYWdlLm1haW4ucHJvcGVydHlOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYWNrYWdlLmFsaWFzUHJvcGVydHlOYW1lcylcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZUZpbGVQYXRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGREZXBlbmRlbmN5KHRlbXBsYXRlRmlsZVBhdGgpXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgTk9URTogSWYgdGhlcmUgYXJlbid0IGFueSBsb2NhbHMgb3B0aW9ucyBvciB2YXJpYWJsZXMgYW5kXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgZG9lc24ndCBzZWVtIHRvIGJlIGFuIGVqcyB0ZW1wbGF0ZSB3ZSBzaW1wbHkgbG9hZFxuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZCBmaWxlIGNvbnRlbnQuXG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAocXVlcnlNYXRjaCB8fCB0ZW1wbGF0ZUZpbGVQYXRoLmVuZHNXaXRoKCcuZWpzJykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlKHRlbXBsYXRlRmlsZVBhdGgsIG5lc3RlZE9wdGlvbnMpKFxuICAgICAgICAgICAgICAgICAgICAgICAgbmVzdGVkTG9jYWxzKVxuICAgICAgICAgICAgICAgIC8vIElnbm9yZVR5cGVDaGVja1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlU3lzdGVtLnJlYWRGaWxlU3luYyh0ZW1wbGF0ZUZpbGVQYXRoLCBuZXN0ZWRPcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGBHaXZlbiB0ZW1wbGF0ZSBmaWxlIFwiJHt0ZW1wbGF0ZX1cIiBjb3VsZG4ndCBiZSByZXNvbHZlZC5gKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZUZ1bmN0aW9uKFRvb2xzLmV4dGVuZE9iamVjdCh0cnVlLCB7XG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLCBIZWxwZXIsIGluY2x1ZGU6IHJlcXVpcmUsIHJlcXVpcmUsIFRvb2xzXG4gICAgICAgIH0sIGxvY2FscykpXG4gICAgfVxuICAgIHJldHVybiBjb21waWxlKHNvdXJjZSwge1xuICAgICAgICBjbGllbnQ6IHF1ZXJ5LnByZWNvbXBpbGUsXG4gICAgICAgIGNvbXBpbGVEZWJ1ZzogdGhpcy5kZWJ1ZyB8fCBmYWxzZSxcbiAgICAgICAgZGVidWc6IHRoaXMuZGVidWcgfHwgZmFsc2UsXG4gICAgICAgIGZpbGVuYW1lOiBsb2FkZXJVdGlscy5nZXRSZW1haW5pbmdSZXF1ZXN0KHRoaXMpLnJlcGxhY2UoL14hLywgJycpLFxuICAgICAgICBpc1N0cmluZzogdHJ1ZVxuICAgIH0sIHF1ZXJ5LnByZWNvbXBpbGUpKHF1ZXJ5LmxvY2FscyB8fCB7fSlcbn1cbi8vIHJlZ2lvbiB2aW0gbW9kbGluZVxuLy8gdmltOiBzZXQgdGFic3RvcD00IHNoaWZ0d2lkdGg9NCBleHBhbmR0YWI6XG4vLyB2aW06IGZvbGRtZXRob2Q9bWFya2VyIGZvbGRtYXJrZXI9cmVnaW9uLGVuZHJlZ2lvbjpcbi8vIGVuZHJlZ2lvblxuIl19