#!/usr/bin/env node
'use strict';var _clientnode=require('clientnode'),_clientnode2=_interopRequireDefault(_clientnode),_fs=require('fs'),fileSystem=_interopRequireWildcard(_fs),_loaderUtils=require('loader-utils'),loaderUtils=_interopRequireWildcard(_loaderUtils),_ejs=require('ejs'),ejs=_interopRequireWildcard(_ejs),_configurator=require('./configurator.compiled'),_configurator2=_interopRequireDefault(_configurator),_helper=require('./helper.compiled'),_helper2=_interopRequireDefault(_helper);function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}try{require('source-map-support/register')}catch(a){}module.exports=function(a){this.cacheable&&this.cacheable();const b=_clientnode2.default.convertSubstringInPlainObject(_clientnode2.default.extendObject(!0,{context:'./',extensions:{file:{external:['.js'],internal:['.js','.css','.svg','.png','.jpg','.gif','.ico','.html','.json','.eot','.ttf','.woff']},module:[]},module:{aliases:{},replacements:{}}},this.options||{},loaderUtils.getOptions(this)||{}),/#%%%#/g,'!'),c=(e,f=b.compiler)=>(g={})=>{f=_clientnode2.default.extendObject(!0,{filename:e},f);let h;f.isString?(delete f.isString,h=ejs.compile(e,f)):h=ejs.compile(fileSystem.readFileSync(e,_clientnode2.default.extendObject(!0,{encoding:'utf-8'},f),f));const i=(j)=>{const k=j.replace(/^(.+)\?[^?]+$/,'$1'),l=j.match(/^[^?]+\?(.+)$/,'$1');let m={};if(l){m=((q,r,s,t,u)=>new Function('request','template','source','compile','locals',`return ${l[1]}`)(q,r,s,t,u))(j,k,a,c,g)}let n=_clientnode2.default.copyLimitedRecursively(f);if(delete n.client,n=_clientnode2.default.extendObject(!0,{encoding:'utf-8'},n,m.options||{}),n.isString)return c(k,n)(m);const o=_helper2.default.determineModuleFilePath(k,b.module.aliases,b.module.replacements,b.extensions,b.context,_configurator2.default.path.source.asset.base,_configurator2.default.path.ignore,_configurator2.default.module.directoryNames,_configurator2.default.package.main.fileNames,_configurator2.default.package.main.propertyNames,_configurator2.default.package.aliasPropertyNames);if(o)return this.addDependency(o),l||o.endsWith('.ejs')?c(o,n)(m):fileSystem.readFileSync(o,n);throw new Error(`Given template file "${k}" couldn't be resolved.`)};return h(_clientnode2.default.extendObject(!0,{configuration:_configurator2.default,Helper:_helper2.default,include:i,require:i,Tools:_clientnode2.default},g))},d=c(a,{client:b.precompile,compileDebug:this.debug||!1,debug:this.debug||!1,filename:loaderUtils.getRemainingRequest(this).replace(/^!/,''),isString:!0});return b.precompile?`module.exports = ${d.toString()};`:d(b.locals||{})};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UjFCLENBREosQ0FVQSxHQUFJLENBQUosT0FDSSxNQUFLLGFBQUwsQ0FBbUIsQ0FBbkIsQ0FESixDQU9RLEdBQWMsRUFBaUIsUUFBakIsQ0FBMEIsTUFBMUIsQ0FQdEIsQ0FRZSxFQUFRLENBQVIsQ0FBMEIsQ0FBMUIsRUFDSCxDQURHLENBUmYsQ0FXVyxXQUFXLFlBQVgsQ0FBd0IsQ0FBeEIsQ0FBMEMsQ0FBMUMsQ0FYWCxDQWFBLEtBQU0sSUFBSSxNQUFKLENBQ0Qsd0JBQXVCLENBQVMseUJBRC9CLENBRVQsQ0FqREQsQ0FrREEsTUFBTyxHQUFpQixxQkFBTSxZQUFOLElBQXlCLENBQzdDLG9DQUQ2QyxDQUM5Qix1QkFEOEIsQ0FDdEIsUUFBUyxDQURhLENBQ0osU0FESSxDQUNLLDBCQURMLENBQXpCLENBRXJCLENBRnFCLENBQWpCLENBR1YsQ0FwRkQsQ0FxRk0sRUFBb0IsRUFBUSxDQUFSLENBQWdCLENBQ3RDLE9BQVEsRUFBTSxVQUR3QixDQUV0QyxhQUFjLEtBQUssS0FBTCxJQUZ3QixDQUd0QyxNQUFPLEtBQUssS0FBTCxJQUgrQixDQUl0QyxTQUFVLFlBQVksbUJBQVosQ0FBZ0MsSUFBaEMsRUFBc0MsT0FBdEMsQ0FBOEMsSUFBOUMsQ0FBb0QsRUFBcEQsQ0FKNEIsQ0FLdEMsV0FMc0MsQ0FBaEIsQ0FyRjFCLENBNEZBLE1BQU8sR0FBTSxVQUFOLENBQW9CLG9CQUFtQixFQUFTLFFBQVQsRUFBb0IsR0FBM0QsQ0FDSCxFQUFTLEVBQU0sTUFBTixJQUFULENBQ1AsQyIsImZpbGUiOiJlanNMb2FkZXIuY29tcGlsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIEBmbG93XG4vLyAtKi0gY29kaW5nOiB1dGYtOCAtKi1cbid1c2Ugc3RyaWN0J1xuLyogIVxuICAgIHJlZ2lvbiBoZWFkZXJcbiAgICBDb3B5cmlnaHQgVG9yYmVuIFNpY2tlcnQgKGluZm9bXCJ+YXR+XCJddG9yYmVuLndlYnNpdGUpIDE2LjEyLjIwMTJcblxuICAgIExpY2Vuc2VcbiAgICAtLS0tLS0tXG5cbiAgICBUaGlzIGxpYnJhcnkgd3JpdHRlbiBieSBUb3JiZW4gU2lja2VydCBzdGFuZCB1bmRlciBhIGNyZWF0aXZlIGNvbW1vbnMgbmFtaW5nXG4gICAgMy4wIHVucG9ydGVkIGxpY2Vuc2UuIHNlZSBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS8zLjAvZGVlZC5kZVxuICAgIGVuZHJlZ2lvblxuKi9cbi8vIHJlZ2lvbiBpbXBvcnRzXG5pbXBvcnQgVG9vbHMgZnJvbSAnY2xpZW50bm9kZSdcbmltcG9ydCAqIGFzIGZpbGVTeXN0ZW0gZnJvbSAnZnMnXG5pbXBvcnQgKiBhcyBsb2FkZXJVdGlscyBmcm9tICdsb2FkZXItdXRpbHMnXG5pbXBvcnQgKiBhcyBlanMgZnJvbSAnZWpzJ1xuLy8gTk9URTogT25seSBuZWVkZWQgZm9yIGRlYnVnZ2luZyB0aGlzIGZpbGUuXG50cnkge1xuICAgIHJlcXVpcmUoJ3NvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3RlcicpXG59IGNhdGNoIChlcnJvcikge31cblxuaW1wb3J0IGNvbmZpZ3VyYXRpb24gZnJvbSAnLi9jb25maWd1cmF0b3IuY29tcGlsZWQnXG5pbXBvcnQgSGVscGVyIGZyb20gJy4vaGVscGVyLmNvbXBpbGVkJ1xuLy8gZW5kcmVnaW9uXG4vLyByZWdpb24gdHlwZXNcbnR5cGUgVGVtcGxhdGVGdW5jdGlvbiA9IChsb2NhbHM6T2JqZWN0KSA9PiBzdHJpbmdcbnR5cGUgQ29tcGlsZUZ1bmN0aW9uID0gKHRlbXBsYXRlOnN0cmluZywgb3B0aW9uczpPYmplY3QpID0+IFRlbXBsYXRlRnVuY3Rpb25cbi8vIGVuZHJlZ2lvblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzb3VyY2U6c3RyaW5nKTpzdHJpbmcge1xuICAgIGlmICh0aGlzLmNhY2hlYWJsZSlcbiAgICAgICAgdGhpcy5jYWNoZWFibGUoKVxuICAgIGNvbnN0IHF1ZXJ5Ok9iamVjdCA9IFRvb2xzLmNvbnZlcnRTdWJzdHJpbmdJblBsYWluT2JqZWN0KFxuICAgICAgICBUb29scy5leHRlbmRPYmplY3QodHJ1ZSwge1xuICAgICAgICAgICAgY29udGV4dDogJy4vJyxcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgICAgICAgICBmaWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGV4dGVybmFsOiBbJy5qcyddLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgJy5qcycsICcuY3NzJywgJy5zdmcnLCAnLnBuZycsICcuanBnJywgJy5naWYnLCAnLmljbycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnLmh0bWwnLCAnLmpzb24nLCAnLmVvdCcsICcudHRmJywgJy53b2ZmJ1xuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSwgbW9kdWxlOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vZHVsZToge1xuICAgICAgICAgICAgICAgIGFsaWFzZXM6IHt9LFxuICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50czoge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcy5vcHRpb25zIHx8IHt9LCBsb2FkZXJVdGlscy5nZXRPcHRpb25zKHRoaXMpIHx8IHt9KSxcbiAgICAgICAgLyMlJSUjL2csICchJylcbiAgICBjb25zdCBjb21waWxlOkNvbXBpbGVGdW5jdGlvbiA9IChcbiAgICAgICAgdGVtcGxhdGU6c3RyaW5nLCBvcHRpb25zOk9iamVjdCA9IHF1ZXJ5LmNvbXBpbGVyXG4gICAgKTpUZW1wbGF0ZUZ1bmN0aW9uID0+IChsb2NhbHM6T2JqZWN0ID0ge30pOnN0cmluZyA9PiB7XG4gICAgICAgIG9wdGlvbnMgPSBUb29scy5leHRlbmRPYmplY3QodHJ1ZSwge2ZpbGVuYW1lOiB0ZW1wbGF0ZX0sIG9wdGlvbnMpXG4gICAgICAgIGxldCB0ZW1wbGF0ZUZ1bmN0aW9uOlRlbXBsYXRlRnVuY3Rpb25cbiAgICAgICAgaWYgKG9wdGlvbnMuaXNTdHJpbmcpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmlzU3RyaW5nXG4gICAgICAgICAgICB0ZW1wbGF0ZUZ1bmN0aW9uID0gZWpzLmNvbXBpbGUodGVtcGxhdGUsIG9wdGlvbnMpXG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgdGVtcGxhdGVGdW5jdGlvbiA9IGVqcy5jb21waWxlKGZpbGVTeXN0ZW0ucmVhZEZpbGVTeW5jKFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlLFxuICAgICAgICAgICAgICAgIFRvb2xzLmV4dGVuZE9iamVjdCh0cnVlLCB7ZW5jb2Rpbmc6ICd1dGYtOCd9LCBvcHRpb25zKSwgb3B0aW9uc1xuICAgICAgICAgICAgKSlcbiAgICAgICAgY29uc3QgcmVxdWlyZTpGdW5jdGlvbiA9IChyZXF1ZXN0OnN0cmluZyk6c3RyaW5nID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlOnN0cmluZyA9IHJlcXVlc3QucmVwbGFjZSgvXiguKylcXD9bXj9dKyQvLCAnJDEnKVxuICAgICAgICAgICAgY29uc3QgcXVlcnlNYXRjaDo/QXJyYXk8c3RyaW5nPiA9IHJlcXVlc3QubWF0Y2goXG4gICAgICAgICAgICAgICAgL15bXj9dK1xcPyguKykkLywgJyQxJylcbiAgICAgICAgICAgIGxldCBuZXN0ZWRMb2NhbHM6T2JqZWN0ID0ge31cbiAgICAgICAgICAgIGlmIChxdWVyeU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXZhbHVhdGlvbkZ1bmN0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0OnN0cmluZywgdGVtcGxhdGU6c3RyaW5nLCBzb3VyY2U6c3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBjb21waWxlOkNvbXBpbGVGdW5jdGlvbiwgbG9jYWxzOk9iamVjdFxuICAgICAgICAgICAgICAgIC8vIElnbm9yZVR5cGVDaGVja1xuICAgICAgICAgICAgICAgICk6T2JqZWN0ID0+IG5ldyBGdW5jdGlvbihcbiAgICAgICAgICAgICAgICAgICAgJ3JlcXVlc3QnLCAndGVtcGxhdGUnLCAnc291cmNlJywgJ2NvbXBpbGUnLCAnbG9jYWxzJyxcbiAgICAgICAgICAgICAgICAgICAgYHJldHVybiAke3F1ZXJ5TWF0Y2hbMV19YFxuICAgICAgICAgICAgICAgICkocmVxdWVzdCwgdGVtcGxhdGUsIHNvdXJjZSwgY29tcGlsZSwgbG9jYWxzKVxuICAgICAgICAgICAgICAgIG5lc3RlZExvY2FscyA9IGV2YWx1YXRpb25GdW5jdGlvbihcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCwgdGVtcGxhdGUsIHNvdXJjZSwgY29tcGlsZSwgbG9jYWxzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5lc3RlZE9wdGlvbnM6T2JqZWN0ID0gVG9vbHMuY29weUxpbWl0ZWRSZWN1cnNpdmVseShvcHRpb25zKVxuICAgICAgICAgICAgZGVsZXRlIG5lc3RlZE9wdGlvbnMuY2xpZW50XG4gICAgICAgICAgICBuZXN0ZWRPcHRpb25zID0gVG9vbHMuZXh0ZW5kT2JqZWN0KFxuICAgICAgICAgICAgICAgIHRydWUsIHtlbmNvZGluZzogJ3V0Zi04J30sIG5lc3RlZE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgbmVzdGVkTG9jYWxzLm9wdGlvbnMgfHwge30pXG4gICAgICAgICAgICBpZiAobmVzdGVkT3B0aW9ucy5pc1N0cmluZylcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZSh0ZW1wbGF0ZSwgbmVzdGVkT3B0aW9ucykobmVzdGVkTG9jYWxzKVxuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVGaWxlUGF0aDo/c3RyaW5nID1cbiAgICAgICAgICAgICAgICBIZWxwZXIuZGV0ZXJtaW5lTW9kdWxlRmlsZVBhdGgoXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLCBxdWVyeS5tb2R1bGUuYWxpYXNlcyxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkubW9kdWxlLnJlcGxhY2VtZW50cywgcXVlcnkuZXh0ZW5zaW9ucyxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkuY29udGV4dCwgY29uZmlndXJhdGlvbi5wYXRoLnNvdXJjZS5hc3NldC5iYXNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguaWdub3JlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5kaXJlY3RvcnlOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYWNrYWdlLm1haW4uZmlsZU5hbWVzLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhY2thZ2UubWFpbi5wcm9wZXJ0eU5hbWVzLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhY2thZ2UuYWxpYXNQcm9wZXJ0eU5hbWVzKVxuICAgICAgICAgICAgaWYgKHRlbXBsYXRlRmlsZVBhdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZERlcGVuZGVuY3kodGVtcGxhdGVGaWxlUGF0aClcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICBOT1RFOiBJZiB0aGVyZSBhcmVuJ3QgYW55IGxvY2FscyBvcHRpb25zIG9yIHZhcmlhYmxlcyBhbmRcbiAgICAgICAgICAgICAgICAgICAgZmlsZSBkb2Vzbid0IHNlZW0gdG8gYmUgYW4gZWpzIHRlbXBsYXRlIHdlIHNpbXBseSBsb2FkXG4gICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkIGZpbGUgY29udGVudC5cbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGlmIChxdWVyeU1hdGNoIHx8IHRlbXBsYXRlRmlsZVBhdGguZW5kc1dpdGgoJy5lanMnKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGUodGVtcGxhdGVGaWxlUGF0aCwgbmVzdGVkT3B0aW9ucykoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXN0ZWRMb2NhbHMpXG4gICAgICAgICAgICAgICAgLy8gSWdub3JlVHlwZUNoZWNrXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVTeXN0ZW0ucmVhZEZpbGVTeW5jKHRlbXBsYXRlRmlsZVBhdGgsIG5lc3RlZE9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYEdpdmVuIHRlbXBsYXRlIGZpbGUgXCIke3RlbXBsYXRlfVwiIGNvdWxkbid0IGJlIHJlc29sdmVkLmApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlRnVuY3Rpb24oVG9vbHMuZXh0ZW5kT2JqZWN0KHRydWUsIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24sIEhlbHBlciwgaW5jbHVkZTogcmVxdWlyZSwgcmVxdWlyZSwgVG9vbHNcbiAgICAgICAgfSwgbG9jYWxzKSlcbiAgICB9XG4gICAgY29uc3QgdGVtcGxhdGU6RnVuY3Rpb24gPSBjb21waWxlKHNvdXJjZSwge1xuICAgICAgICBjbGllbnQ6IHF1ZXJ5LnByZWNvbXBpbGUsXG4gICAgICAgIGNvbXBpbGVEZWJ1ZzogdGhpcy5kZWJ1ZyB8fCBmYWxzZSxcbiAgICAgICAgZGVidWc6IHRoaXMuZGVidWcgfHwgZmFsc2UsXG4gICAgICAgIGZpbGVuYW1lOiBsb2FkZXJVdGlscy5nZXRSZW1haW5pbmdSZXF1ZXN0KHRoaXMpLnJlcGxhY2UoL14hLywgJycpLFxuICAgICAgICBpc1N0cmluZzogdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIHF1ZXJ5LnByZWNvbXBpbGUgPyBgbW9kdWxlLmV4cG9ydHMgPSAke3RlbXBsYXRlLnRvU3RyaW5nKCl9O2AgOlxuICAgICAgICB0ZW1wbGF0ZShxdWVyeS5sb2NhbHMgfHwge30pXG59XG4vLyByZWdpb24gdmltIG1vZGxpbmVcbi8vIHZpbTogc2V0IHRhYnN0b3A9NCBzaGlmdHdpZHRoPTQgZXhwYW5kdGFiOlxuLy8gdmltOiBmb2xkbWV0aG9kPW1hcmtlciBmb2xkbWFya2VyPXJlZ2lvbixlbmRyZWdpb246XG4vLyBlbmRyZWdpb25cbiJdfQ==