#!/usr/bin/env node


// -*- coding: utf-8 -*-
'use strict';
/* !
    region header
    Copyright Torben Sickert (info["~at~"]torben.website) 16.12.2012

    License
    -------

    This library written by Torben Sickert stand under a creative commons naming
    3.0 unported license. see http://creativecommons.org/licenses/by/3.0/deed.de
    endregion
*/
// region imports

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _fs = require('fs');

var fileSystem = _interopRequireWildcard(_fs);

var _jsdom = require('jsdom');

var dom = _interopRequireWildcard(_jsdom);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _autoprefixer = require('autoprefixer');

var _autoprefixer2 = _interopRequireDefault(_autoprefixer);

var _postcssImport = require('postcss-import');

var _postcssImport2 = _interopRequireDefault(_postcssImport);

var _rimraf = require('rimraf');

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackSources = require('webpack-sources');

var _configurator = require('./configurator.compiled');

var _configurator2 = _interopRequireDefault(_configurator);

var _helper = require('./helper.compiled');

var _helper2 = _interopRequireDefault(_helper);

var _htmlLoader = require('html-loader');

var _htmlLoader2 = _interopRequireDefault(_htmlLoader);

var _loaderUtils = require('loader-utils');

var _loaderUtils2 = _interopRequireDefault(_loaderUtils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

// NOTE: Only needed for debugging this file.
try {
    require('source-map-support/register');
} catch (error) {}

const plugins = require('webpack-load-plugins')();


plugins.HTML = plugins.html;
plugins.ExtractText = plugins.extractText;
plugins.AddAssetHTMLPlugin = require('add-asset-html-webpack-plugin');
plugins.OpenBrowser = plugins.openBrowser;
plugins.Favicon = require('favicons-webpack-plugin');
plugins.Imagemin = require('imagemin-webpack-plugin').default;
plugins.Offline = require('offline-plugin');

// / region monkey patches
// Monkey-Patch html loader to retrieve html loader options since the
// "webpack-html-plugin" doesn't preserve the original loader interface.

require.cache[require.resolve('html-loader')].exports = function () {
    _helper2.default.extendObject(true, this.options, module, this.options);
    return _htmlLoader2.default.apply(this, arguments);
};
// Monkey-Patch loader-utils to define which url is a local request.

const loaderUtilsIsUrlRequestBackup = _loaderUtils2.default.isUrlRequest;
require.cache[require.resolve('loader-utils')].exports.isUrlRequest = function (url) {
    if (url.match(/^[a-z]+:.+/)) return false;
    return loaderUtilsIsUrlRequestBackup.apply(_loaderUtils2.default, arguments);
};
// / endregion
// endregion
// region initialisation
let libraryName = _configurator2.default.exportFormat.self === 'var' ? _helper2.default.convertToValidVariableName(_configurator2.default.name) : _configurator2.default.name;
if ('libraryName' in _configurator2.default && _configurator2.default.libraryName) libraryName = _configurator2.default.libraryName;
// // region plugins
const pluginInstances = [new _webpack2.default.optimize.OccurrenceOrderPlugin(true)];
// /// region define modules to ignore
for (const ignorePattern of _configurator2.default.injection.ignorePattern) pluginInstances.push(new _webpack2.default.IgnorePlugin(new RegExp(ignorePattern)));
// /// endregion
// /// region generate html file
let htmlAvailable = false;
if (_configurator2.default.givenCommandLineArguments[2] !== 'buildDLL') for (let htmlConfiguration of _configurator2.default.files.html) if (_helper2.default.isFileSync(htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1))) {
    if (htmlConfiguration.template === _configurator2.default.files.defaultHTML.template) htmlConfiguration.template = htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1);
    pluginInstances.push(new plugins.HTML(htmlConfiguration));
    htmlAvailable = true;
}
// /// endregion
// /// region generate favicons
if (htmlAvailable && _configurator2.default.favicon && _helper2.default.isFileSync(_configurator2.default.favicon.logo)) pluginInstances.push(new plugins.Favicon(_configurator2.default.favicon));
// /// endregion
// /// region provide offline functionality
if (htmlAvailable && _configurator2.default.offline) {
    if (!['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2])) {
        if (_configurator2.default.inPlace.cascadingStyleSheet) _configurator2.default.offline.excludes.push(`${ _configurator2.default.path.asset.cascadingStyleSheet }*.css?` + `${ _configurator2.default.hashAlgorithm }=*`);
        if (_configurator2.default.inPlace.javaScript) _configurator2.default.offline.excludes.push(`${ _configurator2.default.path.asset.javaScript }*.js?` + `${ _configurator2.default.hashAlgorithm }=*`);
    }
    pluginInstances.push(new plugins.Offline(_configurator2.default.offline));
}
// /// endregion
// /// region opens browser automatically
if (_configurator2.default.development.openBrowser && htmlAvailable && ['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2])) pluginInstances.push(new plugins.OpenBrowser(_configurator2.default.development.openBrowser));
// /// endregion
// /// region provide build environment
pluginInstances.push(new _webpack2.default.DefinePlugin(_configurator2.default.buildDefinition));
// /// endregion
// /// region modules/assets
const moduleLocations = _helper2.default.determineModuleLocations(_configurator2.default.injection.internal, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, _configurator2.default.path.context, _configurator2.default.path.ignore);
// //// region perform javaScript minification/optimisation
if (_configurator2.default.module.optimizer.uglifyJS) pluginInstances.push(new _webpack2.default.optimize.UglifyJsPlugin(_configurator2.default.module.optimizer.uglifyJS));
// //// endregion
// //// region apply module pattern
pluginInstances.push({ apply: compiler => {
        compiler.plugin('emit', (compilation, callback) => {
            for (const request in compilation.assets) if (compilation.assets.hasOwnProperty(request)) {
                const filePath = request.replace(/\?[^?]+$/, '');
                const type = _helper2.default.determineAssetType(filePath, _configurator2.default.build, _configurator2.default.path);
                if (type && _configurator2.default.assetPattern[type] && !new RegExp(_configurator2.default.assetPattern[type].excludeFilePathRegularExpression).test(filePath)) {
                    const source = compilation.assets[request].source();
                    if (typeof source === 'string') compilation.assets[request] = new _webpackSources.RawSource(_configurator2.default.assetPattern[type].pattern.replace(/\{1\}/g, source.replace(/\$/g, '$$$')));
                }
            }
            callback();
        });
    } });
// //// endregion
// //// region in-place configured assets in the main html file
if (htmlAvailable && !['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2])) pluginInstances.push({ apply: compiler => {
        compiler.plugin('emit', (compilation, callback) => {
            if (_configurator2.default.files.html[0].filename in compilation.assets && (_configurator2.default.inPlace.cascadingStyleSheet || _configurator2.default.inPlace.javaScript)) dom.env(compilation.assets[_configurator2.default.files.html[0].filename].source(), (error, window) => {
                if (_configurator2.default.inPlace.cascadingStyleSheet) {
                    const urlPrefix = _configurator2.default.files.compose.cascadingStyleSheet.replace('[contenthash]', '');
                    const domNode = window.document.querySelector(`link[href^="${ urlPrefix }"]`);
                    if (domNode) {
                        let asset;
                        for (asset in compilation.assets) if (asset.startsWith(urlPrefix)) break;
                        const inPlaceDomNode = window.document.createElement('style');
                        inPlaceDomNode.textContent = compilation.assets[asset].source();
                        domNode.parentNode.insertBefore(inPlaceDomNode, domNode);
                        domNode.parentNode.removeChild(domNode);
                        /*
                            NOTE: This doesn't prevent webpack from
                            creating this file if present in another chunk
                            so removing it (and a potential source map
                            file) later in the "done" hook.
                        */
                        delete compilation.assets[asset];
                    } else console.warn('No referenced cascading style sheet file in' + ' resulting markup found with ' + `selector: link[href^="${ urlPrefix }"]`);
                }
                if (_configurator2.default.inPlace.javaScript) {
                    const urlPrefix = _configurator2.default.files.compose.javaScript.replace('[hash]', '');
                    const domNode = window.document.querySelector(`script[src^="${ urlPrefix }"]`);
                    if (domNode) {
                        let asset;
                        for (asset in compilation.assets) if (asset.startsWith(urlPrefix)) break;
                        domNode.textContent = compilation.assets[asset].source();
                        domNode.removeAttribute('src');
                        /*
                            NOTE: This doesn't prevent webpack from
                            creating this file if present in another chunk
                            so removing it (and a potential source map
                            file) later in the "done" hook.
                        */
                        delete compilation.assets[asset];
                    } else console.warn('No referenced javaScript file in resulting ' + 'markup found with selector: ' + `script[src^="${ urlPrefix }"]`);
                }
                compilation.assets[_configurator2.default.files.html[0].filename] = new _webpackSources.RawSource(compilation.assets[_configurator2.default.files.html[0].filename].source().replace(/^(\s*<!doctype[^>]+?>\s*)[\s\S]*$/i, '$1') + window.document.documentElement.outerHTML);
                callback();
            });else callback();
        });
        compiler.plugin('after-emit', (compilation, callback) => {
            if (_configurator2.default.files.html[0].filename in compilation.assets) {
                if (_configurator2.default.inPlace.cascadingStyleSheet) (0, _rimraf.sync)(_path2.default.join(_configurator2.default.path.asset.target, _configurator2.default.path.asset.cascadingStyleSheet), { glob: false });
                if (_configurator2.default.inPlace.javaScript) {
                    const assetFilePath = _path2.default.join(_configurator2.default.path.asset.target, _configurator2.default.files.compose.javaScript.replace(`?${ _configurator2.default.hashAlgorithm }=[hash]`, ''));
                    for (const filePath of [assetFilePath, `${ assetFilePath }.map`]) if (_helper2.default.isFileSync(filePath)) fileSystem.unlinkSync(filePath);
                    const javaScriptPath = _path2.default.join(_configurator2.default.path.asset.target, _configurator2.default.path.asset.javaScript);
                    if (fileSystem.readdirSync(javaScriptPath).length === 0) fileSystem.rmdirSync(javaScriptPath);
                }
            }
            callback();
        });
    } });
// //// endregion
const injection = _helper2.default.resolveInjection(_configurator2.default.injection, _helper2.default.resolveBuildConfigurationFilePaths(_configurator2.default.build, _configurator2.default.path.asset.source, _configurator2.default.path.context, _configurator2.default.path.ignore), _configurator2.default.testInBrowser.injection.internal, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, _configurator2.default.path.context, _configurator2.default.path.ignore);
const normalizedInternalInjection = _helper2.default.normalizeInternalInjection(injection.internal);
// //// region remove chunks if a corresponding dll package exists
if (_configurator2.default.givenCommandLineArguments[2] !== 'buildDLL') for (const chunkID in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkID) && _configurator2.default.dllManifestFilePaths.includes(`${ _configurator2.default.path.target }${ chunkID }.dll-manifest.json`)) {
    delete normalizedInternalInjection[chunkID];
    // TODO replace all placeholder like "[id]", "[ext]", "[hash]" and
    // everywhere else
    const filePath = _configurator2.default.files.compose.javaScript.replace(/^(.+)(?:\?[^?]*)$/, '$1').replace(/\[name\]/g, chunkID);
    pluginInstances.push(new plugins.AddAssetHTMLPlugin({
        filepath: filePath,
        hash: true,
        includeSourcemap: _helper2.default.isFileSync(`${ filePath }.map`)
    }));
    pluginInstances.push(new _webpack2.default.DllReferencePlugin({
        context: _configurator2.default.path.context, manifest: require(`${ _configurator2.default.path.target }${ chunkID }.dll-manifest.json`)
    }));
}
// //// endregion
// //// region generate common chunks
if (_configurator2.default.givenCommandLineArguments[2] !== 'buildDLL') for (const chunkID of _configurator2.default.injection.commonChunkIDs) if (normalizedInternalInjection.hasOwnProperty(chunkID)) pluginInstances.push(new _webpack2.default.optimize.CommonsChunkPlugin({
    async: false,
    children: false,
    filename: _configurator2.default.files.compose.javaScript,
    minChunks: Infinity,
    name: chunkID,
    minSize: 0
}));
// //// endregion
let javaScriptNeeded = _configurator2.default.debug && ['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2]);
if (!javaScriptNeeded) for (const chunkName in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkName)) for (const moduleID of normalizedInternalInjection[chunkName]) {
    const type = _helper2.default.determineAssetType(_helper2.default.determineModuleFilePath(moduleID, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, _configurator2.default.path.context), _configurator2.default.build, _configurator2.default.path);
    if (type && _configurator2.default.build[type] && _configurator2.default.build[type].outputExtension === 'js') {
        javaScriptNeeded = true;
        break;
    }
}
// //// region mark empty javaScript modules as dummy
if (!javaScriptNeeded) _configurator2.default.files.compose.javaScript = _path2.default.join(_configurator2.default.path.asset.javaScript, '.__dummy__.compiled.js');
// //// endregion
// //// region extract cascading style sheets
pluginInstances.push(new plugins.ExtractText(_configurator2.default.files.compose.cascadingStyleSheet, { allChunks: true, disable: !_configurator2.default.files.compose.cascadingStyleSheet }));
// //// endregion
// //// region performs implicit external logic
if (injection.external === '__implicit__')
    /*
        We only want to process modules from local context in library mode,
        since a concrete project using this library should combine all assets
        (and deduplicate them) for optimal bundling results. NOTE: Only native
        javaScript and json modules will be marked as external dependency.
    */
    injection.external = (context, request, callback) => {
        const filePath = _helper2.default.determineModuleFilePath(request.substring(request.lastIndexOf('!') + 1), _configurator2.default.module.aliases, _configurator2.default.knownExtensions, context);
        if (filePath.endsWith('.js') || filePath.endsWith('.json')) {
            const originalRequest = request;
            // NOTE: We apply alias on externals additionally.
            request = _helper2.default.applyAliases(request.substring(request.lastIndexOf('!') + 1), _configurator2.default.module.aliases);
            const applyExternalRequest = () => {
                if (originalRequest in _configurator2.default.injection.externalAliases) request = _configurator2.default.injection.externalAliases[originalRequest];
                if (_configurator2.default.exportFormat.external === 'var') request = _helper2.default.convertToValidVariableName(request, '0-9a-zA-Z_$\\.');
                return callback(null, request, _configurator2.default.exportFormat.external);
            };
            if (_helper2.default.isAnyMatching(request, _configurator2.default.injection.implicitExternalIncludePattern)) return applyExternalRequest();
            if (_helper2.default.isAnyMatching(request, _configurator2.default.injection.implicitExternalExcludePattern)) return callback();
            for (const chunkName in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkName)) for (const moduleID of normalizedInternalInjection[chunkName]) if (_helper2.default.determineModuleFilePath(moduleID, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, context) === filePath) return callback();
            /*
                NOTE: We mark dependencies as external if they does not contain
                a loader in their request and aren't part of the current node
                package.
            */
            if (!_configurator2.default.inPlace.externalLibrary.normal && !(_configurator2.default.inPlace.externalLibrary.shimmed && originalRequest.includes('!')) && (!_path2.default.resolve(filePath).startsWith(_configurator2.default.path.context) || _helper2.default.isFilePathInLocation(filePath, _configurator2.default.path.ignore))) return applyExternalRequest();
        }
        return callback();
    };
// //// endregion
// //// region build dll packages
if (_configurator2.default.givenCommandLineArguments[2] === 'buildDLL') {
    let dllChunkIDExists = false;
    for (const chunkID in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkID)) if (_configurator2.default.injection.dllChunkIDs.includes(chunkID)) dllChunkIDExists = true;else delete normalizedInternalInjection[chunkID];
    if (dllChunkIDExists) {
        libraryName = '[name]DLLPackage';
        pluginInstances.push(new _webpack2.default.DllPlugin({
            path: `${ _configurator2.default.path.target }[name].dll-manifest.json`,
            name: libraryName
        }));
    } else console.warn('No dll chunk id found.');
}
// //// endregion
// /// endregion
// /// region apply final dom/javaScript modifications/fixes
pluginInstances.push({ apply: compiler => {
        compiler.plugin('emit', (compilation, callback) => {
            const promises = [];
            /*
                NOTE: Removing symbols after a "&" in hash string is necessary to
                match the generated request strings in offline plugin.
            */
            for (const htmlConfiguration of _configurator2.default.files.html) if (htmlConfiguration.filename in compilation.assets) promises.push(new Promise((resolve, reject) => dom.env(compilation.assets[htmlConfiguration.filename].source(), (error, window) => {
                if (error) return reject(error);
                const linkables = {
                    script: 'src', link: 'href' };
                for (const tagName in linkables) if (linkables.hasOwnProperty(tagName)) for (const domNode of window.document.querySelectorAll(`${ tagName }[${ linkables[tagName] }*="?` + `${ _configurator2.default.hashAlgorithm }="]`)) domNode.setAttribute(linkables[tagName], domNode.getAttribute(linkables[tagName]).replace(new RegExp(`(\\?${ _configurator2.default.hashAlgorithm }=` + '[^&]+).*$'), '$1'));
                compilation.assets[htmlConfiguration.filename] = new _webpackSources.RawSource(compilation.assets[htmlConfiguration.filename].source().replace(/^(\s*<!doctype[^>]+?>\s*)[\s\S]*$/i, '$1') + window.document.documentElement.outerHTML);
                return resolve(compilation.assets[htmlConfiguration.filename]);
            })));
            /*
                NOTE: The umd module export doesn't handle casees where the package
                name doesn't match exported library name. This post processing
                fixes this issue.
            */
            for (const assetRequest in compilation.assets) if (assetRequest.replace(/([^?]+)\?.*$/, '$1').endsWith(_configurator2.default.build.javaScript.outputExtension)) {
                let source = compilation.assets[assetRequest].source();
                for (const replacement in _configurator2.default.injection.externalAliases) if (_configurator2.default.injection.externalAliases.hasOwnProperty(replacement)) source = source.replace(new RegExp('(require\\()"' + _helper2.default.convertToValidRegularExpressionString(_configurator2.default.injection.externalAliases[replacement]) + '"(\\))', 'g'), `$1'${ replacement }'$2`).replace(new RegExp('(define\\("' + _helper2.default.convertToValidRegularExpressionString(libraryName) + '", \\[.*)"' + _helper2.default.convertToValidRegularExpressionString(_configurator2.default.injection.externalAliases[replacement]) + '"(.*\\], factory\\);)'), `$1'${ replacement }'$2`);
                source = source.replace(new RegExp('(root\\[)"' + _helper2.default.convertToValidRegularExpressionString(libraryName) + '"(\\] = )'), `$1'${ _helper2.default.convertToValidVariableName(libraryName) }'$2`);
                compilation.assets[assetRequest] = new _webpackSources.RawSource(source);
            }
            Promise.all(promises).then(() => callback());
        });
    } });
// /// endregion
// /// region add automatic image compression
// NOTE: This plugin should be loaded at last to ensure that all emitted images
// ran through.
pluginInstances.push(new plugins.Imagemin(_configurator2.default.module.optimizer.image.content));
// /// endregion
// // endregion
// / region loader
let imageLoader = 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.image.file);
const loader = {
    preprocessor: {
        cascadingStyleSheet: 'postcss',
        javaScript: 'babel?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.modernJavaScript),
        pug: 'pug?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.pug),
        // TODO deprecated
        coffee: 'coffee',
        literateCoffee: 'coffee?literate',
        less: 'less?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.less),
        sass: 'sass?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.sass),
        scss: 'sass?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.scss)
        //
    },
    html: 'html?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.html),
    cascadingStyleSheet: 'css?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.cascadingStyleSheet),
    style: 'style?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.style),
    postprocessor: {
        image: imageLoader,
        font: {
            eot: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.eot),
            woff: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.woff),
            ttf: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.ttf),
            svg: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.svg)
        },
        data: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.data)
    }
};
// / endregion
// endregion
// region configuration
exports.default = {
    context: _configurator2.default.path.context,
    debug: _configurator2.default.debug,
    devtool: _configurator2.default.development.tool,
    devServer: _configurator2.default.development.server,
    // region input
    entry: normalizedInternalInjection, externals: injection.external,
    resolveLoader: {
        alias: _configurator2.default.loader.aliases,
        extensions: _configurator2.default.loader.extensions,
        modulesDirectories: _configurator2.default.loader.moduleDirectories
    },
    resolve: {
        alias: _configurator2.default.module.aliases,
        extensions: _configurator2.default.knownExtensions,
        root: [_configurator2.default.path.asset.source]
    },
    // endregion
    // region output
    output: {
        filename: _path2.default.relative(_configurator2.default.path.asset.target, _configurator2.default.files.compose.javaScript),
        hashFunction: _configurator2.default.hashAlgorithm,
        library: libraryName,
        libraryTarget: _configurator2.default.givenCommandLineArguments[2] === 'buildDLL' ? 'var' : _configurator2.default.exportFormat.self,
        path: _configurator2.default.path.asset.target,
        publicPath: _configurator2.default.path.asset.publicTarget,
        pathinfo: _configurator2.default.debug,
        umdNamedDefine: true
    },
    target: _configurator2.default.targetTechnology,
    // endregion
    module: {
        noParse: _configurator2.default.module.skipParseRegularExpression,
        preLoaders: [
        // Convert to native web types.
        // region script
        {
            test: /\.js$/,
            loader: loader.preprocessor.javaScript,
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.javaScript)].concat(moduleLocations.directoryPaths),
            exclude: filePath => _helper2.default.isFilePathInLocation(filePath.replace(/^(.+)(?:\?[^?]*)$/, '$1'), _configurator2.default.path.ignore)
        }, {
            test: /\.coffee$/,
            loader: loader.preprocessor.coffee,
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.coffeeScript)].concat(moduleLocations.directoryPaths)
        }, {
            test: /\.(?:coffee\.md|litcoffee)$/,
            loader: loader.preprocessor.literateCoffee,
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.coffeeScript)].concat(moduleLocations.directoryPaths)
        },
        // endregion
        // region html (templates)
        // NOTE: This ensures that will be used as a special loader alias.
        {
            test: new RegExp(_helper2.default.convertToValidRegularExpressionString(_configurator2.default.files.defaultHTML.template.substring(_configurator2.default.files.defaultHTML.template.lastIndexOf('!') + 1))),
            loader: _configurator2.default.files.defaultHTML.template.substring(0, _configurator2.default.files.defaultHTML.template.lastIndexOf('!'))
        }, {
            test: /\.pug$/,
            loader: `file?name=${ _configurator2.default.path.asset.template }` + `[name].html?${ _configurator2.default.hashAlgorithm }=[hash]!` + `extract!${ loader.html }!${ loader.preprocessor.pug }`,
            include: _path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.template),
            exclude: _configurator2.default.files.html.concat(_configurator2.default.files.defaultHTML).map(htmlConfiguration => htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1))
        }
        // endregion
        ],
        loaders: [
        // Loads dependencies.
        // region style
        // TODO deprecated
        {
            test: /\.less$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!${ loader.preprocessor.less }`)
        }, {
            test: /\.sass$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!${ loader.preprocessor.sass }`)
        }, {
            test: /\.scss$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!${ loader.preprocessor.scss }`)
        },
        //
        {
            test: /\.css$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.preprocessor.cascadingStyleSheet }!` + loader.cascadingStyleSheet),
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.cascadingStyleSheet)].concat(moduleLocations.directoryPaths),
            exclude: filePath => _helper2.default.isFilePathInLocation(filePath.replace(/^(.+)(?:\?[^?]*)$/, '$1'), _configurator2.default.path.ignore)
        },
        // endregion
        // region html (templates)
        {
            test: /\.html$/,
            loader: `file?name=${ _configurator2.default.path.asset.template }` + `[name].[ext]?${ _configurator2.default.hashAlgorithm }=[hash]!` + `extract!${ loader.html }`,
            include: _path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.template),
            exclude: _configurator2.default.files.html.map(htmlConfiguration => htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1))
        }
        // endregion
        ],
        postLoaders: [
        // Optimize loaded assets.
        // region font
        {
            test: /\.eot(?:\?v=\d+\.\d+\.\d+)?$/,
            loader: loader.postprocessor.font.eot
        }, { test: /\.woff2?$/, loader: loader.postprocessor.font.woff }, {
            test: /\.ttf(?:\?v=\d+\.\d+\.\d+)?$/,
            loader: loader.postprocessor.font.ttf
        }, {
            test: /\.svg(?:\?v=\d+\.\d+\.\d+)?$/,
            loader: loader.postprocessor.font.svg
        },
        // endregion
        // region image
        {
            test: /\.(?:png|jpg|ico|gif)$/,
            loader: loader.postprocessor.image
        },
        // endregion
        // region data
        {
            test: /.+/,
            loader: loader.postprocessor.data,
            include: _path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.data),
            exclude: filePath => _configurator2.default.knownExtensions.includes(_path2.default.extname(filePath.replace(/^(.+)(?:\?[^?]*)$/, '$1')))
        }
        // endregion
        ]
    },
    postcss: () => [_autoprefixer2.default, (0, _postcssImport2.default)({ addDependencyTo: _webpack2.default })],
    html: _configurator2.default.module.optimizer.htmlMinifier,
    // Let the "html-loader" access full html minifier processing
    // configuration.
    pug: _configurator2.default.module.preprocessor.pug,
    plugins: pluginInstances
};
// endregion
// region vim modline
// vim: set tabstop=4 shiftwidth=4 expandtab:
// vim: foldmethod=marker foldmarker=region,endregion:
// endregion

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2tDb25maWd1cmF0b3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBV0E7Ozs7OztBQUNBOztJQUFZLFU7O0FBQ1o7O0lBQVksRzs7QUFDWjs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFLQTs7OztBQUVBOztBQWNBOzs7O0FBQ0E7Ozs7QUFLQTs7OztBQU1BOzs7Ozs7OztBQWhDQTtBQUNBLElBQUk7QUFDQSxZQUFRLDZCQUFSO0FBQ0gsQ0FGRCxDQUVFLE9BQU8sS0FBUCxFQUFjLENBQUU7O0FBRWxCLE1BQU0sVUFBVSxRQUFRLHNCQUFSLEdBQWhCOzs7QUFHQSxRQUFRLElBQVIsR0FBZSxRQUFRLElBQXZCO0FBQ0EsUUFBUSxXQUFSLEdBQXNCLFFBQVEsV0FBOUI7QUFDQSxRQUFRLGtCQUFSLEdBQTZCLFFBQVEsK0JBQVIsQ0FBN0I7QUFDQSxRQUFRLFdBQVIsR0FBc0IsUUFBUSxXQUE5QjtBQUNBLFFBQVEsT0FBUixHQUFrQixRQUFRLHlCQUFSLENBQWxCO0FBQ0EsUUFBUSxRQUFSLEdBQW1CLFFBQVEseUJBQVIsRUFBbUMsT0FBdEQ7QUFDQSxRQUFRLE9BQVIsR0FBa0IsUUFBUSxnQkFBUixDQUFsQjs7QUFTQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxLQUFSLENBQWMsUUFBUSxPQUFSLENBQWdCLGFBQWhCLENBQWQsRUFBOEMsT0FBOUMsR0FBd0QsWUFBZTtBQUNuRSxxQkFBTyxZQUFQLENBQW9CLElBQXBCLEVBQTBCLEtBQUssT0FBL0IsRUFBd0MsTUFBeEMsRUFBZ0QsS0FBSyxPQUFyRDtBQUNBLFdBQU8scUJBQXVCLEtBQXZCLENBQTZCLElBQTdCLEVBQW1DLFNBQW5DLENBQVA7QUFDSCxDQUhEO0FBSUE7O0FBRUEsTUFBTSxnQ0FDRixzQkFBd0IsWUFENUI7QUFFQSxRQUFRLEtBQVIsQ0FBYyxRQUFRLE9BQVIsQ0FBZ0IsY0FBaEIsQ0FBZCxFQUErQyxPQUEvQyxDQUF1RCxZ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QkFBYyxNQUFkLENBQXFCLFlBQXJCLENBQWtDLEdBbk01QjtBQW9NWCxhQUFTO0FBcE1FLEM7QUFzTWY7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJ3ZWJwYWNrQ29uZmlndXJhdG9yLmNvbXBpbGVkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuLy8gQGZsb3dcbi8vIC0qLSBjb2Rpbmc6IHV0Zi04IC0qLVxuJ3VzZSBzdHJpY3QnXG4vKiAhXG4gICAgcmVnaW9uIGhlYWRlclxuICAgIENvcHlyaWdodCBUb3JiZW4gU2lja2VydCAoaW5mb1tcIn5hdH5cIl10b3JiZW4ud2Vic2l0ZSkgMTYuMTIuMjAxMlxuXG4gICAgTGljZW5zZVxuICAgIC0tLS0tLS1cblxuICAgIFRoaXMgbGlicmFyeSB3cml0dGVuIGJ5IFRvcmJlbiBTaWNrZXJ0IHN0YW5kIHVuZGVyIGEgY3JlYXRpdmUgY29tbW9ucyBuYW1pbmdcbiAgICAzLjAgdW5wb3J0ZWQgbGljZW5zZS4gc2VlIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzMuMC9kZWVkLmRlXG4gICAgZW5kcmVnaW9uXG4qL1xuLy8gcmVnaW9uIGltcG9ydHNcbmltcG9ydCAqIGFzIGZpbGVTeXN0ZW0gZnJvbSAnZnMnXG5pbXBvcnQgKiBhcyBkb20gZnJvbSAnanNkb20nXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuXG5pbXBvcnQgYXV0b3ByZWZpeGVyIGZyb20gJ2F1dG9wcmVmaXhlcidcbmltcG9ydCBwb3N0Y3NzSW1wb3J0IGZyb20gJ3Bvc3Rjc3MtaW1wb3J0J1xuaW1wb3J0IHtzeW5jIGFzIHJlbW92ZURpcmVjdG9yeVJlY3Vyc2l2ZWx5U3luY30gZnJvbSAncmltcmFmJ1xuLy8gTk9URTogT25seSBuZWVkZWQgZm9yIGRlYnVnZ2luZyB0aGlzIGZpbGUuXG50cnkge1xuICAgIHJlcXVpcmUoJ3NvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3RlcicpXG59IGNhdGNoIChlcnJvcikge31cbmltcG9ydCB3ZWJwYWNrIGZyb20gJ3dlYnBhY2snXG5jb25zdCBwbHVnaW5zID0gcmVxdWlyZSgnd2VicGFjay1sb2FkLXBsdWdpbnMnKSgpXG5pbXBvcnQge1Jhd1NvdXJjZSBhcyBXZWJwYWNrUmF3U291cmNlfSBmcm9tICd3ZWJwYWNrLXNvdXJjZXMnXG5cbnBsdWdpbnMuSFRNTCA9IHBsdWdpbnMuaHRtbFxucGx1Z2lucy5FeHRyYWN0VGV4dCA9IHBsdWdpbnMuZXh0cmFjdFRleHRcbnBsdWdpbnMuQWRkQXNzZXRIVE1MUGx1Z2luID0gcmVxdWlyZSgnYWRkLWFzc2V0LWh0bWwtd2VicGFjay1wbHVnaW4nKVxucGx1Z2lucy5PcGVuQnJvd3NlciA9IHBsdWdpbnMub3BlbkJyb3dzZXJcbnBsdWdpbnMuRmF2aWNvbiA9IHJlcXVpcmUoJ2Zhdmljb25zLXdlYnBhY2stcGx1Z2luJylcbnBsdWdpbnMuSW1hZ2VtaW4gPSByZXF1aXJlKCdpbWFnZW1pbi13ZWJwYWNrLXBsdWdpbicpLmRlZmF1bHRcbnBsdWdpbnMuT2ZmbGluZSA9IHJlcXVpcmUoJ29mZmxpbmUtcGx1Z2luJylcblxuaW1wb3J0IHR5cGUge1xuICAgIERvbU5vZGUsIEhUTUxDb25maWd1cmF0aW9uLCBJbmplY3Rpb24sIE5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbixcbiAgICBQcm9jZWR1cmVGdW5jdGlvbiwgUHJvbWlzZUNhbGxiYWNrRnVuY3Rpb24sIFdpbmRvd1xufSBmcm9tICcuL3R5cGUnXG5pbXBvcnQgY29uZmlndXJhdGlvbiBmcm9tICcuL2NvbmZpZ3VyYXRvci5jb21waWxlZCdcbmltcG9ydCBIZWxwZXIgZnJvbSAnLi9oZWxwZXIuY29tcGlsZWQnXG5cbi8vIC8gcmVnaW9uIG1vbmtleSBwYXRjaGVzXG4vLyBNb25rZXktUGF0Y2ggaHRtbCBsb2FkZXIgdG8gcmV0cmlldmUgaHRtbCBsb2FkZXIgb3B0aW9ucyBzaW5jZSB0aGVcbi8vIFwid2VicGFjay1odG1sLXBsdWdpblwiIGRvZXNuJ3QgcHJlc2VydmUgdGhlIG9yaWdpbmFsIGxvYWRlciBpbnRlcmZhY2UuXG5pbXBvcnQgaHRtbExvYWRlck1vZHVsZUJhY2t1cCBmcm9tICdodG1sLWxvYWRlcidcbnJlcXVpcmUuY2FjaGVbcmVxdWlyZS5yZXNvbHZlKCdodG1sLWxvYWRlcicpXS5leHBvcnRzID0gZnVuY3Rpb24oKTphbnkge1xuICAgIEhlbHBlci5leHRlbmRPYmplY3QodHJ1ZSwgdGhpcy5vcHRpb25zLCBtb2R1bGUsIHRoaXMub3B0aW9ucylcbiAgICByZXR1cm4gaHRtbExvYWRlck1vZHVsZUJhY2t1cC5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG4vLyBNb25rZXktUGF0Y2ggbG9hZGVyLXV0aWxzIHRvIGRlZmluZSB3aGljaCB1cmwgaXMgYSBsb2NhbCByZXF1ZXN0LlxuaW1wb3J0IGxvYWRlclV0aWxzTW9kdWxlQmFja3VwIGZyb20gJ2xvYWRlci11dGlscydcbmNvbnN0IGxvYWRlclV0aWxzSXNVcmxSZXF1ZXN0QmFja3VwOih1cmw6c3RyaW5nKSA9PiBib29sZWFuID1cbiAgICBsb2FkZXJVdGlsc01vZHVsZUJhY2t1cC5pc1VybFJlcXVlc3RcbnJlcXVpcmUuY2FjaGVbcmVxdWlyZS5yZXNvbHZlKCdsb2FkZXItdXRpbHMnKV0uZXhwb3J0cy5pc1VybFJlcXVlc3QgPSBmdW5jdGlvbihcbiAgICB1cmw6c3RyaW5nXG4pOmJvb2xlYW4ge1xuICAgIGlmICh1cmwubWF0Y2goL15bYS16XSs6LisvKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIGxvYWRlclV0aWxzSXNVcmxSZXF1ZXN0QmFja3VwLmFwcGx5KFxuICAgICAgICBsb2FkZXJVdGlsc01vZHVsZUJhY2t1cCwgYXJndW1lbnRzKVxufVxuLy8gLyBlbmRyZWdpb25cbi8vIGVuZHJlZ2lvblxuLy8gcmVnaW9uIGluaXRpYWxpc2F0aW9uXG5sZXQgbGlicmFyeU5hbWU6c3RyaW5nID0gY29uZmlndXJhdGlvbi5leHBvcnRGb3JtYXQuc2VsZiA9PT0gJ3ZhcicgP1xuICAgIEhlbHBlci5jb252ZXJ0VG9WYWxpZFZhcmlhYmxlTmFtZShjb25maWd1cmF0aW9uLm5hbWUpIDogY29uZmlndXJhdGlvbi5uYW1lXG5pZiAoJ2xpYnJhcnlOYW1lJyBpbiBjb25maWd1cmF0aW9uICYmIGNvbmZpZ3VyYXRpb24ubGlicmFyeU5hbWUpXG4gICAgbGlicmFyeU5hbWUgPSBjb25maWd1cmF0aW9uLmxpYnJhcnlOYW1lXG4vLyAvLyByZWdpb24gcGx1Z2luc1xuY29uc3QgcGx1Z2luSW5zdGFuY2VzOkFycmF5PE9iamVjdD4gPSBbXG4gICAgbmV3IHdlYnBhY2sub3B0aW1pemUuT2NjdXJyZW5jZU9yZGVyUGx1Z2luKHRydWUpXVxuLy8gLy8vIHJlZ2lvbiBkZWZpbmUgbW9kdWxlcyB0byBpZ25vcmVcbmZvciAoY29uc3QgaWdub3JlUGF0dGVybjpzdHJpbmcgb2YgY29uZmlndXJhdGlvbi5pbmplY3Rpb24uaWdub3JlUGF0dGVybilcbiAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgd2VicGFjay5JZ25vcmVQbHVnaW4obmV3IFJlZ0V4cChpZ25vcmVQYXR0ZXJuKSkpXG4vLyAvLy8gZW5kcmVnaW9uXG4vLyAvLy8gcmVnaW9uIGdlbmVyYXRlIGh0bWwgZmlsZVxubGV0IGh0bWxBdmFpbGFibGU6Ym9vbGVhbiA9IGZhbHNlXG5pZiAoY29uZmlndXJhdGlvbi5naXZlbkNvbW1hbmRMaW5lQXJndW1lbnRzWzJdICE9PSAnYnVpbGRETEwnKVxuICAgIGZvciAobGV0IGh0bWxDb25maWd1cmF0aW9uOkhUTUxDb25maWd1cmF0aW9uIG9mIGNvbmZpZ3VyYXRpb24uZmlsZXMuaHRtbClcbiAgICAgICAgaWYgKEhlbHBlci5pc0ZpbGVTeW5jKGh0bWxDb25maWd1cmF0aW9uLnRlbXBsYXRlLnN1YnN0cmluZyhcbiAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uLnRlbXBsYXRlLmxhc3RJbmRleE9mKCchJykgKyAxXG4gICAgICAgICkpKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUgPT09XG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5maWxlcy5kZWZhdWx0SFRNTC50ZW1wbGF0ZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uLnRlbXBsYXRlID1cbiAgICAgICAgICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUubGFzdEluZGV4T2YoJyEnKSArIDEpXG4gICAgICAgICAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgcGx1Z2lucy5IVE1MKGh0bWxDb25maWd1cmF0aW9uKSlcbiAgICAgICAgICAgIGh0bWxBdmFpbGFibGUgPSB0cnVlXG4gICAgICAgIH1cbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gZ2VuZXJhdGUgZmF2aWNvbnNcbmlmIChodG1sQXZhaWxhYmxlICYmIGNvbmZpZ3VyYXRpb24uZmF2aWNvbiAmJiBIZWxwZXIuaXNGaWxlU3luYyhcbiAgICBjb25maWd1cmF0aW9uLmZhdmljb24ubG9nb1xuKSlcbiAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgcGx1Z2lucy5GYXZpY29uKGNvbmZpZ3VyYXRpb24uZmF2aWNvbikpXG4vLyAvLy8gZW5kcmVnaW9uXG4vLyAvLy8gcmVnaW9uIHByb3ZpZGUgb2ZmbGluZSBmdW5jdGlvbmFsaXR5XG5pZiAoaHRtbEF2YWlsYWJsZSAmJiBjb25maWd1cmF0aW9uLm9mZmxpbmUpIHtcbiAgICBpZiAoIVsnc2VydmUnLCAndGVzdEluQnJvd3NlciddLmluY2x1ZGVzKFxuICAgICAgICBjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl1cbiAgICApKSB7XG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uLmluUGxhY2UuY2FzY2FkaW5nU3R5bGVTaGVldClcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ub2ZmbGluZS5leGNsdWRlcy5wdXNoKFxuICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5jYXNjYWRpbmdTdHlsZVNoZWV0fSouY3NzP2AgK1xuICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24uaGFzaEFsZ29yaXRobX09KmApXG4gICAgICAgIGlmIChjb25maWd1cmF0aW9uLmluUGxhY2UuamF2YVNjcmlwdClcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ub2ZmbGluZS5leGNsdWRlcy5wdXNoKFxuICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5qYXZhU2NyaXB0fSouanM/YCArXG4gICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5oYXNoQWxnb3JpdGhtfT0qYClcbiAgICB9XG4gICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHBsdWdpbnMuT2ZmbGluZShjb25maWd1cmF0aW9uLm9mZmxpbmUpKVxufVxuLy8gLy8vIGVuZHJlZ2lvblxuLy8gLy8vIHJlZ2lvbiBvcGVucyBicm93c2VyIGF1dG9tYXRpY2FsbHlcbmlmIChjb25maWd1cmF0aW9uLmRldmVsb3BtZW50Lm9wZW5Ccm93c2VyICYmIChodG1sQXZhaWxhYmxlICYmIFtcbiAgICAnc2VydmUnLCAndGVzdEluQnJvd3Nlcidcbl0uaW5jbHVkZXMoY29uZmlndXJhdGlvbi5naXZlbkNvbW1hbmRMaW5lQXJndW1lbnRzWzJdKSkpXG4gICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHBsdWdpbnMuT3BlbkJyb3dzZXIoXG4gICAgICAgIGNvbmZpZ3VyYXRpb24uZGV2ZWxvcG1lbnQub3BlbkJyb3dzZXIpKVxuLy8gLy8vIGVuZHJlZ2lvblxuLy8gLy8vIHJlZ2lvbiBwcm92aWRlIGJ1aWxkIGVudmlyb25tZW50XG5wbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgd2VicGFjay5EZWZpbmVQbHVnaW4oY29uZmlndXJhdGlvbi5idWlsZERlZmluaXRpb24pKVxuLy8gLy8vIGVuZHJlZ2lvblxuLy8gLy8vIHJlZ2lvbiBtb2R1bGVzL2Fzc2V0c1xuY29uc3QgbW9kdWxlTG9jYXRpb25zOntba2V5OnN0cmluZ106QXJyYXk8c3RyaW5nPn0gPVxuICAgIEhlbHBlci5kZXRlcm1pbmVNb2R1bGVMb2NhdGlvbnMoXG4gICAgICAgIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmludGVybmFsLCBjb25maWd1cmF0aW9uLm1vZHVsZS5hbGlhc2VzLFxuICAgICAgICBjb25maWd1cmF0aW9uLmtub3duRXh0ZW5zaW9ucywgY29uZmlndXJhdGlvbi5wYXRoLmNvbnRleHQsXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5pZ25vcmUpXG4vLyAvLy8vIHJlZ2lvbiBwZXJmb3JtIGphdmFTY3JpcHQgbWluaWZpY2F0aW9uL29wdGltaXNhdGlvblxuaWYgKGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci51Z2xpZnlKUylcbiAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgd2VicGFjay5vcHRpbWl6ZS5VZ2xpZnlKc1BsdWdpbihcbiAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLnVnbGlmeUpTKSlcbi8vIC8vLy8gZW5kcmVnaW9uXG4vLyAvLy8vIHJlZ2lvbiBhcHBseSBtb2R1bGUgcGF0dGVyblxucGx1Z2luSW5zdGFuY2VzLnB1c2goe2FwcGx5OiAoY29tcGlsZXI6T2JqZWN0KTp2b2lkID0+IHtcbiAgICBjb21waWxlci5wbHVnaW4oJ2VtaXQnLCAoXG4gICAgICAgIGNvbXBpbGF0aW9uOk9iamVjdCwgY2FsbGJhY2s6UHJvY2VkdXJlRnVuY3Rpb25cbiAgICApOnZvaWQgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IHJlcXVlc3Q6c3RyaW5nIGluIGNvbXBpbGF0aW9uLmFzc2V0cylcbiAgICAgICAgICAgIGlmIChjb21waWxhdGlvbi5hc3NldHMuaGFzT3duUHJvcGVydHkocmVxdWVzdCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aDpzdHJpbmcgPSByZXF1ZXN0LnJlcGxhY2UoL1xcP1teP10rJC8sICcnKVxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGU6P3N0cmluZyA9IEhlbHBlci5kZXRlcm1pbmVBc3NldFR5cGUoXG4gICAgICAgICAgICAgICAgICAgIGZpbGVQYXRoLCBjb25maWd1cmF0aW9uLmJ1aWxkLCBjb25maWd1cmF0aW9uLnBhdGgpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgJiYgY29uZmlndXJhdGlvbi5hc3NldFBhdHRlcm5bdHlwZV0gJiYgIShuZXcgUmVnRXhwKFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmFzc2V0UGF0dGVyblt0eXBlXVxuICAgICAgICAgICAgICAgICAgICAgICAgLmV4Y2x1ZGVGaWxlUGF0aFJlZ3VsYXJFeHByZXNzaW9uXG4gICAgICAgICAgICAgICAgKSkudGVzdChmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlOj9zdHJpbmcgPSBjb21waWxhdGlvbi5hc3NldHNbcmVxdWVzdF0uc291cmNlKClcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW3JlcXVlc3RdID0gbmV3IFdlYnBhY2tSYXdTb3VyY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5hc3NldFBhdHRlcm5bdHlwZV0ucGF0dGVybi5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXFx7MVxcfS9nLCBzb3VyY2UucmVwbGFjZSgvXFwkL2csICckJCQnKSkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBjYWxsYmFjaygpXG4gICAgfSlcbn19KVxuLy8gLy8vLyBlbmRyZWdpb25cbi8vIC8vLy8gcmVnaW9uIGluLXBsYWNlIGNvbmZpZ3VyZWQgYXNzZXRzIGluIHRoZSBtYWluIGh0bWwgZmlsZVxuaWYgKGh0bWxBdmFpbGFibGUgJiYgIVsnc2VydmUnLCAndGVzdEluQnJvd3NlciddLmluY2x1ZGVzKFxuICAgIGNvbmZpZ3VyYXRpb24uZ2l2ZW5Db21tYW5kTGluZUFyZ3VtZW50c1syXVxuKSlcbiAgICBwbHVnaW5JbnN0YW5jZXMucHVzaCh7YXBwbHk6IChjb21waWxlcjpPYmplY3QpOnZvaWQgPT4ge1xuICAgICAgICBjb21waWxlci5wbHVnaW4oJ2VtaXQnLCAoXG4gICAgICAgICAgICBjb21waWxhdGlvbjpPYmplY3QsIGNhbGxiYWNrOlByb2NlZHVyZUZ1bmN0aW9uXG4gICAgICAgICk6dm9pZCA9PiB7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5maWxlcy5odG1sWzBdLmZpbGVuYW1lIGluIGNvbXBpbGF0aW9uLmFzc2V0cyAmJiAoXG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5pblBsYWNlLmNhc2NhZGluZ1N0eWxlU2hlZXQgfHxcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmluUGxhY2UuamF2YVNjcmlwdFxuICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICBkb20uZW52KGNvbXBpbGF0aW9uLmFzc2V0c1tjb25maWd1cmF0aW9uLmZpbGVzLmh0bWxbXG4gICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICBdLmZpbGVuYW1lXS5zb3VyY2UoKSwgKGVycm9yOj9FcnJvciwgd2luZG93Ok9iamVjdCk6dm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLmluUGxhY2UuY2FzY2FkaW5nU3R5bGVTaGVldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsUHJlZml4OnN0cmluZyA9IGNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXNjYWRpbmdTdHlsZVNoZWV0LnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdbY29udGVudGhhc2hdJywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkb21Ob2RlOkRvbU5vZGUgPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgbGlua1tocmVmXj1cIiR7dXJsUHJlZml4fVwiXWApXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9tTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhc3NldDpzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGFzc2V0IGluIGNvbXBpbGF0aW9uLmFzc2V0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0LnN0YXJ0c1dpdGgodXJsUHJlZml4KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5QbGFjZURvbU5vZGU6RG9tTm9kZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5QbGFjZURvbU5vZGUudGV4dENvbnRlbnQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21waWxhdGlvbi5hc3NldHNbYXNzZXRdLnNvdXJjZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5QbGFjZURvbU5vZGUsIGRvbU5vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tTm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRvbU5vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9URTogVGhpcyBkb2Vzbid0IHByZXZlbnQgd2VicGFjayBmcm9tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0aW5nIHRoaXMgZmlsZSBpZiBwcmVzZW50IGluIGFub3RoZXIgY2h1bmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc28gcmVtb3ZpbmcgaXQgKGFuZCBhIHBvdGVudGlhbCBzb3VyY2UgbWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUpIGxhdGVyIGluIHRoZSBcImRvbmVcIiBob29rLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbXBpbGF0aW9uLmFzc2V0c1thc3NldF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vIHJlZmVyZW5jZWQgY2FzY2FkaW5nIHN0eWxlIHNoZWV0IGZpbGUgaW4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyByZXN1bHRpbmcgbWFya3VwIGZvdW5kIHdpdGggJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBzZWxlY3RvcjogbGlua1tocmVmXj1cIiR7dXJsUHJlZml4fVwiXWApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uaW5QbGFjZS5qYXZhU2NyaXB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmxQcmVmaXg6c3RyaW5nID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmZpbGVzLmNvbXBvc2UuamF2YVNjcmlwdC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnW2hhc2hdJywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkb21Ob2RlOkRvbU5vZGUgPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgc2NyaXB0W3NyY149XCIke3VybFByZWZpeH1cIl1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbU5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXQ6c3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhc3NldCBpbiBjb21waWxhdGlvbi5hc3NldHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhc3NldC5zdGFydHNXaXRoKHVybFByZWZpeCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbU5vZGUudGV4dENvbnRlbnQgPSBjb21waWxhdGlvbi5hc3NldHNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5zb3VyY2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbU5vZGUucmVtb3ZlQXR0cmlidXRlKCdzcmMnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PVEU6IFRoaXMgZG9lc24ndCBwcmV2ZW50IHdlYnBhY2sgZnJvbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGluZyB0aGlzIGZpbGUgaWYgcHJlc2VudCBpbiBhbm90aGVyIGNodW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvIHJlbW92aW5nIGl0IChhbmQgYSBwb3RlbnRpYWwgc291cmNlIG1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlKSBsYXRlciBpbiB0aGUgXCJkb25lXCIgaG9vay5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21waWxhdGlvbi5hc3NldHNbYXNzZXRdXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdObyByZWZlcmVuY2VkIGphdmFTY3JpcHQgZmlsZSBpbiByZXN1bHRpbmcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYXJrdXAgZm91bmQgd2l0aCBzZWxlY3RvcjogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBzY3JpcHRbc3JjXj1cIiR7dXJsUHJlZml4fVwiXWApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW2NvbmZpZ3VyYXRpb24uZmlsZXMuaHRtbFtcbiAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgXS5maWxlbmFtZV0gPSBuZXcgV2VicGFja1Jhd1NvdXJjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBpbGF0aW9uLmFzc2V0c1tjb25maWd1cmF0aW9uLmZpbGVzLmh0bWxbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICAgICAgXS5maWxlbmFtZV0uc291cmNlKCkucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXihcXHMqPCFkb2N0eXBlW14+XSs/PlxccyopW1xcc1xcU10qJC9pLCAnJDEnXG4gICAgICAgICAgICAgICAgICAgICAgICApICsgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUwpXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgfSlcbiAgICAgICAgY29tcGlsZXIucGx1Z2luKCdhZnRlci1lbWl0JywgKFxuICAgICAgICAgICAgY29tcGlsYXRpb246T2JqZWN0LCBjYWxsYmFjazpQcm9jZWR1cmVGdW5jdGlvblxuICAgICAgICApOnZvaWQgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uZmlsZXMuaHRtbFswXS5maWxlbmFtZSBpbiBjb21waWxhdGlvbi5hc3NldHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5pblBsYWNlLmNhc2NhZGluZ1N0eWxlU2hlZXQpXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZURpcmVjdG9yeVJlY3Vyc2l2ZWx5U3luYyhwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LmNhc2NhZGluZ1N0eWxlU2hlZXRcbiAgICAgICAgICAgICAgICAgICAgKSwge2dsb2I6IGZhbHNlfSlcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5pblBsYWNlLmphdmFTY3JpcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzZXRGaWxlUGF0aCA9IHBhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmZpbGVzLmNvbXBvc2UuamF2YVNjcmlwdC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA/JHtjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG19PVtoYXNoXWAsICcnKSlcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlUGF0aDpzdHJpbmcgb2YgW1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRGaWxlUGF0aCwgYCR7YXNzZXRGaWxlUGF0aH0ubWFwYFxuICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEhlbHBlci5pc0ZpbGVTeW5jKGZpbGVQYXRoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlU3lzdGVtLnVubGlua1N5bmMoZmlsZVBhdGgpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGphdmFTY3JpcHRQYXRoOnN0cmluZyA9IHBhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuamF2YVNjcmlwdClcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVTeXN0ZW0ucmVhZGRpclN5bmMoamF2YVNjcmlwdFBhdGgpLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVTeXN0ZW0ucm1kaXJTeW5jKGphdmFTY3JpcHRQYXRoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKClcbiAgICAgICAgfSlcbiAgICB9fSlcbi8vIC8vLy8gZW5kcmVnaW9uXG5jb25zdCBpbmplY3Rpb246SW5qZWN0aW9uID0gSGVscGVyLnJlc29sdmVJbmplY3Rpb24oXG4gICAgY29uZmlndXJhdGlvbi5pbmplY3Rpb24sIEhlbHBlci5yZXNvbHZlQnVpbGRDb25maWd1cmF0aW9uRmlsZVBhdGhzKFxuICAgICAgICBjb25maWd1cmF0aW9uLmJ1aWxkLCBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuc291cmNlLFxuICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguY29udGV4dCwgY29uZmlndXJhdGlvbi5wYXRoLmlnbm9yZVxuICAgICksIGNvbmZpZ3VyYXRpb24udGVzdEluQnJvd3Nlci5pbmplY3Rpb24uaW50ZXJuYWwsXG4gICAgY29uZmlndXJhdGlvbi5tb2R1bGUuYWxpYXNlcywgY29uZmlndXJhdGlvbi5rbm93bkV4dGVuc2lvbnMsXG4gICAgY29uZmlndXJhdGlvbi5wYXRoLmNvbnRleHQsIGNvbmZpZ3VyYXRpb24ucGF0aC5pZ25vcmUpXG5jb25zdCBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb246Tm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uID1cbiAgICBIZWxwZXIubm9ybWFsaXplSW50ZXJuYWxJbmplY3Rpb24oaW5qZWN0aW9uLmludGVybmFsKVxuLy8gLy8vLyByZWdpb24gcmVtb3ZlIGNodW5rcyBpZiBhIGNvcnJlc3BvbmRpbmcgZGxsIHBhY2thZ2UgZXhpc3RzXG5pZiAoY29uZmlndXJhdGlvbi5naXZlbkNvbW1hbmRMaW5lQXJndW1lbnRzWzJdICE9PSAnYnVpbGRETEwnKVxuICAgIGZvciAoY29uc3QgY2h1bmtJRDpzdHJpbmcgaW4gbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24uaGFzT3duUHJvcGVydHkoY2h1bmtJRCkgJiZcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZGxsTWFuaWZlc3RGaWxlUGF0aHMuaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5wYXRoLnRhcmdldH0ke2NodW5rSUR9LmRsbC1tYW5pZmVzdC5qc29uYClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBkZWxldGUgbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uW2NodW5rSURdXG4gICAgICAgICAgICAvLyBUT0RPIHJlcGxhY2UgYWxsIHBsYWNlaG9sZGVyIGxpa2UgXCJbaWRdXCIsIFwiW2V4dF1cIiwgXCJbaGFzaF1cIiBhbmRcbiAgICAgICAgICAgIC8vIGV2ZXJ5d2hlcmUgZWxzZVxuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGg6c3RyaW5nID1cbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmZpbGVzLmNvbXBvc2UuamF2YVNjcmlwdC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAvXiguKykoPzpcXD9bXj9dKikkLywgJyQxJ1xuICAgICAgICAgICAgICAgICkucmVwbGFjZSgvXFxbbmFtZVxcXS9nLCBjaHVua0lEKVxuICAgICAgICAgICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHBsdWdpbnMuQWRkQXNzZXRIVE1MUGx1Z2luKHtcbiAgICAgICAgICAgICAgICBmaWxlcGF0aDogZmlsZVBhdGgsXG4gICAgICAgICAgICAgICAgaGFzaDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlU291cmNlbWFwOiBIZWxwZXIuaXNGaWxlU3luYyhgJHtmaWxlUGF0aH0ubWFwYClcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHdlYnBhY2suRGxsUmVmZXJlbmNlUGx1Z2luKHtcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBjb25maWd1cmF0aW9uLnBhdGguY29udGV4dCwgbWFuaWZlc3Q6IHJlcXVpcmUoXG4gICAgICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24ucGF0aC50YXJnZXR9JHtjaHVua0lEfS5kbGwtbWFuaWZlc3QuanNvbmApXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgfVxuLy8gLy8vLyBlbmRyZWdpb25cbi8vIC8vLy8gcmVnaW9uIGdlbmVyYXRlIGNvbW1vbiBjaHVua3NcbmlmIChjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl0gIT09ICdidWlsZERMTCcpXG4gICAgZm9yIChjb25zdCBjaHVua0lEOnN0cmluZyBvZiBjb25maWd1cmF0aW9uLmluamVjdGlvbi5jb21tb25DaHVua0lEcylcbiAgICAgICAgaWYgKG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbi5oYXNPd25Qcm9wZXJ0eShjaHVua0lEKSlcbiAgICAgICAgICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyB3ZWJwYWNrLm9wdGltaXplLkNvbW1vbnNDaHVua1BsdWdpbih7XG4gICAgICAgICAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogY29uZmlndXJhdGlvbi5maWxlcy5jb21wb3NlLmphdmFTY3JpcHQsXG4gICAgICAgICAgICAgICAgbWluQ2h1bmtzOiBJbmZpbml0eSxcbiAgICAgICAgICAgICAgICBuYW1lOiBjaHVua0lELFxuICAgICAgICAgICAgICAgIG1pblNpemU6IDBcbiAgICAgICAgICAgIH0pKVxuLy8gLy8vLyBlbmRyZWdpb25cbmxldCBqYXZhU2NyaXB0TmVlZGVkOmJvb2xlYW4gPSBjb25maWd1cmF0aW9uLmRlYnVnICYmIFtcbiAgICAnc2VydmUnLCAndGVzdEluQnJvd3Nlcidcbl0uaW5jbHVkZXMoY29uZmlndXJhdGlvbi5naXZlbkNvbW1hbmRMaW5lQXJndW1lbnRzWzJdKVxuaWYgKCFqYXZhU2NyaXB0TmVlZGVkKVxuICAgIGZvciAoY29uc3QgY2h1bmtOYW1lOnN0cmluZyBpbiBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24pXG4gICAgICAgIGlmIChub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24uaGFzT3duUHJvcGVydHkoY2h1bmtOYW1lKSlcbiAgICAgICAgICAgIGZvciAoY29uc3QgbW9kdWxlSUQ6c3RyaW5nIG9mIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbltcbiAgICAgICAgICAgICAgICBjaHVua05hbWVcbiAgICAgICAgICAgIF0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlOj9zdHJpbmcgPSBIZWxwZXIuZGV0ZXJtaW5lQXNzZXRUeXBlKFxuICAgICAgICAgICAgICAgICAgICBIZWxwZXIuZGV0ZXJtaW5lTW9kdWxlRmlsZVBhdGgoXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVJRCwgY29uZmlndXJhdGlvbi5tb2R1bGUuYWxpYXNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ua25vd25FeHRlbnNpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmNvbnRleHQpLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmJ1aWxkLCBjb25maWd1cmF0aW9uLnBhdGgpXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgJiYgY29uZmlndXJhdGlvbi5idWlsZFt0eXBlXSAmJiBjb25maWd1cmF0aW9uLmJ1aWxkW1xuICAgICAgICAgICAgICAgICAgICB0eXBlXG4gICAgICAgICAgICAgICAgXS5vdXRwdXRFeHRlbnNpb24gPT09ICdqcycpIHtcbiAgICAgICAgICAgICAgICAgICAgamF2YVNjcmlwdE5lZWRlZCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4vLyAvLy8vIHJlZ2lvbiBtYXJrIGVtcHR5IGphdmFTY3JpcHQgbW9kdWxlcyBhcyBkdW1teVxuaWYgKCFqYXZhU2NyaXB0TmVlZGVkKVxuICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZS5qYXZhU2NyaXB0ID0gcGF0aC5qb2luKFxuICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuamF2YVNjcmlwdCwgJy5fX2R1bW15X18uY29tcGlsZWQuanMnKVxuLy8gLy8vLyBlbmRyZWdpb25cbi8vIC8vLy8gcmVnaW9uIGV4dHJhY3QgY2FzY2FkaW5nIHN0eWxlIHNoZWV0c1xucGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHBsdWdpbnMuRXh0cmFjdFRleHQoXG4gICAgY29uZmlndXJhdGlvbi5maWxlcy5jb21wb3NlLmNhc2NhZGluZ1N0eWxlU2hlZXQsIHthbGxDaHVua3M6IHRydWUsIGRpc2FibGU6XG4gICAgICAgICFjb25maWd1cmF0aW9uLmZpbGVzLmNvbXBvc2UuY2FzY2FkaW5nU3R5bGVTaGVldH0pKVxuLy8gLy8vLyBlbmRyZWdpb25cbi8vIC8vLy8gcmVnaW9uIHBlcmZvcm1zIGltcGxpY2l0IGV4dGVybmFsIGxvZ2ljXG5pZiAoaW5qZWN0aW9uLmV4dGVybmFsID09PSAnX19pbXBsaWNpdF9fJylcbiAgICAvKlxuICAgICAgICBXZSBvbmx5IHdhbnQgdG8gcHJvY2VzcyBtb2R1bGVzIGZyb20gbG9jYWwgY29udGV4dCBpbiBsaWJyYXJ5IG1vZGUsXG4gICAgICAgIHNpbmNlIGEgY29uY3JldGUgcHJvamVjdCB1c2luZyB0aGlzIGxpYnJhcnkgc2hvdWxkIGNvbWJpbmUgYWxsIGFzc2V0c1xuICAgICAgICAoYW5kIGRlZHVwbGljYXRlIHRoZW0pIGZvciBvcHRpbWFsIGJ1bmRsaW5nIHJlc3VsdHMuIE5PVEU6IE9ubHkgbmF0aXZlXG4gICAgICAgIGphdmFTY3JpcHQgYW5kIGpzb24gbW9kdWxlcyB3aWxsIGJlIG1hcmtlZCBhcyBleHRlcm5hbCBkZXBlbmRlbmN5LlxuICAgICovXG4gICAgaW5qZWN0aW9uLmV4dGVybmFsID0gKFxuICAgICAgICBjb250ZXh0OnN0cmluZywgcmVxdWVzdDpzdHJpbmcsIGNhbGxiYWNrOlByb2NlZHVyZUZ1bmN0aW9uXG4gICAgKTp2b2lkID0+IHtcbiAgICAgICAgY29uc3QgZmlsZVBhdGg6c3RyaW5nID0gSGVscGVyLmRldGVybWluZU1vZHVsZUZpbGVQYXRoKFxuICAgICAgICAgICAgcmVxdWVzdC5zdWJzdHJpbmcocmVxdWVzdC5sYXN0SW5kZXhPZignIScpICsgMSksXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5hbGlhc2VzLCBjb25maWd1cmF0aW9uLmtub3duRXh0ZW5zaW9ucyxcbiAgICAgICAgICAgIGNvbnRleHQpXG4gICAgICAgIGlmIChmaWxlUGF0aC5lbmRzV2l0aCgnLmpzJykgfHwgZmlsZVBhdGguZW5kc1dpdGgoJy5qc29uJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUmVxdWVzdDpzdHJpbmcgPSByZXF1ZXN0XG4gICAgICAgICAgICAvLyBOT1RFOiBXZSBhcHBseSBhbGlhcyBvbiBleHRlcm5hbHMgYWRkaXRpb25hbGx5LlxuICAgICAgICAgICAgcmVxdWVzdCA9IEhlbHBlci5hcHBseUFsaWFzZXMoXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zdWJzdHJpbmcocmVxdWVzdC5sYXN0SW5kZXhPZignIScpICsgMSksXG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUuYWxpYXNlcylcbiAgICAgICAgICAgIGNvbnN0IGFwcGx5RXh0ZXJuYWxSZXF1ZXN0OkZ1bmN0aW9uID0gKCk6dm9pZCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsUmVxdWVzdCBpbiBjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXMpXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSBjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFJlcXVlc3RdXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uZXhwb3J0Rm9ybWF0LmV4dGVybmFsID09PSAndmFyJylcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCA9IEhlbHBlci5jb252ZXJ0VG9WYWxpZFZhcmlhYmxlTmFtZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QsICcwLTlhLXpBLVpfJFxcXFwuJylcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soXG4gICAgICAgICAgICAgICAgICAgIG51bGwsIHJlcXVlc3QsIGNvbmZpZ3VyYXRpb24uZXhwb3J0Rm9ybWF0LmV4dGVybmFsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEhlbHBlci5pc0FueU1hdGNoaW5nKFxuICAgICAgICAgICAgICAgIHJlcXVlc3QsIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmltcGxpY2l0RXh0ZXJuYWxJbmNsdWRlUGF0dGVyblxuICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwbHlFeHRlcm5hbFJlcXVlc3QoKVxuICAgICAgICAgICAgaWYgKEhlbHBlci5pc0FueU1hdGNoaW5nKFxuICAgICAgICAgICAgICAgIHJlcXVlc3QsIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmltcGxpY2l0RXh0ZXJuYWxFeGNsdWRlUGF0dGVyblxuICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKVxuICAgICAgICAgICAgZm9yIChjb25zdCBjaHVua05hbWU6c3RyaW5nIGluIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbilcbiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uLmhhc093blByb3BlcnR5KGNodW5rTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2R1bGVJRDpzdHJpbmcgb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbltjaHVua05hbWVdXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChIZWxwZXIuZGV0ZXJtaW5lTW9kdWxlRmlsZVBhdGgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlSUQsIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmFsaWFzZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5rbm93bkV4dGVuc2lvbnMsIGNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICkgPT09IGZpbGVQYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIE5PVEU6IFdlIG1hcmsgZGVwZW5kZW5jaWVzIGFzIGV4dGVybmFsIGlmIHRoZXkgZG9lcyBub3QgY29udGFpblxuICAgICAgICAgICAgICAgIGEgbG9hZGVyIGluIHRoZWlyIHJlcXVlc3QgYW5kIGFyZW4ndCBwYXJ0IG9mIHRoZSBjdXJyZW50IG5vZGVcbiAgICAgICAgICAgICAgICBwYWNrYWdlLlxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICghY29uZmlndXJhdGlvbi5pblBsYWNlLmV4dGVybmFsTGlicmFyeS5ub3JtYWwgJiYgIShcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmluUGxhY2UuZXh0ZXJuYWxMaWJyYXJ5LnNoaW1tZWQgJiZcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFJlcXVlc3QuaW5jbHVkZXMoJyEnKVxuICAgICAgICAgICAgKSAmJiAoIXBhdGgucmVzb2x2ZShmaWxlUGF0aCkuc3RhcnRzV2l0aChcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguY29udGV4dFxuICAgICAgICAgICAgKSB8fCBIZWxwZXIuaXNGaWxlUGF0aEluTG9jYXRpb24oXG4gICAgICAgICAgICAgICAgZmlsZVBhdGgsIGNvbmZpZ3VyYXRpb24ucGF0aC5pZ25vcmVcbiAgICAgICAgICAgICkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhcHBseUV4dGVybmFsUmVxdWVzdCgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKClcbiAgICB9XG4vLyAvLy8vIGVuZHJlZ2lvblxuLy8gLy8vLyByZWdpb24gYnVpbGQgZGxsIHBhY2thZ2VzXG5pZiAoY29uZmlndXJhdGlvbi5naXZlbkNvbW1hbmRMaW5lQXJndW1lbnRzWzJdID09PSAnYnVpbGRETEwnKSB7XG4gICAgbGV0IGRsbENodW5rSURFeGlzdHM6Ym9vbGVhbiA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBjaHVua0lEOnN0cmluZyBpbiBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24pXG4gICAgICAgIGlmIChub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24uaGFzT3duUHJvcGVydHkoY2h1bmtJRCkpXG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5pbmplY3Rpb24uZGxsQ2h1bmtJRHMuaW5jbHVkZXMoY2h1bmtJRCkpXG4gICAgICAgICAgICAgICAgZGxsQ2h1bmtJREV4aXN0cyA9IHRydWVcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBkZWxldGUgbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uW2NodW5rSURdXG4gICAgaWYgKGRsbENodW5rSURFeGlzdHMpIHtcbiAgICAgICAgbGlicmFyeU5hbWUgPSAnW25hbWVdRExMUGFja2FnZSdcbiAgICAgICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHdlYnBhY2suRGxsUGx1Z2luKHtcbiAgICAgICAgICAgIHBhdGg6IGAke2NvbmZpZ3VyYXRpb24ucGF0aC50YXJnZXR9W25hbWVdLmRsbC1tYW5pZmVzdC5qc29uYCxcbiAgICAgICAgICAgIG5hbWU6IGxpYnJhcnlOYW1lXG4gICAgICAgIH0pKVxuICAgIH0gZWxzZVxuICAgICAgICBjb25zb2xlLndhcm4oJ05vIGRsbCBjaHVuayBpZCBmb3VuZC4nKVxufVxuLy8gLy8vLyBlbmRyZWdpb25cbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gYXBwbHkgZmluYWwgZG9tL2phdmFTY3JpcHQgbW9kaWZpY2F0aW9ucy9maXhlc1xucGx1Z2luSW5zdGFuY2VzLnB1c2goe2FwcGx5OiAoY29tcGlsZXI6T2JqZWN0KTp2b2lkID0+IHtcbiAgICBjb21waWxlci5wbHVnaW4oJ2VtaXQnLCAoXG4gICAgICAgIGNvbXBpbGF0aW9uOk9iamVjdCwgY2FsbGJhY2s6UHJvY2VkdXJlRnVuY3Rpb25cbiAgICApOnZvaWQgPT4ge1xuICAgICAgICBjb25zdCBwcm9taXNlczpBcnJheTxQcm9taXNlPHN0cmluZz4+ID0gW11cbiAgICAgICAgLypcbiAgICAgICAgICAgIE5PVEU6IFJlbW92aW5nIHN5bWJvbHMgYWZ0ZXIgYSBcIiZcIiBpbiBoYXNoIHN0cmluZyBpcyBuZWNlc3NhcnkgdG9cbiAgICAgICAgICAgIG1hdGNoIHRoZSBnZW5lcmF0ZWQgcmVxdWVzdCBzdHJpbmdzIGluIG9mZmxpbmUgcGx1Z2luLlxuICAgICAgICAqL1xuICAgICAgICBmb3IgKGNvbnN0IGh0bWxDb25maWd1cmF0aW9uIG9mIGNvbmZpZ3VyYXRpb24uZmlsZXMuaHRtbClcbiAgICAgICAgICAgIGlmIChodG1sQ29uZmlndXJhdGlvbi5maWxlbmFtZSBpbiBjb21waWxhdGlvbi5hc3NldHMpXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChuZXcgUHJvbWlzZSgoXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmU6UHJvbWlzZUNhbGxiYWNrRnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdDpQcm9taXNlQ2FsbGJhY2tGdW5jdGlvblxuICAgICAgICAgICAgICAgICk6V2luZG93ID0+IGRvbS5lbnYoY29tcGlsYXRpb24uYXNzZXRzW1xuICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi5maWxlbmFtZVxuICAgICAgICAgICAgICAgIF0uc291cmNlKCksIChlcnJvcjo/RXJyb3IsIHdpbmRvdzpXaW5kb3cpOj9Qcm9taXNlPHN0cmluZz4gPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rYWJsZXM6e1trZXk6c3RyaW5nXTpzdHJpbmd9ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0OiAnc3JjJywgbGluazogJ2hyZWYnfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRhZ05hbWU6c3RyaW5nIGluIGxpbmthYmxlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rYWJsZXMuaGFzT3duUHJvcGVydHkodGFnTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9tTm9kZTpEb21Ob2RlIG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGFnTmFtZX1bJHtsaW5rYWJsZXNbdGFnTmFtZV19Kj1cIj9gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24uaGFzaEFsZ29yaXRobX09XCJdYClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbU5vZGUuc2V0QXR0cmlidXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua2FibGVzW3RhZ05hbWVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tTm9kZS5nZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua2FibGVzW3RhZ05hbWVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnJlcGxhY2UobmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKFxcXFw/JHtjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG19PWAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdbXiZdKykuKiQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCAnJDEnKSlcbiAgICAgICAgICAgICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW2h0bWxDb25maWd1cmF0aW9uLmZpbGVuYW1lXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgV2VicGFja1Jhd1NvdXJjZShjb21waWxhdGlvbi5hc3NldHNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb24uZmlsZW5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uc291cmNlKCkucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXihcXHMqPCFkb2N0eXBlW14+XSs/PlxccyopW1xcc1xcU10qJC9pLCAnJDEnXG4gICAgICAgICAgICAgICAgICAgICAgICApICsgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW2h0bWxDb25maWd1cmF0aW9uLmZpbGVuYW1lXSlcbiAgICAgICAgICAgICAgICB9KSkpXG4gICAgICAgIC8qXG4gICAgICAgICAgICBOT1RFOiBUaGUgdW1kIG1vZHVsZSBleHBvcnQgZG9lc24ndCBoYW5kbGUgY2FzZWVzIHdoZXJlIHRoZSBwYWNrYWdlXG4gICAgICAgICAgICBuYW1lIGRvZXNuJ3QgbWF0Y2ggZXhwb3J0ZWQgbGlicmFyeSBuYW1lLiBUaGlzIHBvc3QgcHJvY2Vzc2luZ1xuICAgICAgICAgICAgZml4ZXMgdGhpcyBpc3N1ZS5cbiAgICAgICAgKi9cbiAgICAgICAgZm9yIChjb25zdCBhc3NldFJlcXVlc3Q6c3RyaW5nIGluIGNvbXBpbGF0aW9uLmFzc2V0cylcbiAgICAgICAgICAgIGlmIChhc3NldFJlcXVlc3QucmVwbGFjZSgvKFteP10rKVxcPy4qJC8sICckMScpLmVuZHNXaXRoKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uYnVpbGQuamF2YVNjcmlwdC5vdXRwdXRFeHRlbnNpb25cbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlOnN0cmluZyA9IGNvbXBpbGF0aW9uLmFzc2V0c1tcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRSZXF1ZXN0XG4gICAgICAgICAgICAgICAgXS5zb3VyY2UoKVxuICAgICAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50OnN0cmluZyBpblxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXNcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXMuaGFzT3duUHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudFxuICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0gc291cmNlLnJlcGxhY2UobmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKHJlcXVpcmVcXFxcKClcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5jb252ZXJ0VG9WYWxpZFJlZ3VsYXJFeHByZXNzaW9uU3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApICsgJ1wiKFxcXFwpKScsICdnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSwgYCQxJyR7cmVwbGFjZW1lbnR9JyQyYCkucmVwbGFjZShuZXcgUmVnRXhwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcoZGVmaW5lXFxcXChcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5jb252ZXJ0VG9WYWxpZFJlZ3VsYXJFeHByZXNzaW9uU3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWJyYXJ5TmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgKyAnXCIsIFxcXFxbLiopXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuY29udmVydFRvVmFsaWRSZWd1bGFyRXhwcmVzc2lvblN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5pbmplY3Rpb24uZXh0ZXJuYWxBbGlhc2VzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSArICdcIiguKlxcXFxdLCBmYWN0b3J5XFxcXCk7KSdcbiAgICAgICAgICAgICAgICAgICAgICAgICksIGAkMScke3JlcGxhY2VtZW50fSckMmApXG4gICAgICAgICAgICAgICAgc291cmNlID0gc291cmNlLnJlcGxhY2UobmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgJyhyb290XFxcXFspXCInICtcbiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmNvbnZlcnRUb1ZhbGlkUmVndWxhckV4cHJlc3Npb25TdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWJyYXJ5TmFtZVxuICAgICAgICAgICAgICAgICAgICApICsgJ1wiKFxcXFxdID0gKSdcbiAgICAgICAgICAgICAgICApLCBgJDEnJHtIZWxwZXIuY29udmVydFRvVmFsaWRWYXJpYWJsZU5hbWUobGlicmFyeU5hbWUpfSckMmApXG4gICAgICAgICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW2Fzc2V0UmVxdWVzdF0gPSBuZXcgV2VicGFja1Jhd1NvdXJjZShcbiAgICAgICAgICAgICAgICAgICAgc291cmNlKVxuICAgICAgICAgICAgfVxuICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKTp2b2lkID0+IGNhbGxiYWNrKCkpXG4gICAgfSlcbn19KVxuLy8gLy8vIGVuZHJlZ2lvblxuLy8gLy8vIHJlZ2lvbiBhZGQgYXV0b21hdGljIGltYWdlIGNvbXByZXNzaW9uXG4vLyBOT1RFOiBUaGlzIHBsdWdpbiBzaG91bGQgYmUgbG9hZGVkIGF0IGxhc3QgdG8gZW5zdXJlIHRoYXQgYWxsIGVtaXR0ZWQgaW1hZ2VzXG4vLyByYW4gdGhyb3VnaC5cbnBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyBwbHVnaW5zLkltYWdlbWluKFxuICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci5pbWFnZS5jb250ZW50KSlcbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vIGVuZHJlZ2lvblxuLy8gLyByZWdpb24gbG9hZGVyXG5sZXQgaW1hZ2VMb2FkZXI6c3RyaW5nID0gJ3VybD8nICsgSGVscGVyLmNvbnZlcnRDaXJjdWxhck9iamVjdFRvSlNPTihcbiAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5vcHRpbWl6ZXIuaW1hZ2UuZmlsZSlcbmNvbnN0IGxvYWRlcjp7XG4gICAgcHJlcHJvY2Vzc29yOntcbiAgICAgICAgY2FzY2FkaW5nU3R5bGVTaGVldDpzdHJpbmc7XG4gICAgICAgIGxlc3M6c3RyaW5nO1xuICAgICAgICBzYXNzOnN0cmluZztcbiAgICAgICAgc2NzczpzdHJpbmc7XG4gICAgICAgIGphdmFTY3JpcHQ6c3RyaW5nO1xuICAgICAgICBjb2ZmZWU6c3RyaW5nO1xuICAgICAgICBwdWc6c3RyaW5nO1xuICAgICAgICBsaXRlcmF0ZUNvZmZlZTpzdHJpbmdcbiAgICB9O1xuICAgIGh0bWw6c3RyaW5nO1xuICAgIGNhc2NhZGluZ1N0eWxlU2hlZXQ6c3RyaW5nO1xuICAgIHN0eWxlOnN0cmluZztcbiAgICBwb3N0cHJvY2Vzc29yOntcbiAgICAgICAgaW1hZ2U6c3RyaW5nO1xuICAgICAgICBmb250OntcbiAgICAgICAgICAgIGVvdDpzdHJpbmc7XG4gICAgICAgICAgICB3b2ZmOnN0cmluZztcbiAgICAgICAgICAgIHR0ZjpzdHJpbmc7XG4gICAgICAgICAgICBzdmc6c3RyaW5nXG4gICAgICAgIH07XG4gICAgICAgIGRhdGE6c3RyaW5nXG4gICAgfVxufSA9IHtcbiAgICBwcmVwcm9jZXNzb3I6IHtcbiAgICAgICAgY2FzY2FkaW5nU3R5bGVTaGVldDogJ3Bvc3Rjc3MnLFxuICAgICAgICBqYXZhU2NyaXB0OiAnYmFiZWw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5wcmVwcm9jZXNzb3IubW9kZXJuSmF2YVNjcmlwdCksXG4gICAgICAgIHB1ZzogJ3B1Zz8nICsgSGVscGVyLmNvbnZlcnRDaXJjdWxhck9iamVjdFRvSlNPTihcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLnByZXByb2Nlc3Nvci5wdWcpLFxuICAgICAgICAvLyBUT0RPIGRlcHJlY2F0ZWRcbiAgICAgICAgY29mZmVlOiAnY29mZmVlJyxcbiAgICAgICAgbGl0ZXJhdGVDb2ZmZWU6ICdjb2ZmZWU/bGl0ZXJhdGUnLFxuICAgICAgICBsZXNzOiAnbGVzcz8nICsgSGVscGVyLmNvbnZlcnRDaXJjdWxhck9iamVjdFRvSlNPTihcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLnByZXByb2Nlc3Nvci5sZXNzKSxcbiAgICAgICAgc2FzczogJ3Nhc3M/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5wcmVwcm9jZXNzb3Iuc2FzcyksXG4gICAgICAgIHNjc3M6ICdzYXNzPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUucHJlcHJvY2Vzc29yLnNjc3MpXG4gICAgICAgIC8vXG4gICAgfSxcbiAgICBodG1sOiAnaHRtbD8nICsgSGVscGVyLmNvbnZlcnRDaXJjdWxhck9iamVjdFRvSlNPTihcbiAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUuaHRtbCksXG4gICAgY2FzY2FkaW5nU3R5bGVTaGVldDogJ2Nzcz8nICsgSGVscGVyLmNvbnZlcnRDaXJjdWxhck9iamVjdFRvSlNPTihcbiAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUuY2FzY2FkaW5nU3R5bGVTaGVldCksXG4gICAgc3R5bGU6ICdzdHlsZT8nICsgSGVscGVyLmNvbnZlcnRDaXJjdWxhck9iamVjdFRvSlNPTihcbiAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUuc3R5bGUpLFxuICAgIHBvc3Rwcm9jZXNzb3I6IHtcbiAgICAgICAgaW1hZ2U6IGltYWdlTG9hZGVyLFxuICAgICAgICBmb250OiB7XG4gICAgICAgICAgICBlb3Q6ICd1cmw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmZvbnQuZW90KSxcbiAgICAgICAgICAgIHdvZmY6ICd1cmw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmZvbnQud29mZiksXG4gICAgICAgICAgICB0dGY6ICd1cmw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmZvbnQudHRmKSxcbiAgICAgICAgICAgIHN2ZzogJ3VybD8nICsgSGVscGVyLmNvbnZlcnRDaXJjdWxhck9iamVjdFRvSlNPTihcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5vcHRpbWl6ZXIuZm9udC5zdmcpXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6ICd1cmw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5vcHRpbWl6ZXIuZGF0YSlcbiAgICB9XG59XG4vLyAvIGVuZHJlZ2lvblxuLy8gZW5kcmVnaW9uXG4vLyByZWdpb24gY29uZmlndXJhdGlvblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNvbnRleHQ6IGNvbmZpZ3VyYXRpb24ucGF0aC5jb250ZXh0LFxuICAgIGRlYnVnOiBjb25maWd1cmF0aW9uLmRlYnVnLFxuICAgIGRldnRvb2w6IGNvbmZpZ3VyYXRpb24uZGV2ZWxvcG1lbnQudG9vbCxcbiAgICBkZXZTZXJ2ZXI6IGNvbmZpZ3VyYXRpb24uZGV2ZWxvcG1lbnQuc2VydmVyLFxuICAgIC8vIHJlZ2lvbiBpbnB1dFxuICAgIGVudHJ5OiBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24sIGV4dGVybmFsczogaW5qZWN0aW9uLmV4dGVybmFsLFxuICAgIHJlc29sdmVMb2FkZXI6IHtcbiAgICAgICAgYWxpYXM6IGNvbmZpZ3VyYXRpb24ubG9hZGVyLmFsaWFzZXMsXG4gICAgICAgIGV4dGVuc2lvbnM6IGNvbmZpZ3VyYXRpb24ubG9hZGVyLmV4dGVuc2lvbnMsXG4gICAgICAgIG1vZHVsZXNEaXJlY3RvcmllczogY29uZmlndXJhdGlvbi5sb2FkZXIubW9kdWxlRGlyZWN0b3JpZXNcbiAgICB9LFxuICAgIHJlc29sdmU6IHtcbiAgICAgICAgYWxpYXM6IGNvbmZpZ3VyYXRpb24ubW9kdWxlLmFsaWFzZXMsXG4gICAgICAgIGV4dGVuc2lvbnM6IGNvbmZpZ3VyYXRpb24ua25vd25FeHRlbnNpb25zLFxuICAgICAgICByb290OiBbKGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2U6c3RyaW5nKV1cbiAgICB9LFxuICAgIC8vIGVuZHJlZ2lvblxuICAgIC8vIHJlZ2lvbiBvdXRwdXRcbiAgICBvdXRwdXQ6IHtcbiAgICAgICAgZmlsZW5hbWU6IHBhdGgucmVsYXRpdmUoXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQudGFyZ2V0LFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5maWxlcy5jb21wb3NlLmphdmFTY3JpcHQpLFxuICAgICAgICBoYXNoRnVuY3Rpb246IGNvbmZpZ3VyYXRpb24uaGFzaEFsZ29yaXRobSxcbiAgICAgICAgbGlicmFyeTogbGlicmFyeU5hbWUsXG4gICAgICAgIGxpYnJhcnlUYXJnZXQ6IChcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZ2l2ZW5Db21tYW5kTGluZUFyZ3VtZW50c1syXSA9PT0gJ2J1aWxkRExMJ1xuICAgICAgICApID8gJ3ZhcicgOiBjb25maWd1cmF0aW9uLmV4cG9ydEZvcm1hdC5zZWxmLFxuICAgICAgICBwYXRoOiBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQudGFyZ2V0LFxuICAgICAgICBwdWJsaWNQYXRoOiBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQucHVibGljVGFyZ2V0LFxuICAgICAgICBwYXRoaW5mbzogY29uZmlndXJhdGlvbi5kZWJ1ZyxcbiAgICAgICAgdW1kTmFtZWREZWZpbmU6IHRydWVcbiAgICB9LFxuICAgIHRhcmdldDogY29uZmlndXJhdGlvbi50YXJnZXRUZWNobm9sb2d5LFxuICAgIC8vIGVuZHJlZ2lvblxuICAgIG1vZHVsZToge1xuICAgICAgICBub1BhcnNlOiBjb25maWd1cmF0aW9uLm1vZHVsZS5za2lwUGFyc2VSZWd1bGFyRXhwcmVzc2lvbixcbiAgICAgICAgcHJlTG9hZGVyczogW1xuICAgICAgICAgICAgLy8gQ29udmVydCB0byBuYXRpdmUgd2ViIHR5cGVzLlxuICAgICAgICAgICAgLy8gcmVnaW9uIHNjcmlwdFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5qcyQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogbG9hZGVyLnByZXByb2Nlc3Nvci5qYXZhU2NyaXB0LFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5qYXZhU2NyaXB0XG4gICAgICAgICAgICAgICAgKV0uY29uY2F0KG1vZHVsZUxvY2F0aW9ucy5kaXJlY3RvcnlQYXRocyksXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogKGZpbGVQYXRoOnN0cmluZyk6Ym9vbGVhbiA9PlxuICAgICAgICAgICAgICAgICAgICBIZWxwZXIuaXNGaWxlUGF0aEluTG9jYXRpb24oZmlsZVBhdGgucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIC9eKC4rKSg/OlxcP1teP10qKSQvLCAnJDEnXG4gICAgICAgICAgICAgICAgICAgICksIGNvbmZpZ3VyYXRpb24ucGF0aC5pZ25vcmUpXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLmNvZmZlZSQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogbG9hZGVyLnByZXByb2Nlc3Nvci5jb2ZmZWUsXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogW3BhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LmNvZmZlZVNjcmlwdFxuICAgICAgICAgICAgICAgICldLmNvbmNhdChtb2R1bGVMb2NhdGlvbnMuZGlyZWN0b3J5UGF0aHMpXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLig/OmNvZmZlZVxcLm1kfGxpdGNvZmZlZSkkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wcmVwcm9jZXNzb3IubGl0ZXJhdGVDb2ZmZWUsXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogW3BhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LmNvZmZlZVNjcmlwdFxuICAgICAgICAgICAgICAgICldLmNvbmNhdChtb2R1bGVMb2NhdGlvbnMuZGlyZWN0b3J5UGF0aHMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gZW5kcmVnaW9uXG4gICAgICAgICAgICAvLyByZWdpb24gaHRtbCAodGVtcGxhdGVzKVxuICAgICAgICAgICAgLy8gTk9URTogVGhpcyBlbnN1cmVzIHRoYXQgd2lsbCBiZSB1c2VkIGFzIGEgc3BlY2lhbCBsb2FkZXIgYWxpYXMuXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogbmV3IFJlZ0V4cChIZWxwZXIuY29udmVydFRvVmFsaWRSZWd1bGFyRXhwcmVzc2lvblN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5maWxlcy5kZWZhdWx0SFRNTC50ZW1wbGF0ZS5zdWJzdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmZpbGVzLmRlZmF1bHRIVE1MLnRlbXBsYXRlLmxhc3RJbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICchJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSArIDEpKSksXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBjb25maWd1cmF0aW9uLmZpbGVzLmRlZmF1bHRIVE1MLnRlbXBsYXRlLnN1YnN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgMCwgY29uZmlndXJhdGlvbi5maWxlcy5kZWZhdWx0SFRNTC50ZW1wbGF0ZS5sYXN0SW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICchJykpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5wdWckLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6XG4gICAgICAgICAgICAgICAgICAgIGBmaWxlP25hbWU9JHtjb25maWd1cmF0aW9uLnBhdGguYXNzZXQudGVtcGxhdGV9YCArXG4gICAgICAgICAgICAgICAgICAgIGBbbmFtZV0uaHRtbD8ke2NvbmZpZ3VyYXRpb24uaGFzaEFsZ29yaXRobX09W2hhc2hdIWAgK1xuICAgICAgICAgICAgICAgICAgICBgZXh0cmFjdCEke2xvYWRlci5odG1sfSEke2xvYWRlci5wcmVwcm9jZXNzb3IucHVnfWAsXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogcGF0aC5qb2luKFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQudGVtcGxhdGUpLFxuICAgICAgICAgICAgICAgIGV4Y2x1ZGU6IGNvbmZpZ3VyYXRpb24uZmlsZXMuaHRtbC5jb25jYXQoXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuZGVmYXVsdEhUTUxcbiAgICAgICAgICAgICAgICApLm1hcCgoXG4gICAgICAgICAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uOkhUTUxDb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgICAgKTpzdHJpbmcgPT4gaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZS5sYXN0SW5kZXhPZignIScpICsgMSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgXSxcbiAgICAgICAgbG9hZGVyczogW1xuICAgICAgICAgICAgLy8gTG9hZHMgZGVwZW5kZW5jaWVzLlxuICAgICAgICAgICAgLy8gcmVnaW9uIHN0eWxlXG4gICAgICAgICAgICAvLyBUT0RPIGRlcHJlY2F0ZWRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwubGVzcyQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogcGx1Z2lucy5FeHRyYWN0VGV4dC5leHRyYWN0KFxuICAgICAgICAgICAgICAgICAgICBsb2FkZXIuc3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIGAke2xvYWRlci5jYXNjYWRpbmdTdHlsZVNoZWV0fSEke2xvYWRlci5wcmVwcm9jZXNzb3IubGVzc31gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5zYXNzJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBwbHVnaW5zLkV4dHJhY3RUZXh0LmV4dHJhY3QoXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlci5zdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgYCR7bG9hZGVyLmNhc2NhZGluZ1N0eWxlU2hlZXR9ISR7bG9hZGVyLnByZXByb2Nlc3Nvci5zYXNzfWBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLnNjc3MkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IHBsdWdpbnMuRXh0cmFjdFRleHQuZXh0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVyLnN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBgJHtsb2FkZXIuY2FzY2FkaW5nU3R5bGVTaGVldH0hJHtsb2FkZXIucHJlcHJvY2Vzc29yLnNjc3N9YFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5jc3MkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IHBsdWdpbnMuRXh0cmFjdFRleHQuZXh0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVyLnN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBgJHtsb2FkZXIucHJlcHJvY2Vzc29yLmNhc2NhZGluZ1N0eWxlU2hlZXR9IWAgK1xuICAgICAgICAgICAgICAgICAgICBsb2FkZXIuY2FzY2FkaW5nU3R5bGVTaGVldCksXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogW3BhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LmNhc2NhZGluZ1N0eWxlU2hlZXRcbiAgICAgICAgICAgICAgICApXS5jb25jYXQobW9kdWxlTG9jYXRpb25zLmRpcmVjdG9yeVBhdGhzKSxcbiAgICAgICAgICAgICAgICBleGNsdWRlOiAoZmlsZVBhdGg6c3RyaW5nKTpib29sZWFuID0+XG4gICAgICAgICAgICAgICAgICAgIEhlbHBlci5pc0ZpbGVQYXRoSW5Mb2NhdGlvbihmaWxlUGF0aC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgL14oLispKD86XFw/W14/XSopJC8sICckMSdcbiAgICAgICAgICAgICAgICAgICAgKSwgY29uZmlndXJhdGlvbi5wYXRoLmlnbm9yZSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBodG1sICh0ZW1wbGF0ZXMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLmh0bWwkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6XG4gICAgICAgICAgICAgICAgICAgIGBmaWxlP25hbWU9JHtjb25maWd1cmF0aW9uLnBhdGguYXNzZXQudGVtcGxhdGV9YCArXG4gICAgICAgICAgICAgICAgICAgIGBbbmFtZV0uW2V4dF0/JHtjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG19PVtoYXNoXSFgICtcbiAgICAgICAgICAgICAgICAgICAgYGV4dHJhY3QhJHtsb2FkZXIuaHRtbH1gLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IHBhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICBleGNsdWRlOiBjb25maWd1cmF0aW9uLmZpbGVzLmh0bWwubWFwKChcbiAgICAgICAgICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb246SFRNTENvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICAgICApOnN0cmluZyA9PiBodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZS5zdWJzdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uLnRlbXBsYXRlLmxhc3RJbmRleE9mKCchJykgKyAxKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVuZHJlZ2lvblxuICAgICAgICBdLFxuICAgICAgICBwb3N0TG9hZGVyczogW1xuICAgICAgICAgICAgLy8gT3B0aW1pemUgbG9hZGVkIGFzc2V0cy5cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBmb250XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLmVvdCg/OlxcP3Y9XFxkK1xcLlxcZCtcXC5cXGQrKT8kLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wb3N0cHJvY2Vzc29yLmZvbnQuZW90XG4gICAgICAgICAgICB9LCB7dGVzdDogL1xcLndvZmYyPyQvLCBsb2FkZXI6IGxvYWRlci5wb3N0cHJvY2Vzc29yLmZvbnQud29mZn0sIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwudHRmKD86XFw/dj1cXGQrXFwuXFxkK1xcLlxcZCspPyQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogbG9hZGVyLnBvc3Rwcm9jZXNzb3IuZm9udC50dGZcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuc3ZnKD86XFw/dj1cXGQrXFwuXFxkK1xcLlxcZCspPyQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogbG9hZGVyLnBvc3Rwcm9jZXNzb3IuZm9udC5zdmdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBpbWFnZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC4oPzpwbmd8anBnfGljb3xnaWYpJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBsb2FkZXIucG9zdHByb2Nlc3Nvci5pbWFnZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGVuZHJlZ2lvblxuICAgICAgICAgICAgLy8gcmVnaW9uIGRhdGFcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvLisvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogbG9hZGVyLnBvc3Rwcm9jZXNzb3IuZGF0YSxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5kYXRhKSxcbiAgICAgICAgICAgICAgICBleGNsdWRlOiAoZmlsZVBhdGg6c3RyaW5nKTpib29sZWFuID0+XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ua25vd25FeHRlbnNpb25zLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5leHRuYW1lKGZpbGVQYXRoLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgL14oLispKD86XFw/W14/XSopJC8sICckMScpKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVuZHJlZ2lvblxuICAgICAgICBdXG4gICAgfSxcbiAgICBwb3N0Y3NzOiAoKTpBcnJheTxPYmplY3Q+ID0+IFtcbiAgICAgICAgYXV0b3ByZWZpeGVyLCBwb3N0Y3NzSW1wb3J0KHthZGREZXBlbmRlbmN5VG86IHdlYnBhY2t9KVxuICAgIF0sXG4gICAgaHRtbDogY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmh0bWxNaW5pZmllcixcbiAgICAvLyBMZXQgdGhlIFwiaHRtbC1sb2FkZXJcIiBhY2Nlc3MgZnVsbCBodG1sIG1pbmlmaWVyIHByb2Nlc3NpbmdcbiAgICAvLyBjb25maWd1cmF0aW9uLlxuICAgIHB1ZzogY29uZmlndXJhdGlvbi5tb2R1bGUucHJlcHJvY2Vzc29yLnB1ZyxcbiAgICBwbHVnaW5zOiBwbHVnaW5JbnN0YW5jZXNcbn1cbi8vIGVuZHJlZ2lvblxuLy8gcmVnaW9uIHZpbSBtb2RsaW5lXG4vLyB2aW06IHNldCB0YWJzdG9wPTQgc2hpZnR3aWR0aD00IGV4cGFuZHRhYjpcbi8vIHZpbTogZm9sZG1ldGhvZD1tYXJrZXIgZm9sZG1hcmtlcj1yZWdpb24sZW5kcmVnaW9uOlxuLy8gZW5kcmVnaW9uXG4iXX0=