#!/usr/bin/env node


// -*- coding: utf-8 -*-
'use strict';
/* !
    region header
    Copyright Torben Sickert (info["~at~"]torben.website) 16.12.2012

    License
    -------

    This library written by Torben Sickert stand under a creative commons naming
    3.0 unported license. see http://creativecommons.org/licenses/by/3.0/deed.de
    endregion
*/
// region imports

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _fs = require('fs');

var fileSystem = _interopRequireWildcard(_fs);

var _jsdom = require('jsdom');

var dom = _interopRequireWildcard(_jsdom);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _autoprefixer = require('autoprefixer');

var _autoprefixer2 = _interopRequireDefault(_autoprefixer);

var _postcssImport = require('postcss-import');

var _postcssImport2 = _interopRequireDefault(_postcssImport);

var _rimraf = require('rimraf');

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackSources = require('webpack-sources');

var _configurator = require('./configurator.compiled');

var _configurator2 = _interopRequireDefault(_configurator);

var _helper = require('./helper.compiled');

var _helper2 = _interopRequireDefault(_helper);

var _htmlLoader = require('html-loader');

var _htmlLoader2 = _interopRequireDefault(_htmlLoader);

var _loaderUtils = require('loader-utils');

var _loaderUtils2 = _interopRequireDefault(_loaderUtils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

// NOTE: Only needed for debugging this file.
try {
    require('source-map-support/register');
} catch (error) {}

const plugins = require('webpack-load-plugins')();


plugins.HTML = plugins.html;
plugins.ExtractText = plugins.extractText;
plugins.AddAssetHTMLPlugin = require('add-asset-html-webpack-plugin');
plugins.OpenBrowser = plugins.openBrowser;
plugins.Favicon = require('favicons-webpack-plugin');
plugins.Imagemin = require('imagemin-webpack-plugin').default;
plugins.Offline = require('offline-plugin');

// / region monkey patches
// Monkey-Patch html loader to retrieve html loader options since the
// "webpack-html-plugin" doesn't preserve the original loader interface.

require.cache[require.resolve('html-loader')].exports = function () {
    _helper2.default.extendObject(true, this.options, module, this.options);
    return _htmlLoader2.default.apply(this, arguments);
};
// Monkey-Patch loader-utils to define which url is a local request.

const loaderUtilsIsUrlRequestBackup = _loaderUtils2.default.isUrlRequest;
require.cache[require.resolve('loader-utils')].exports.isUrlRequest = function (url) {
    if (url.match(/^[a-z]+:.+/)) return false;
    return loaderUtilsIsUrlRequestBackup.apply(_loaderUtils2.default, arguments);
};
// / endregion
// endregion
// region initialisation
let libraryName = _configurator2.default.exportFormat.self === 'var' ? _helper2.default.convertToValidVariableName(_configurator2.default.name) : _configurator2.default.name;
if ('libraryName' in _configurator2.default && _configurator2.default.libraryName) libraryName = _configurator2.default.libraryName;
// // region plugins
const pluginInstances = [new _webpack2.default.optimize.OccurrenceOrderPlugin(true)];
// /// region define modules to ignore
for (const ignorePattern of _configurator2.default.injection.ignorePattern) pluginInstances.push(new _webpack2.default.IgnorePlugin(new RegExp(ignorePattern)));
// /// endregion
// /// region generate html file
let htmlAvailable = false;
if (_configurator2.default.givenCommandLineArguments[2] !== 'buildDLL') for (let htmlConfiguration of _configurator2.default.files.html) if (_helper2.default.isFileSync(htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1))) {
    if (htmlConfiguration.template === _configurator2.default.files.defaultHTML.template) htmlConfiguration.template = htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1);
    pluginInstances.push(new plugins.HTML(htmlConfiguration));
    htmlAvailable = true;
}
// /// endregion
// /// region generate favicons
if (htmlAvailable && _configurator2.default.favicon && _helper2.default.isFileSync(_configurator2.default.favicon.logo)) pluginInstances.push(new plugins.Favicon(_configurator2.default.favicon));
// /// endregion
// /// region provide offline functionality
if (htmlAvailable && _configurator2.default.offline) {
    if (!['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2])) {
        if (_configurator2.default.inPlace.cascadingStyleSheet) _configurator2.default.offline.excludes.push(`${ _configurator2.default.path.asset.cascadingStyleSheet }*.css?` + `${ _configurator2.default.hashAlgorithm }=*`);
        if (_configurator2.default.inPlace.javaScript) _configurator2.default.offline.excludes.push(`${ _configurator2.default.path.asset.javaScript }*.js?` + `${ _configurator2.default.hashAlgorithm }=*`);
    }
    pluginInstances.push(new plugins.Offline(_configurator2.default.offline));
}
// /// endregion
// /// region opens browser automatically
if (_configurator2.default.development.openBrowser && htmlAvailable && ['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2])) pluginInstances.push(new plugins.OpenBrowser(_configurator2.default.development.openBrowser));
// /// endregion
// /// region provide build environment
pluginInstances.push(new _webpack2.default.DefinePlugin(_configurator2.default.buildDefinition));
// /// endregion
// /// region modules/assets
const moduleLocations = _helper2.default.determineModuleLocations(_configurator2.default.injection.internal, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, _configurator2.default.path.context, _configurator2.default.path.ignore);
// //// region perform javaScript minification/optimisation
if (_configurator2.default.module.optimizer.uglifyJS) pluginInstances.push(new _webpack2.default.optimize.UglifyJsPlugin(_configurator2.default.module.optimizer.uglifyJS));
// //// endregion
// //// region apply module pattern
pluginInstances.push({ apply: compiler => {
        compiler.plugin('emit', (compilation, callback) => {
            for (const request in compilation.assets) if (compilation.assets.hasOwnProperty(request)) {
                const filePath = request.replace(/\?[^?]+$/, '');
                const type = _helper2.default.determineAssetType(filePath, _configurator2.default.build, _configurator2.default.path);
                if (type && _configurator2.default.assetPattern[type] && !new RegExp(_configurator2.default.assetPattern[type].excludeFilePathRegularExpression).test(filePath)) {
                    const source = compilation.assets[request].source();
                    if (typeof source === 'string') compilation.assets[request] = new _webpackSources.RawSource(_configurator2.default.assetPattern[type].pattern.replace(/\{1\}/g, source.replace(/\$/g, '$$$')));
                }
            }
            callback();
        });
    } });
// //// endregion
// //// region in-place configured assets in the main html file
if (htmlAvailable && !['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2])) pluginInstances.push({ apply: compiler => {
        compiler.plugin('emit', (compilation, callback) => {
            if (_configurator2.default.files.html[0].filename in compilation.assets && (_configurator2.default.inPlace.cascadingStyleSheet || _configurator2.default.inPlace.javaScript)) dom.env(compilation.assets[_configurator2.default.files.html[0].filename].source(), (error, window) => {
                if (_configurator2.default.inPlace.cascadingStyleSheet) {
                    const urlPrefix = _configurator2.default.files.compose.cascadingStyleSheet.replace('[contenthash]', '');
                    const domNode = window.document.querySelector(`link[href^="${ urlPrefix }"]`);
                    if (domNode) {
                        let asset;
                        for (asset in compilation.assets) if (asset.startsWith(urlPrefix)) break;
                        const inPlaceDomNode = window.document.createElement('style');
                        inPlaceDomNode.textContent = compilation.assets[asset].source();
                        domNode.parentNode.insertBefore(inPlaceDomNode, domNode);
                        domNode.parentNode.removeChild(domNode);
                        /*
                            NOTE: This doesn't prevent webpack from
                            creating this file if present in another chunk
                            so removing it (and a potential source map
                            file) later in the "done" hook.
                        */
                        delete compilation.assets[asset];
                    } else console.warn('No referenced cascading style sheet file in' + ' resulting markup found with ' + `selector: link[href^="${ urlPrefix }"]`);
                }
                if (_configurator2.default.inPlace.javaScript) {
                    const urlPrefix = _configurator2.default.files.compose.javaScript.replace('[hash]', '');
                    const domNode = window.document.querySelector(`script[src^="${ urlPrefix }"]`);
                    if (domNode) {
                        let asset;
                        for (asset in compilation.assets) if (asset.startsWith(urlPrefix)) break;
                        domNode.textContent = compilation.assets[asset].source();
                        domNode.removeAttribute('src');
                        /*
                            NOTE: This doesn't prevent webpack from
                            creating this file if present in another chunk
                            so removing it (and a potential source map
                            file) later in the "done" hook.
                        */
                        delete compilation.assets[asset];
                    } else console.warn('No referenced javaScript file in resulting ' + 'markup found with selector: ' + `script[src^="${ urlPrefix }"]`);
                }
                compilation.assets[_configurator2.default.files.html[0].filename] = new _webpackSources.RawSource(compilation.assets[_configurator2.default.files.html[0].filename].source().replace(/^(\s*<!doctype[^>]+?>\s*)[\s\S]*$/i, '$1') + window.document.documentElement.outerHTML);
                callback();
            });else callback();
        });
        compiler.plugin('after-emit', (compilation, callback) => {
            if (_configurator2.default.files.html[0].filename in compilation.assets) {
                if (_configurator2.default.inPlace.cascadingStyleSheet) (0, _rimraf.sync)(_path2.default.join(_configurator2.default.path.asset.target, _configurator2.default.path.asset.cascadingStyleSheet), { glob: false });
                if (_configurator2.default.inPlace.javaScript) {
                    const assetFilePath = _path2.default.join(_configurator2.default.path.asset.target, _configurator2.default.files.compose.javaScript.replace(`?${ _configurator2.default.hashAlgorithm }=[hash]`, ''));
                    for (const filePath of [assetFilePath, `${ assetFilePath }.map`]) if (_helper2.default.isFileSync(filePath)) fileSystem.unlinkSync(filePath);
                    const javaScriptPath = _path2.default.join(_configurator2.default.path.asset.target, _configurator2.default.path.asset.javaScript);
                    if (fileSystem.readdirSync(javaScriptPath).length === 0) fileSystem.rmdirSync(javaScriptPath);
                }
            }
            callback();
        });
    } });
// //// endregion
const injection = _helper2.default.resolveInjection(_configurator2.default.injection, _helper2.default.resolveBuildConfigurationFilePaths(_configurator2.default.build, _configurator2.default.path.asset.source, _configurator2.default.path.context, _configurator2.default.path.ignore), _configurator2.default.testInBrowser.injection.internal, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, _configurator2.default.path.context, _configurator2.default.path.ignore);
const normalizedInternalInjection = _helper2.default.normalizeInternalInjection(injection.internal);
// //// region remove chunks if a corresponding dll package exists
if (_configurator2.default.givenCommandLineArguments[2] !== 'buildDLL') for (const chunkID in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkID) && _configurator2.default.dllManifestFilePaths.includes(`${ _configurator2.default.path.target }${ chunkID }.dll-manifest.json`)) {
    delete normalizedInternalInjection[chunkID];
    // TODO replace all placeholder like "[id]", "[ext]", "[hash]" and
    // everywhere else
    const filePath = _configurator2.default.files.compose.javaScript.replace(/^(.+)(?:\?[^?]*)$/, '$1').replace(/\[name\]/g, chunkID);
    pluginInstances.push(new plugins.AddAssetHTMLPlugin({
        filepath: filePath,
        hash: true,
        includeSourcemap: _helper2.default.isFileSync(`${ filePath }.map`)
    }));
    pluginInstances.push(new _webpack2.default.DllReferencePlugin({
        context: _configurator2.default.path.context, manifest: require(`${ _configurator2.default.path.target }${ chunkID }.dll-manifest.json`)
    }));
}
// //// endregion
// //// region generate common chunks
if (_configurator2.default.givenCommandLineArguments[2] !== 'buildDLL') for (const chunkID of _configurator2.default.injection.commonChunkIDs) if (normalizedInternalInjection.hasOwnProperty(chunkID)) pluginInstances.push(new _webpack2.default.optimize.CommonsChunkPlugin({
    async: false,
    children: false,
    filename: _configurator2.default.files.compose.javaScript,
    minChunks: Infinity,
    name: chunkID,
    minSize: 0
}));
// //// endregion
let javaScriptNeeded = _configurator2.default.debug && ['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2]);
if (!javaScriptNeeded) for (const chunkName in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkName)) for (const moduleID of normalizedInternalInjection[chunkName]) {
    const type = _helper2.default.determineAssetType(_helper2.default.determineModuleFilePath(moduleID, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, _configurator2.default.path.context), _configurator2.default.build, _configurator2.default.path);
    if (type && _configurator2.default.build[type] && _configurator2.default.build[type].outputExtension === 'js') {
        javaScriptNeeded = true;
        break;
    }
}
// //// region mark empty javaScript modules as dummy
if (!javaScriptNeeded) _configurator2.default.files.compose.javaScript = _path2.default.join(_configurator2.default.path.asset.javaScript, '.__dummy__.compiled.js');
// //// endregion
// //// region extract cascading style sheets
pluginInstances.push(new plugins.ExtractText(_configurator2.default.files.compose.cascadingStyleSheet, { allChunks: true, disable: !_configurator2.default.files.compose.cascadingStyleSheet }));
// //// endregion
// //// region performs implicit external logic
if (injection.external === '__implicit__')
    /*
        We only want to process modules from local context in library mode,
        since a concrete project using this library should combine all assets
        (and deduplicate them) for optimal bundling results. NOTE: Only native
        javaScript and json modules will be marked as external dependency.
    */
    injection.external = (context, request, callback) => {
        const filePath = _helper2.default.determineModuleFilePath(request.substring(request.lastIndexOf('!') + 1), _configurator2.default.module.aliases, _configurator2.default.knownExtensions, context);
        if (filePath.endsWith('.js') || filePath.endsWith('.json')) {
            const originalRequest = request;
            // NOTE: We apply alias on externals additionally.
            request = _helper2.default.applyAliases(request.substring(request.lastIndexOf('!') + 1), _configurator2.default.module.aliases);
            const applyExternalRequest = () => {
                if (['var', 'umd'].includes(_configurator2.default.exportFormat.external) && originalRequest in _configurator2.default.injection.externalAliases) request = _configurator2.default.injection.externalAliases[originalRequest];
                if (_configurator2.default.exportFormat.external === 'var') request = _helper2.default.convertToValidVariableName(request, '0-9a-zA-Z_$\\.');
                return callback(null, request, _configurator2.default.exportFormat.external);
            };
            if (_helper2.default.isAnyMatching(request, _configurator2.default.injection.implicitExternalIncludePattern)) return applyExternalRequest();
            if (_helper2.default.isAnyMatching(request, _configurator2.default.injection.implicitExternalExcludePattern)) return callback();
            for (const chunkName in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkName)) for (const moduleID of normalizedInternalInjection[chunkName]) if (_helper2.default.determineModuleFilePath(moduleID, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, context) === filePath) return callback();
            /*
                NOTE: We mark dependencies as external if they does not contain
                a loader in their request and aren't part of the current node
                package.
            */
            if (!_configurator2.default.inPlace.externalLibrary.normal && !(_configurator2.default.inPlace.externalLibrary.shimmed && originalRequest.includes('!')) && (!_path2.default.resolve(filePath).startsWith(_configurator2.default.path.context) || _helper2.default.isFilePathInLocation(filePath, _configurator2.default.path.ignore))) return applyExternalRequest();
        }
        return callback();
    };
// //// endregion
// //// region build dll packages
if (_configurator2.default.givenCommandLineArguments[2] === 'buildDLL') {
    let dllChunkIDExists = false;
    for (const chunkID in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkID)) if (_configurator2.default.injection.dllChunkIDs.includes(chunkID)) dllChunkIDExists = true;else delete normalizedInternalInjection[chunkID];
    if (dllChunkIDExists) {
        libraryName = '[name]DLLPackage';
        pluginInstances.push(new _webpack2.default.DllPlugin({
            path: `${ _configurator2.default.path.target }[name].dll-manifest.json`,
            name: libraryName
        }));
    } else console.warn('No dll chunk id found.');
}
// //// endregion
// /// endregion
// /// region apply final dom/javaScript modifications/fixes
pluginInstances.push({ apply: compiler => {
        compiler.plugin('emit', (compilation, callback) => {
            const promises = [];
            /*
                NOTE: Removing symbols after a "&" in hash string is necessary to
                match the generated request strings in offline plugin.
            */
            for (const htmlConfiguration of _configurator2.default.files.html) if (htmlConfiguration.filename in compilation.assets) promises.push(new Promise((resolve, reject) => dom.env(compilation.assets[htmlConfiguration.filename].source(), (error, window) => {
                if (error) return reject(error);
                const linkables = {
                    script: 'src', link: 'href' };
                for (const tagName in linkables) if (linkables.hasOwnProperty(tagName)) for (const domNode of window.document.querySelectorAll(`${ tagName }[${ linkables[tagName] }*="?` + `${ _configurator2.default.hashAlgorithm }="]`)) domNode.setAttribute(linkables[tagName], domNode.getAttribute(linkables[tagName]).replace(new RegExp(`(\\?${ _configurator2.default.hashAlgorithm }=` + '[^&]+).*$'), '$1'));
                compilation.assets[htmlConfiguration.filename] = new _webpackSources.RawSource(compilation.assets[htmlConfiguration.filename].source().replace(/^(\s*<!doctype[^>]+?>\s*)[\s\S]*$/i, '$1') + window.document.documentElement.outerHTML);
                return resolve(compilation.assets[htmlConfiguration.filename]);
            })));
            if (!_configurator2.default.exportFormat.external.startsWith('umd')) {
                Promise.all(promises).then(() => callback());
                return;
            }
            /*
                NOTE: The umd module export doesn't handle cases where the package
                name doesn't match exported library name. This post processing
                fixes this issue.
            */
            for (const assetRequest in compilation.assets) if (assetRequest.replace(/([^?]+)\?.*$/, '$1').endsWith(_configurator2.default.build.javaScript.outputExtension)) {
                let source = compilation.assets[assetRequest].source();
                for (const replacement in _configurator2.default.injection.externalAliases) if (_configurator2.default.injection.externalAliases.hasOwnProperty(replacement)) source = source.replace(new RegExp('(require\\()"' + _helper2.default.convertToValidRegularExpressionString(_configurator2.default.injection.externalAliases[replacement]) + '"(\\))', 'g'), `$1'${ replacement }'$2`).replace(new RegExp('(define\\("' + _helper2.default.convertToValidRegularExpressionString(libraryName) + '", \\[.*)"' + _helper2.default.convertToValidRegularExpressionString(_configurator2.default.injection.externalAliases[replacement]) + '"(.*\\], factory\\);)'), `$1'${ replacement }'$2`);
                source = source.replace(new RegExp('(root\\[)"' + _helper2.default.convertToValidRegularExpressionString(libraryName) + '"(\\] = )'), `$1'${ _helper2.default.convertToValidVariableName(libraryName) }'$2`);
                compilation.assets[assetRequest] = new _webpackSources.RawSource(source);
            }
            Promise.all(promises).then(() => callback());
        });
    } });
// /// endregion
// /// region add automatic image compression
// NOTE: This plugin should be loaded at last to ensure that all emitted images
// ran through.
pluginInstances.push(new plugins.Imagemin(_configurator2.default.module.optimizer.image.content));
// /// endregion
// // endregion
// / region loader
let imageLoader = 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.image.file);
const loader = {
    preprocessor: {
        cascadingStyleSheet: 'postcss',
        javaScript: 'babel?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.modernJavaScript),
        pug: 'pug?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.pug),
        // TODO deprecated
        coffee: 'coffee',
        literateCoffee: 'coffee?literate',
        less: 'less?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.less),
        sass: 'sass?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.sass),
        scss: 'sass?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.scss)
        //
    },
    html: 'html?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.html),
    cascadingStyleSheet: 'css?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.cascadingStyleSheet),
    style: 'style?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.style),
    postprocessor: {
        image: imageLoader,
        font: {
            eot: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.eot),
            woff: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.woff),
            ttf: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.ttf),
            svg: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.svg)
        },
        data: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.data)
    }
};
// / endregion
// endregion
// region configuration
exports.default = {
    context: _configurator2.default.path.context,
    debug: _configurator2.default.debug,
    devtool: _configurator2.default.development.tool,
    devServer: _configurator2.default.development.server,
    // region input
    entry: normalizedInternalInjection, externals: injection.external,
    resolveLoader: {
        alias: _configurator2.default.loader.aliases,
        extensions: _configurator2.default.loader.extensions,
        modulesDirectories: _configurator2.default.loader.moduleDirectories
    },
    resolve: {
        alias: _configurator2.default.module.aliases,
        extensions: _configurator2.default.knownExtensions,
        root: [_configurator2.default.path.asset.source]
    },
    // endregion
    // region output
    output: {
        filename: _path2.default.relative(_configurator2.default.path.asset.target, _configurator2.default.files.compose.javaScript),
        hashFunction: _configurator2.default.hashAlgorithm,
        library: libraryName,
        libraryTarget: _configurator2.default.givenCommandLineArguments[2] === 'buildDLL' ? 'var' : _configurator2.default.exportFormat.self,
        path: _configurator2.default.path.asset.target,
        publicPath: _configurator2.default.path.asset.publicTarget,
        pathinfo: _configurator2.default.debug,
        umdNamedDefine: true
    },
    target: _configurator2.default.targetTechnology,
    // endregion
    module: {
        noParse: _configurator2.default.module.skipParseRegularExpression,
        preLoaders: [
        // Convert to native web types.
        // region script
        {
            test: /\.js$/,
            loader: loader.preprocessor.javaScript,
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.javaScript)].concat(moduleLocations.directoryPaths),
            exclude: filePath => _helper2.default.isFilePathInLocation(filePath.replace(/^(.+)(?:\?[^?]*)$/, '$1'), _configurator2.default.path.ignore)
        }, {
            test: /\.coffee$/,
            loader: loader.preprocessor.coffee,
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.coffeeScript)].concat(moduleLocations.directoryPaths)
        }, {
            test: /\.(?:coffee\.md|litcoffee)$/,
            loader: loader.preprocessor.literateCoffee,
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.coffeeScript)].concat(moduleLocations.directoryPaths)
        },
        // endregion
        // region html (templates)
        // NOTE: This ensures that will be used as a special loader alias.
        {
            test: new RegExp(_helper2.default.convertToValidRegularExpressionString(_configurator2.default.files.defaultHTML.template.substring(_configurator2.default.files.defaultHTML.template.lastIndexOf('!') + 1))),
            loader: _configurator2.default.files.defaultHTML.template.substring(0, _configurator2.default.files.defaultHTML.template.lastIndexOf('!'))
        }, {
            test: /\.pug$/,
            loader: `file?name=${ _configurator2.default.path.asset.template }` + `[name].html?${ _configurator2.default.hashAlgorithm }=[hash]!` + `extract!${ loader.html }!${ loader.preprocessor.pug }`,
            include: _path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.template),
            exclude: _configurator2.default.files.html.concat(_configurator2.default.files.defaultHTML).map(htmlConfiguration => htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1))
        }
        // endregion
        ],
        loaders: [
        // Loads dependencies.
        // region style
        // TODO deprecated
        {
            test: /\.less$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!${ loader.preprocessor.less }`)
        }, {
            test: /\.sass$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!${ loader.preprocessor.sass }`)
        }, {
            test: /\.scss$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!${ loader.preprocessor.scss }`)
        },
        //
        {
            test: /\.css$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.preprocessor.cascadingStyleSheet }!` + loader.cascadingStyleSheet),
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.cascadingStyleSheet)].concat(moduleLocations.directoryPaths),
            exclude: filePath => _helper2.default.isFilePathInLocation(filePath.replace(/^(.+)(?:\?[^?]*)$/, '$1'), _configurator2.default.path.ignore)
        },
        // endregion
        // region html (templates)
        {
            test: /\.html$/,
            loader: `file?name=${ _configurator2.default.path.asset.template }` + `[name].[ext]?${ _configurator2.default.hashAlgorithm }=[hash]!` + `extract!${ loader.html }`,
            include: _path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.template),
            exclude: _configurator2.default.files.html.map(htmlConfiguration => htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1))
        }
        // endregion
        ],
        postLoaders: [
        // Optimize loaded assets.
        // region font
        {
            test: /\.eot(?:\?v=\d+\.\d+\.\d+)?$/,
            loader: loader.postprocessor.font.eot
        }, { test: /\.woff2?$/, loader: loader.postprocessor.font.woff }, {
            test: /\.ttf(?:\?v=\d+\.\d+\.\d+)?$/,
            loader: loader.postprocessor.font.ttf
        }, {
            test: /\.svg(?:\?v=\d+\.\d+\.\d+)?$/,
            loader: loader.postprocessor.font.svg
        },
        // endregion
        // region image
        {
            test: /\.(?:png|jpg|ico|gif)$/,
            loader: loader.postprocessor.image
        },
        // endregion
        // region data
        {
            test: /.+/,
            loader: loader.postprocessor.data,
            include: _path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.data),
            exclude: filePath => _configurator2.default.knownExtensions.includes(_path2.default.extname(filePath.replace(/^(.+)(?:\?[^?]*)$/, '$1')))
        }
        // endregion
        ]
    },
    postcss: () => [_autoprefixer2.default, (0, _postcssImport2.default)({ addDependencyTo: _webpack2.default })],
    html: _configurator2.default.module.optimizer.htmlMinifier,
    // Let the "html-loader" access full html minifier processing
    // configuration.
    pug: _configurator2.default.module.preprocessor.pug,
    plugins: pluginInstances
};
// endregion
// region vim modline
// vim: set tabstop=4 shiftwidth=4 expandtab:
// vim: foldmethod=marker foldmarker=region,endregion:
// endregion

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2tDb25maWd1cmF0b3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBV0E7Ozs7OztBQUNBOztJQUFZLFU7O0FBQ1o7O0lBQVksRzs7QUFDWjs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFLQTs7OztBQUVBOztBQWNBOzs7O0FBQ0E7Ozs7QUFLQTs7OztBQU1BOzs7Ozs7OztBQWhDQTtBQUNBLElBQUk7QUFDQSxZQUFRLDZCQUFSO0FBQ0gsQ0FGRCxDQUVFLE9BQU8sS0FBUCxFQUFjLENBQUU7O0FBRWxCLE1BQU0sVUFBVSxRQUFRLHNCQUFSLEdBQWhCOzs7QUFHQSxRQUFRLElBQVIsR0FBZSxRQUFRLElBQXZCO0FBQ0EsUUFBUSxXQUFSLEdBQXNCLFFBQVEsV0FBOUI7QUFDQSxRQUFRLGtCQUFSLEdBQTZCLFFBQVEsK0JBQVIsQ0FBN0I7QUFDQSxRQUFRLFdBQVIsR0FBc0IsUUFBUSxXQUE5QjtBQUNBLFFBQVEsT0FBUixHQUFrQixRQUFRLHlCQUFSLENBQWxCO0FBQ0EsUUFBUSxRQUFSLEdBQW1CLFFBQVEseUJBQVIsRUFBbUMsT0FBdEQ7QUFDQSxRQUFRLE9BQVIsR0FBa0IsUUFBUSxnQkFBUixDQUFsQjs7QUFTQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxLQUFSLENBQWMsUUFBUSxPQUFSLENBQWdCLGFBQWhCLENBQWQsRUFBOEMsT0FBOUMsR0FBd0QsWUFBZTtBQUNuRSxxQkFBTyxZQUFQLENBQW9CLElBQXBCLEVBQTBCLEtBQUssT0FBL0IsRUFBd0MsTUFBeEMsRUFBZ0QsS0FBSyxPQUFyRDtBQUNBLFdBQU8scUJBQXVCLEtBQXZCLENBQTZCLElBQTdCLEVBQW1DLFNBQW5DLENBQVA7QUFDSCxDQUhEO0FBSUE7O0FBRUEsTUFBTSxnQ0FDRixzQkFBd0IsWUFENUI7QUFFQSxRQUFRLEtBQVIsQ0FBYyxRQUFRLE9BQVIsQ0FBZ0IsY0FBaEIsQ0FBZCxFQUErQyxPQUEvQyxDQUF1RCxZ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QUwsQ0FBYSxTQUFTLE9BQVQsQ0FDVCxtQkFEUyxFQUNZLElBRFosQ0FBYixDQURKO0FBUFI7QUFXQTtBQWhDUztBQXZIVCxLQW5DRztBQTZMWCxhQUFTLE1BQW9CLHlCQUNYLDZCQUFjLEVBQUMsa0NBQUQsRUFBZCxDQURXLENBN0xsQjtBQWdNWCxVQUFNLHVCQUFjLE1BQWQsQ0FBcUIsU0FBckIsQ0FBK0IsWUFoTTFCO0FBaU1YO0FBQ0E7QUFDQSxTQUFLLHVCQUFjLE1BQWQsQ0FBcUIsWUFBckIsQ0FBa0MsR0FuTTVCO0FBb01YLGFBQVM7QUFwTUUsQztBQXNNZjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IndlYnBhY2tDb25maWd1cmF0b3IuY29tcGlsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIjIS91c3IvYmluL2VudiBub2RlXG4vLyBAZmxvd1xuLy8gLSotIGNvZGluZzogdXRmLTggLSotXG4ndXNlIHN0cmljdCdcbi8qICFcbiAgICByZWdpb24gaGVhZGVyXG4gICAgQ29weXJpZ2h0IFRvcmJlbiBTaWNrZXJ0IChpbmZvW1wifmF0flwiXXRvcmJlbi53ZWJzaXRlKSAxNi4xMi4yMDEyXG5cbiAgICBMaWNlbnNlXG4gICAgLS0tLS0tLVxuXG4gICAgVGhpcyBsaWJyYXJ5IHdyaXR0ZW4gYnkgVG9yYmVuIFNpY2tlcnQgc3RhbmQgdW5kZXIgYSBjcmVhdGl2ZSBjb21tb25zIG5hbWluZ1xuICAgIDMuMCB1bnBvcnRlZCBsaWNlbnNlLiBzZWUgaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnkvMy4wL2RlZWQuZGVcbiAgICBlbmRyZWdpb25cbiovXG4vLyByZWdpb24gaW1wb3J0c1xuaW1wb3J0ICogYXMgZmlsZVN5c3RlbSBmcm9tICdmcydcbmltcG9ydCAqIGFzIGRvbSBmcm9tICdqc2RvbSdcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5cbmltcG9ydCBhdXRvcHJlZml4ZXIgZnJvbSAnYXV0b3ByZWZpeGVyJ1xuaW1wb3J0IHBvc3Rjc3NJbXBvcnQgZnJvbSAncG9zdGNzcy1pbXBvcnQnXG5pbXBvcnQge3N5bmMgYXMgcmVtb3ZlRGlyZWN0b3J5UmVjdXJzaXZlbHlTeW5jfSBmcm9tICdyaW1yYWYnXG4vLyBOT1RFOiBPbmx5IG5lZWRlZCBmb3IgZGVidWdnaW5nIHRoaXMgZmlsZS5cbnRyeSB7XG4gICAgcmVxdWlyZSgnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJylcbn0gY2F0Y2ggKGVycm9yKSB7fVxuaW1wb3J0IHdlYnBhY2sgZnJvbSAnd2VicGFjaydcbmNvbnN0IHBsdWdpbnMgPSByZXF1aXJlKCd3ZWJwYWNrLWxvYWQtcGx1Z2lucycpKClcbmltcG9ydCB7UmF3U291cmNlIGFzIFdlYnBhY2tSYXdTb3VyY2V9IGZyb20gJ3dlYnBhY2stc291cmNlcydcblxucGx1Z2lucy5IVE1MID0gcGx1Z2lucy5odG1sXG5wbHVnaW5zLkV4dHJhY3RUZXh0ID0gcGx1Z2lucy5leHRyYWN0VGV4dFxucGx1Z2lucy5BZGRBc3NldEhUTUxQbHVnaW4gPSByZXF1aXJlKCdhZGQtYXNzZXQtaHRtbC13ZWJwYWNrLXBsdWdpbicpXG5wbHVnaW5zLk9wZW5Ccm93c2VyID0gcGx1Z2lucy5vcGVuQnJvd3NlclxucGx1Z2lucy5GYXZpY29uID0gcmVxdWlyZSgnZmF2aWNvbnMtd2VicGFjay1wbHVnaW4nKVxucGx1Z2lucy5JbWFnZW1pbiA9IHJlcXVpcmUoJ2ltYWdlbWluLXdlYnBhY2stcGx1Z2luJykuZGVmYXVsdFxucGx1Z2lucy5PZmZsaW5lID0gcmVxdWlyZSgnb2ZmbGluZS1wbHVnaW4nKVxuXG5pbXBvcnQgdHlwZSB7XG4gICAgRG9tTm9kZSwgSFRNTENvbmZpZ3VyYXRpb24sIEluamVjdGlvbiwgTm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uLFxuICAgIFByb2NlZHVyZUZ1bmN0aW9uLCBQcm9taXNlQ2FsbGJhY2tGdW5jdGlvbiwgV2luZG93XG59IGZyb20gJy4vdHlwZSdcbmltcG9ydCBjb25maWd1cmF0aW9uIGZyb20gJy4vY29uZmlndXJhdG9yLmNvbXBpbGVkJ1xuaW1wb3J0IEhlbHBlciBmcm9tICcuL2hlbHBlci5jb21waWxlZCdcblxuLy8gLyByZWdpb24gbW9ua2V5IHBhdGNoZXNcbi8vIE1vbmtleS1QYXRjaCBodG1sIGxvYWRlciB0byByZXRyaWV2ZSBodG1sIGxvYWRlciBvcHRpb25zIHNpbmNlIHRoZVxuLy8gXCJ3ZWJwYWNrLWh0bWwtcGx1Z2luXCIgZG9lc24ndCBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgbG9hZGVyIGludGVyZmFjZS5cbmltcG9ydCBodG1sTG9hZGVyTW9kdWxlQmFja3VwIGZyb20gJ2h0bWwtbG9hZGVyJ1xucmVxdWlyZS5jYWNoZVtyZXF1aXJlLnJlc29sdmUoJ2h0bWwtbG9hZGVyJyldLmV4cG9ydHMgPSBmdW5jdGlvbigpOmFueSB7XG4gICAgSGVscGVyLmV4dGVuZE9iamVjdCh0cnVlLCB0aGlzLm9wdGlvbnMsIG1vZHVsZSwgdGhpcy5vcHRpb25zKVxuICAgIHJldHVybiBodG1sTG9hZGVyTW9kdWxlQmFja3VwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cbi8vIE1vbmtleS1QYXRjaCBsb2FkZXItdXRpbHMgdG8gZGVmaW5lIHdoaWNoIHVybCBpcyBhIGxvY2FsIHJlcXVlc3QuXG5pbXBvcnQgbG9hZGVyVXRpbHNNb2R1bGVCYWNrdXAgZnJvbSAnbG9hZGVyLXV0aWxzJ1xuY29uc3QgbG9hZGVyVXRpbHNJc1VybFJlcXVlc3RCYWNrdXA6KHVybDpzdHJpbmcpID0+IGJvb2xlYW4gPVxuICAgIGxvYWRlclV0aWxzTW9kdWxlQmFja3VwLmlzVXJsUmVxdWVzdFxucmVxdWlyZS5jYWNoZVtyZXF1aXJlLnJlc29sdmUoJ2xvYWRlci11dGlscycpXS5leHBvcnRzLmlzVXJsUmVxdWVzdCA9IGZ1bmN0aW9uKFxuICAgIHVybDpzdHJpbmdcbik6Ym9vbGVhbiB7XG4gICAgaWYgKHVybC5tYXRjaCgvXlthLXpdKzouKy8pKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gbG9hZGVyVXRpbHNJc1VybFJlcXVlc3RCYWNrdXAuYXBwbHkoXG4gICAgICAgIGxvYWRlclV0aWxzTW9kdWxlQmFja3VwLCBhcmd1bWVudHMpXG59XG4vLyAvIGVuZHJlZ2lvblxuLy8gZW5kcmVnaW9uXG4vLyByZWdpb24gaW5pdGlhbGlzYXRpb25cbmxldCBsaWJyYXJ5TmFtZTpzdHJpbmcgPSBjb25maWd1cmF0aW9uLmV4cG9ydEZvcm1hdC5zZWxmID09PSAndmFyJyA/XG4gICAgSGVscGVyLmNvbnZlcnRUb1ZhbGlkVmFyaWFibGVOYW1lKGNvbmZpZ3VyYXRpb24ubmFtZSkgOiBjb25maWd1cmF0aW9uLm5hbWVcbmlmICgnbGlicmFyeU5hbWUnIGluIGNvbmZpZ3VyYXRpb24gJiYgY29uZmlndXJhdGlvbi5saWJyYXJ5TmFtZSlcbiAgICBsaWJyYXJ5TmFtZSA9IGNvbmZpZ3VyYXRpb24ubGlicmFyeU5hbWVcbi8vIC8vIHJlZ2lvbiBwbHVnaW5zXG5jb25zdCBwbHVnaW5JbnN0YW5jZXM6QXJyYXk8T2JqZWN0PiA9IFtcbiAgICBuZXcgd2VicGFjay5vcHRpbWl6ZS5PY2N1cnJlbmNlT3JkZXJQbHVnaW4odHJ1ZSldXG4vLyAvLy8gcmVnaW9uIGRlZmluZSBtb2R1bGVzIHRvIGlnbm9yZVxuZm9yIChjb25zdCBpZ25vcmVQYXR0ZXJuOnN0cmluZyBvZiBjb25maWd1cmF0aW9uLmluamVjdGlvbi5pZ25vcmVQYXR0ZXJuKVxuICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyB3ZWJwYWNrLklnbm9yZVBsdWdpbihuZXcgUmVnRXhwKGlnbm9yZVBhdHRlcm4pKSlcbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gZ2VuZXJhdGUgaHRtbCBmaWxlXG5sZXQgaHRtbEF2YWlsYWJsZTpib29sZWFuID0gZmFsc2VcbmlmIChjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl0gIT09ICdidWlsZERMTCcpXG4gICAgZm9yIChsZXQgaHRtbENvbmZpZ3VyYXRpb246SFRNTENvbmZpZ3VyYXRpb24gb2YgY29uZmlndXJhdGlvbi5maWxlcy5odG1sKVxuICAgICAgICBpZiAoSGVscGVyLmlzRmlsZVN5bmMoaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUuc3Vic3RyaW5nKFxuICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUubGFzdEluZGV4T2YoJyEnKSArIDFcbiAgICAgICAgKSkpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZSA9PT1cbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmZpbGVzLmRlZmF1bHRIVE1MLnRlbXBsYXRlXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUgPVxuICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZS5zdWJzdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZS5sYXN0SW5kZXhPZignIScpICsgMSlcbiAgICAgICAgICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyBwbHVnaW5zLkhUTUwoaHRtbENvbmZpZ3VyYXRpb24pKVxuICAgICAgICAgICAgaHRtbEF2YWlsYWJsZSA9IHRydWVcbiAgICAgICAgfVxuLy8gLy8vIGVuZHJlZ2lvblxuLy8gLy8vIHJlZ2lvbiBnZW5lcmF0ZSBmYXZpY29uc1xuaWYgKGh0bWxBdmFpbGFibGUgJiYgY29uZmlndXJhdGlvbi5mYXZpY29uICYmIEhlbHBlci5pc0ZpbGVTeW5jKFxuICAgIGNvbmZpZ3VyYXRpb24uZmF2aWNvbi5sb2dvXG4pKVxuICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyBwbHVnaW5zLkZhdmljb24oY29uZmlndXJhdGlvbi5mYXZpY29uKSlcbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gcHJvdmlkZSBvZmZsaW5lIGZ1bmN0aW9uYWxpdHlcbmlmIChodG1sQXZhaWxhYmxlICYmIGNvbmZpZ3VyYXRpb24ub2ZmbGluZSkge1xuICAgIGlmICghWydzZXJ2ZScsICd0ZXN0SW5Ccm93c2VyJ10uaW5jbHVkZXMoXG4gICAgICAgIGNvbmZpZ3VyYXRpb24uZ2l2ZW5Db21tYW5kTGluZUFyZ3VtZW50c1syXVxuICAgICkpIHtcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uaW5QbGFjZS5jYXNjYWRpbmdTdHlsZVNoZWV0KVxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5vZmZsaW5lLmV4Y2x1ZGVzLnB1c2goXG4gICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LmNhc2NhZGluZ1N0eWxlU2hlZXR9Ki5jc3M/YCArXG4gICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5oYXNoQWxnb3JpdGhtfT0qYClcbiAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uaW5QbGFjZS5qYXZhU2NyaXB0KVxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5vZmZsaW5lLmV4Y2x1ZGVzLnB1c2goXG4gICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LmphdmFTY3JpcHR9Ki5qcz9gICtcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG19PSpgKVxuICAgIH1cbiAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgcGx1Z2lucy5PZmZsaW5lKGNvbmZpZ3VyYXRpb24ub2ZmbGluZSkpXG59XG4vLyAvLy8gZW5kcmVnaW9uXG4vLyAvLy8gcmVnaW9uIG9wZW5zIGJyb3dzZXIgYXV0b21hdGljYWxseVxuaWYgKGNvbmZpZ3VyYXRpb24uZGV2ZWxvcG1lbnQub3BlbkJyb3dzZXIgJiYgKGh0bWxBdmFpbGFibGUgJiYgW1xuICAgICdzZXJ2ZScsICd0ZXN0SW5Ccm93c2VyJ1xuXS5pbmNsdWRlcyhjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl0pKSlcbiAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgcGx1Z2lucy5PcGVuQnJvd3NlcihcbiAgICAgICAgY29uZmlndXJhdGlvbi5kZXZlbG9wbWVudC5vcGVuQnJvd3NlcikpXG4vLyAvLy8gZW5kcmVnaW9uXG4vLyAvLy8gcmVnaW9uIHByb3ZpZGUgYnVpbGQgZW52aXJvbm1lbnRcbnBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyB3ZWJwYWNrLkRlZmluZVBsdWdpbihjb25maWd1cmF0aW9uLmJ1aWxkRGVmaW5pdGlvbikpXG4vLyAvLy8gZW5kcmVnaW9uXG4vLyAvLy8gcmVnaW9uIG1vZHVsZXMvYXNzZXRzXG5jb25zdCBtb2R1bGVMb2NhdGlvbnM6e1trZXk6c3RyaW5nXTpBcnJheTxzdHJpbmc+fSA9XG4gICAgSGVscGVyLmRldGVybWluZU1vZHVsZUxvY2F0aW9ucyhcbiAgICAgICAgY29uZmlndXJhdGlvbi5pbmplY3Rpb24uaW50ZXJuYWwsIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmFsaWFzZXMsXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ua25vd25FeHRlbnNpb25zLCBjb25maWd1cmF0aW9uLnBhdGguY29udGV4dCxcbiAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmlnbm9yZSlcbi8vIC8vLy8gcmVnaW9uIHBlcmZvcm0gamF2YVNjcmlwdCBtaW5pZmljYXRpb24vb3B0aW1pc2F0aW9uXG5pZiAoY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLnVnbGlmeUpTKVxuICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyB3ZWJwYWNrLm9wdGltaXplLlVnbGlmeUpzUGx1Z2luKFxuICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5vcHRpbWl6ZXIudWdsaWZ5SlMpKVxuLy8gLy8vLyBlbmRyZWdpb25cbi8vIC8vLy8gcmVnaW9uIGFwcGx5IG1vZHVsZSBwYXR0ZXJuXG5wbHVnaW5JbnN0YW5jZXMucHVzaCh7YXBwbHk6IChjb21waWxlcjpPYmplY3QpOnZvaWQgPT4ge1xuICAgIGNvbXBpbGVyLnBsdWdpbignZW1pdCcsIChcbiAgICAgICAgY29tcGlsYXRpb246T2JqZWN0LCBjYWxsYmFjazpQcm9jZWR1cmVGdW5jdGlvblxuICAgICk6dm9pZCA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgcmVxdWVzdDpzdHJpbmcgaW4gY29tcGlsYXRpb24uYXNzZXRzKVxuICAgICAgICAgICAgaWYgKGNvbXBpbGF0aW9uLmFzc2V0cy5oYXNPd25Qcm9wZXJ0eShyZXF1ZXN0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoOnN0cmluZyA9IHJlcXVlc3QucmVwbGFjZSgvXFw/W14/XSskLywgJycpXG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZTo/c3RyaW5nID0gSGVscGVyLmRldGVybWluZUFzc2V0VHlwZShcbiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGgsIGNvbmZpZ3VyYXRpb24uYnVpbGQsIGNvbmZpZ3VyYXRpb24ucGF0aClcbiAgICAgICAgICAgICAgICBpZiAodHlwZSAmJiBjb25maWd1cmF0aW9uLmFzc2V0UGF0dGVyblt0eXBlXSAmJiAhKG5ldyBSZWdFeHAoXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uYXNzZXRQYXR0ZXJuW3R5cGVdXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXhjbHVkZUZpbGVQYXRoUmVndWxhckV4cHJlc3Npb25cbiAgICAgICAgICAgICAgICApKS50ZXN0KGZpbGVQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2U6P3N0cmluZyA9IGNvbXBpbGF0aW9uLmFzc2V0c1tyZXF1ZXN0XS5zb3VyY2UoKVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21waWxhdGlvbi5hc3NldHNbcmVxdWVzdF0gPSBuZXcgV2VicGFja1Jhd1NvdXJjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmFzc2V0UGF0dGVyblt0eXBlXS5wYXR0ZXJuLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9cXHsxXFx9L2csIHNvdXJjZS5yZXBsYWNlKC9cXCQvZywgJyQkJCcpKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKClcbiAgICB9KVxufX0pXG4vLyAvLy8vIGVuZHJlZ2lvblxuLy8gLy8vLyByZWdpb24gaW4tcGxhY2UgY29uZmlndXJlZCBhc3NldHMgaW4gdGhlIG1haW4gaHRtbCBmaWxlXG5pZiAoaHRtbEF2YWlsYWJsZSAmJiAhWydzZXJ2ZScsICd0ZXN0SW5Ccm93c2VyJ10uaW5jbHVkZXMoXG4gICAgY29uZmlndXJhdGlvbi5naXZlbkNvbW1hbmRMaW5lQXJndW1lbnRzWzJdXG4pKVxuICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKHthcHBseTogKGNvbXBpbGVyOk9iamVjdCk6dm9pZCA9PiB7XG4gICAgICAgIGNvbXBpbGVyLnBsdWdpbignZW1pdCcsIChcbiAgICAgICAgICAgIGNvbXBpbGF0aW9uOk9iamVjdCwgY2FsbGJhY2s6UHJvY2VkdXJlRnVuY3Rpb25cbiAgICAgICAgKTp2b2lkID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLmZpbGVzLmh0bWxbMF0uZmlsZW5hbWUgaW4gY29tcGlsYXRpb24uYXNzZXRzICYmIChcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmluUGxhY2UuY2FzY2FkaW5nU3R5bGVTaGVldCB8fFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uaW5QbGFjZS5qYXZhU2NyaXB0XG4gICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgIGRvbS5lbnYoY29tcGlsYXRpb24uYXNzZXRzW2NvbmZpZ3VyYXRpb24uZmlsZXMuaHRtbFtcbiAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgIF0uZmlsZW5hbWVdLnNvdXJjZSgpLCAoZXJyb3I6P0Vycm9yLCB3aW5kb3c6T2JqZWN0KTp2b2lkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uaW5QbGFjZS5jYXNjYWRpbmdTdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmxQcmVmaXg6c3RyaW5nID0gY29uZmlndXJhdGlvbi5maWxlcy5jb21wb3NlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhc2NhZGluZ1N0eWxlU2hlZXQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1tjb250ZW50aGFzaF0nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvbU5vZGU6RG9tTm9kZSA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBsaW5rW2hyZWZePVwiJHt1cmxQcmVmaXh9XCJdYClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb21Ob2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFzc2V0OnN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYXNzZXQgaW4gY29tcGlsYXRpb24uYXNzZXRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXNzZXQuc3RhcnRzV2l0aCh1cmxQcmVmaXgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpblBsYWNlRG9tTm9kZTpEb21Ob2RlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpblBsYWNlRG9tTm9kZS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBpbGF0aW9uLmFzc2V0c1thc3NldF0uc291cmNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Ob2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpblBsYWNlRG9tTm9kZSwgZG9tTm9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Ob2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZG9tTm9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT1RFOiBUaGlzIGRvZXNuJ3QgcHJldmVudCB3ZWJwYWNrIGZyb21cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRpbmcgdGhpcyBmaWxlIGlmIHByZXNlbnQgaW4gYW5vdGhlciBjaHVua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbyByZW1vdmluZyBpdCAoYW5kIGEgcG90ZW50aWFsIHNvdXJjZSBtYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSkgbGF0ZXIgaW4gdGhlIFwiZG9uZVwiIGhvb2suXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29tcGlsYXRpb24uYXNzZXRzW2Fzc2V0XVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm8gcmVmZXJlbmNlZCBjYXNjYWRpbmcgc3R5bGUgc2hlZXQgZmlsZSBpbicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHJlc3VsdGluZyBtYXJrdXAgZm91bmQgd2l0aCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYHNlbGVjdG9yOiBsaW5rW2hyZWZePVwiJHt1cmxQcmVmaXh9XCJdYClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5pblBsYWNlLmphdmFTY3JpcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybFByZWZpeDpzdHJpbmcgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZS5qYXZhU2NyaXB0LnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdbaGFzaF0nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvbU5vZGU6RG9tTm9kZSA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBzY3JpcHRbc3JjXj1cIiR7dXJsUHJlZml4fVwiXWApXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9tTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhc3NldDpzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGFzc2V0IGluIGNvbXBpbGF0aW9uLmFzc2V0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0LnN0YXJ0c1dpdGgodXJsUHJlZml4KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tTm9kZS50ZXh0Q29udGVudCA9IGNvbXBpbGF0aW9uLmFzc2V0c1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnNvdXJjZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tTm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9URTogVGhpcyBkb2Vzbid0IHByZXZlbnQgd2VicGFjayBmcm9tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0aW5nIHRoaXMgZmlsZSBpZiBwcmVzZW50IGluIGFub3RoZXIgY2h1bmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc28gcmVtb3ZpbmcgaXQgKGFuZCBhIHBvdGVudGlhbCBzb3VyY2UgbWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUpIGxhdGVyIGluIHRoZSBcImRvbmVcIiBob29rLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbXBpbGF0aW9uLmFzc2V0c1thc3NldF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vIHJlZmVyZW5jZWQgamF2YVNjcmlwdCBmaWxlIGluIHJlc3VsdGluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcmt1cCBmb3VuZCB3aXRoIHNlbGVjdG9yOiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYHNjcmlwdFtzcmNePVwiJHt1cmxQcmVmaXh9XCJdYClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb21waWxhdGlvbi5hc3NldHNbY29uZmlndXJhdGlvbi5maWxlcy5odG1sW1xuICAgICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICBdLmZpbGVuYW1lXSA9IG5ldyBXZWJwYWNrUmF3U291cmNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW2NvbmZpZ3VyYXRpb24uZmlsZXMuaHRtbFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmZpbGVuYW1lXS5zb3VyY2UoKS5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9eKFxccyo8IWRvY3R5cGVbXj5dKz8+XFxzKilbXFxzXFxTXSokL2ksICckMSdcbiAgICAgICAgICAgICAgICAgICAgICAgICkgKyB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTClcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICB9KVxuICAgICAgICBjb21waWxlci5wbHVnaW4oJ2FmdGVyLWVtaXQnLCAoXG4gICAgICAgICAgICBjb21waWxhdGlvbjpPYmplY3QsIGNhbGxiYWNrOlByb2NlZHVyZUZ1bmN0aW9uXG4gICAgICAgICk6dm9pZCA9PiB7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5maWxlcy5odG1sWzBdLmZpbGVuYW1lIGluIGNvbXBpbGF0aW9uLmFzc2V0cykge1xuICAgICAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLmluUGxhY2UuY2FzY2FkaW5nU3R5bGVTaGVldClcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRGlyZWN0b3J5UmVjdXJzaXZlbHlTeW5jKHBhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuY2FzY2FkaW5nU3R5bGVTaGVldFxuICAgICAgICAgICAgICAgICAgICApLCB7Z2xvYjogZmFsc2V9KVxuICAgICAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLmluUGxhY2UuamF2YVNjcmlwdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NldEZpbGVQYXRoID0gcGF0aC5qb2luKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZS5qYXZhU2NyaXB0LnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYD8ke2NvbmZpZ3VyYXRpb24uaGFzaEFsZ29yaXRobX09W2hhc2hdYCwgJycpKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGVQYXRoOnN0cmluZyBvZiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldEZpbGVQYXRoLCBgJHthc3NldEZpbGVQYXRofS5tYXBgXG4gICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoSGVscGVyLmlzRmlsZVN5bmMoZmlsZVBhdGgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVTeXN0ZW0udW5saW5rU3luYyhmaWxlUGF0aClcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgamF2YVNjcmlwdFBhdGg6c3RyaW5nID0gcGF0aC5qb2luKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5qYXZhU2NyaXB0KVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZVN5c3RlbS5yZWFkZGlyU3luYyhqYXZhU2NyaXB0UGF0aCkubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVN5c3RlbS5ybWRpclN5bmMoamF2YVNjcmlwdFBhdGgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKVxuICAgICAgICB9KVxuICAgIH19KVxuLy8gLy8vLyBlbmRyZWdpb25cbmNvbnN0IGluamVjdGlvbjpJbmplY3Rpb24gPSBIZWxwZXIucmVzb2x2ZUluamVjdGlvbihcbiAgICBjb25maWd1cmF0aW9uLmluamVjdGlvbiwgSGVscGVyLnJlc29sdmVCdWlsZENvbmZpZ3VyYXRpb25GaWxlUGF0aHMoXG4gICAgICAgIGNvbmZpZ3VyYXRpb24uYnVpbGQsIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5jb250ZXh0LCBjb25maWd1cmF0aW9uLnBhdGguaWdub3JlXG4gICAgKSwgY29uZmlndXJhdGlvbi50ZXN0SW5Ccm93c2VyLmluamVjdGlvbi5pbnRlcm5hbCxcbiAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5hbGlhc2VzLCBjb25maWd1cmF0aW9uLmtub3duRXh0ZW5zaW9ucyxcbiAgICBjb25maWd1cmF0aW9uLnBhdGguY29udGV4dCwgY29uZmlndXJhdGlvbi5wYXRoLmlnbm9yZSlcbmNvbnN0IG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbjpOb3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24gPVxuICAgIEhlbHBlci5ub3JtYWxpemVJbnRlcm5hbEluamVjdGlvbihpbmplY3Rpb24uaW50ZXJuYWwpXG4vLyAvLy8vIHJlZ2lvbiByZW1vdmUgY2h1bmtzIGlmIGEgY29ycmVzcG9uZGluZyBkbGwgcGFja2FnZSBleGlzdHNcbmlmIChjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl0gIT09ICdidWlsZERMTCcpXG4gICAgZm9yIChjb25zdCBjaHVua0lEOnN0cmluZyBpbiBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24pXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbi5oYXNPd25Qcm9wZXJ0eShjaHVua0lEKSAmJlxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5kbGxNYW5pZmVzdEZpbGVQYXRocy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uLnBhdGgudGFyZ2V0fSR7Y2h1bmtJRH0uZGxsLW1hbmlmZXN0Lmpzb25gKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGRlbGV0ZSBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb25bY2h1bmtJRF1cbiAgICAgICAgICAgIC8vIFRPRE8gcmVwbGFjZSBhbGwgcGxhY2Vob2xkZXIgbGlrZSBcIltpZF1cIiwgXCJbZXh0XVwiLCBcIltoYXNoXVwiIGFuZFxuICAgICAgICAgICAgLy8gZXZlcnl3aGVyZSBlbHNlXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aDpzdHJpbmcgPVxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZS5qYXZhU2NyaXB0LnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgIC9eKC4rKSg/OlxcP1teP10qKSQvLCAnJDEnXG4gICAgICAgICAgICAgICAgKS5yZXBsYWNlKC9cXFtuYW1lXFxdL2csIGNodW5rSUQpXG4gICAgICAgICAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgcGx1Z2lucy5BZGRBc3NldEhUTUxQbHVnaW4oe1xuICAgICAgICAgICAgICAgIGZpbGVwYXRoOiBmaWxlUGF0aCxcbiAgICAgICAgICAgICAgICBoYXNoOiB0cnVlLFxuICAgICAgICAgICAgICAgIGluY2x1ZGVTb3VyY2VtYXA6IEhlbHBlci5pc0ZpbGVTeW5jKGAke2ZpbGVQYXRofS5tYXBgKVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgd2VicGFjay5EbGxSZWZlcmVuY2VQbHVnaW4oe1xuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbmZpZ3VyYXRpb24ucGF0aC5jb250ZXh0LCBtYW5pZmVzdDogcmVxdWlyZShcbiAgICAgICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5wYXRoLnRhcmdldH0ke2NodW5rSUR9LmRsbC1tYW5pZmVzdC5qc29uYClcbiAgICAgICAgICAgIH0pKVxuICAgICAgICB9XG4vLyAvLy8vIGVuZHJlZ2lvblxuLy8gLy8vLyByZWdpb24gZ2VuZXJhdGUgY29tbW9uIGNodW5rc1xuaWYgKGNvbmZpZ3VyYXRpb24uZ2l2ZW5Db21tYW5kTGluZUFyZ3VtZW50c1syXSAhPT0gJ2J1aWxkRExMJylcbiAgICBmb3IgKGNvbnN0IGNodW5rSUQ6c3RyaW5nIG9mIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmNvbW1vbkNodW5rSURzKVxuICAgICAgICBpZiAobm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uLmhhc093blByb3BlcnR5KGNodW5rSUQpKVxuICAgICAgICAgICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHdlYnBhY2sub3B0aW1pemUuQ29tbW9uc0NodW5rUGx1Z2luKHtcbiAgICAgICAgICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IGZhbHNlLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBjb25maWd1cmF0aW9uLmZpbGVzLmNvbXBvc2UuamF2YVNjcmlwdCxcbiAgICAgICAgICAgICAgICBtaW5DaHVua3M6IEluZmluaXR5LFxuICAgICAgICAgICAgICAgIG5hbWU6IGNodW5rSUQsXG4gICAgICAgICAgICAgICAgbWluU2l6ZTogMFxuICAgICAgICAgICAgfSkpXG4vLyAvLy8vIGVuZHJlZ2lvblxubGV0IGphdmFTY3JpcHROZWVkZWQ6Ym9vbGVhbiA9IGNvbmZpZ3VyYXRpb24uZGVidWcgJiYgW1xuICAgICdzZXJ2ZScsICd0ZXN0SW5Ccm93c2VyJ1xuXS5pbmNsdWRlcyhjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl0pXG5pZiAoIWphdmFTY3JpcHROZWVkZWQpXG4gICAgZm9yIChjb25zdCBjaHVua05hbWU6c3RyaW5nIGluIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbilcbiAgICAgICAgaWYgKG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbi5oYXNPd25Qcm9wZXJ0eShjaHVua05hbWUpKVxuICAgICAgICAgICAgZm9yIChjb25zdCBtb2R1bGVJRDpzdHJpbmcgb2Ygbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uW1xuICAgICAgICAgICAgICAgIGNodW5rTmFtZVxuICAgICAgICAgICAgXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGU6P3N0cmluZyA9IEhlbHBlci5kZXRlcm1pbmVBc3NldFR5cGUoXG4gICAgICAgICAgICAgICAgICAgIEhlbHBlci5kZXRlcm1pbmVNb2R1bGVGaWxlUGF0aChcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZUlELCBjb25maWd1cmF0aW9uLm1vZHVsZS5hbGlhc2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5rbm93bkV4dGVuc2lvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uYnVpbGQsIGNvbmZpZ3VyYXRpb24ucGF0aClcbiAgICAgICAgICAgICAgICBpZiAodHlwZSAmJiBjb25maWd1cmF0aW9uLmJ1aWxkW3R5cGVdICYmIGNvbmZpZ3VyYXRpb24uYnVpbGRbXG4gICAgICAgICAgICAgICAgICAgIHR5cGVcbiAgICAgICAgICAgICAgICBdLm91dHB1dEV4dGVuc2lvbiA9PT0gJ2pzJykge1xuICAgICAgICAgICAgICAgICAgICBqYXZhU2NyaXB0TmVlZGVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbi8vIC8vLy8gcmVnaW9uIG1hcmsgZW1wdHkgamF2YVNjcmlwdCBtb2R1bGVzIGFzIGR1bW15XG5pZiAoIWphdmFTY3JpcHROZWVkZWQpXG4gICAgY29uZmlndXJhdGlvbi5maWxlcy5jb21wb3NlLmphdmFTY3JpcHQgPSBwYXRoLmpvaW4oXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5qYXZhU2NyaXB0LCAnLl9fZHVtbXlfXy5jb21waWxlZC5qcycpXG4vLyAvLy8vIGVuZHJlZ2lvblxuLy8gLy8vLyByZWdpb24gZXh0cmFjdCBjYXNjYWRpbmcgc3R5bGUgc2hlZXRzXG5wbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgcGx1Z2lucy5FeHRyYWN0VGV4dChcbiAgICBjb25maWd1cmF0aW9uLmZpbGVzLmNvbXBvc2UuY2FzY2FkaW5nU3R5bGVTaGVldCwge2FsbENodW5rczogdHJ1ZSwgZGlzYWJsZTpcbiAgICAgICAgIWNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZS5jYXNjYWRpbmdTdHlsZVNoZWV0fSkpXG4vLyAvLy8vIGVuZHJlZ2lvblxuLy8gLy8vLyByZWdpb24gcGVyZm9ybXMgaW1wbGljaXQgZXh0ZXJuYWwgbG9naWNcbmlmIChpbmplY3Rpb24uZXh0ZXJuYWwgPT09ICdfX2ltcGxpY2l0X18nKVxuICAgIC8qXG4gICAgICAgIFdlIG9ubHkgd2FudCB0byBwcm9jZXNzIG1vZHVsZXMgZnJvbSBsb2NhbCBjb250ZXh0IGluIGxpYnJhcnkgbW9kZSxcbiAgICAgICAgc2luY2UgYSBjb25jcmV0ZSBwcm9qZWN0IHVzaW5nIHRoaXMgbGlicmFyeSBzaG91bGQgY29tYmluZSBhbGwgYXNzZXRzXG4gICAgICAgIChhbmQgZGVkdXBsaWNhdGUgdGhlbSkgZm9yIG9wdGltYWwgYnVuZGxpbmcgcmVzdWx0cy4gTk9URTogT25seSBuYXRpdmVcbiAgICAgICAgamF2YVNjcmlwdCBhbmQganNvbiBtb2R1bGVzIHdpbGwgYmUgbWFya2VkIGFzIGV4dGVybmFsIGRlcGVuZGVuY3kuXG4gICAgKi9cbiAgICBpbmplY3Rpb24uZXh0ZXJuYWwgPSAoXG4gICAgICAgIGNvbnRleHQ6c3RyaW5nLCByZXF1ZXN0OnN0cmluZywgY2FsbGJhY2s6UHJvY2VkdXJlRnVuY3Rpb25cbiAgICApOnZvaWQgPT4ge1xuICAgICAgICBjb25zdCBmaWxlUGF0aDpzdHJpbmcgPSBIZWxwZXIuZGV0ZXJtaW5lTW9kdWxlRmlsZVBhdGgoXG4gICAgICAgICAgICByZXF1ZXN0LnN1YnN0cmluZyhyZXF1ZXN0Lmxhc3RJbmRleE9mKCchJykgKyAxKSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmFsaWFzZXMsIGNvbmZpZ3VyYXRpb24ua25vd25FeHRlbnNpb25zLFxuICAgICAgICAgICAgY29udGV4dClcbiAgICAgICAgaWYgKGZpbGVQYXRoLmVuZHNXaXRoKCcuanMnKSB8fCBmaWxlUGF0aC5lbmRzV2l0aCgnLmpzb24nKSkge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxSZXF1ZXN0OnN0cmluZyA9IHJlcXVlc3RcbiAgICAgICAgICAgIC8vIE5PVEU6IFdlIGFwcGx5IGFsaWFzIG9uIGV4dGVybmFscyBhZGRpdGlvbmFsbHkuXG4gICAgICAgICAgICByZXF1ZXN0ID0gSGVscGVyLmFwcGx5QWxpYXNlcyhcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnN1YnN0cmluZyhyZXF1ZXN0Lmxhc3RJbmRleE9mKCchJykgKyAxKSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5hbGlhc2VzKVxuICAgICAgICAgICAgY29uc3QgYXBwbHlFeHRlcm5hbFJlcXVlc3Q6RnVuY3Rpb24gPSAoKTp2b2lkID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoWyd2YXInLCAndW1kJ10uaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZXhwb3J0Rm9ybWF0LmV4dGVybmFsXG4gICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgIG9yaWdpbmFsUmVxdWVzdCBpbiBjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXMpXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSBjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFJlcXVlc3RdXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uZXhwb3J0Rm9ybWF0LmV4dGVybmFsID09PSAndmFyJylcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCA9IEhlbHBlci5jb252ZXJ0VG9WYWxpZFZhcmlhYmxlTmFtZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QsICcwLTlhLXpBLVpfJFxcXFwuJylcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soXG4gICAgICAgICAgICAgICAgICAgIG51bGwsIHJlcXVlc3QsIGNvbmZpZ3VyYXRpb24uZXhwb3J0Rm9ybWF0LmV4dGVybmFsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEhlbHBlci5pc0FueU1hdGNoaW5nKFxuICAgICAgICAgICAgICAgIHJlcXVlc3QsIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmltcGxpY2l0RXh0ZXJuYWxJbmNsdWRlUGF0dGVyblxuICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwbHlFeHRlcm5hbFJlcXVlc3QoKVxuICAgICAgICAgICAgaWYgKEhlbHBlci5pc0FueU1hdGNoaW5nKFxuICAgICAgICAgICAgICAgIHJlcXVlc3QsIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmltcGxpY2l0RXh0ZXJuYWxFeGNsdWRlUGF0dGVyblxuICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKVxuICAgICAgICAgICAgZm9yIChjb25zdCBjaHVua05hbWU6c3RyaW5nIGluIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbilcbiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uLmhhc093blByb3BlcnR5KGNodW5rTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2R1bGVJRDpzdHJpbmcgb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbltjaHVua05hbWVdXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChIZWxwZXIuZGV0ZXJtaW5lTW9kdWxlRmlsZVBhdGgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlSUQsIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmFsaWFzZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5rbm93bkV4dGVuc2lvbnMsIGNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICkgPT09IGZpbGVQYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIE5PVEU6IFdlIG1hcmsgZGVwZW5kZW5jaWVzIGFzIGV4dGVybmFsIGlmIHRoZXkgZG9lcyBub3QgY29udGFpblxuICAgICAgICAgICAgICAgIGEgbG9hZGVyIGluIHRoZWlyIHJlcXVlc3QgYW5kIGFyZW4ndCBwYXJ0IG9mIHRoZSBjdXJyZW50IG5vZGVcbiAgICAgICAgICAgICAgICBwYWNrYWdlLlxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlmICghY29uZmlndXJhdGlvbi5pblBsYWNlLmV4dGVybmFsTGlicmFyeS5ub3JtYWwgJiYgIShcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmluUGxhY2UuZXh0ZXJuYWxMaWJyYXJ5LnNoaW1tZWQgJiZcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFJlcXVlc3QuaW5jbHVkZXMoJyEnKVxuICAgICAgICAgICAgKSAmJiAoIXBhdGgucmVzb2x2ZShmaWxlUGF0aCkuc3RhcnRzV2l0aChcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguY29udGV4dFxuICAgICAgICAgICAgKSB8fCBIZWxwZXIuaXNGaWxlUGF0aEluTG9jYXRpb24oXG4gICAgICAgICAgICAgICAgZmlsZVBhdGgsIGNvbmZpZ3VyYXRpb24ucGF0aC5pZ25vcmVcbiAgICAgICAgICAgICkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBhcHBseUV4dGVybmFsUmVxdWVzdCgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKClcbiAgICB9XG4vLyAvLy8vIGVuZHJlZ2lvblxuLy8gLy8vLyByZWdpb24gYnVpbGQgZGxsIHBhY2thZ2VzXG5pZiAoY29uZmlndXJhdGlvbi5naXZlbkNvbW1hbmRMaW5lQXJndW1lbnRzWzJdID09PSAnYnVpbGRETEwnKSB7XG4gICAgbGV0IGRsbENodW5rSURFeGlzdHM6Ym9vbGVhbiA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBjaHVua0lEOnN0cmluZyBpbiBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24pXG4gICAgICAgIGlmIChub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24uaGFzT3duUHJvcGVydHkoY2h1bmtJRCkpXG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5pbmplY3Rpb24uZGxsQ2h1bmtJRHMuaW5jbHVkZXMoY2h1bmtJRCkpXG4gICAgICAgICAgICAgICAgZGxsQ2h1bmtJREV4aXN0cyA9IHRydWVcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBkZWxldGUgbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uW2NodW5rSURdXG4gICAgaWYgKGRsbENodW5rSURFeGlzdHMpIHtcbiAgICAgICAgbGlicmFyeU5hbWUgPSAnW25hbWVdRExMUGFja2FnZSdcbiAgICAgICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHdlYnBhY2suRGxsUGx1Z2luKHtcbiAgICAgICAgICAgIHBhdGg6IGAke2NvbmZpZ3VyYXRpb24ucGF0aC50YXJnZXR9W25hbWVdLmRsbC1tYW5pZmVzdC5qc29uYCxcbiAgICAgICAgICAgIG5hbWU6IGxpYnJhcnlOYW1lXG4gICAgICAgIH0pKVxuICAgIH0gZWxzZVxuICAgICAgICBjb25zb2xlLndhcm4oJ05vIGRsbCBjaHVuayBpZCBmb3VuZC4nKVxufVxuLy8gLy8vLyBlbmRyZWdpb25cbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gYXBwbHkgZmluYWwgZG9tL2phdmFTY3JpcHQgbW9kaWZpY2F0aW9ucy9maXhlc1xucGx1Z2luSW5zdGFuY2VzLnB1c2goe2FwcGx5OiAoY29tcGlsZXI6T2JqZWN0KTp2b2lkID0+IHtcbiAgICBjb21waWxlci5wbHVnaW4oJ2VtaXQnLCAoXG4gICAgICAgIGNvbXBpbGF0aW9uOk9iamVjdCwgY2FsbGJhY2s6UHJvY2VkdXJlRnVuY3Rpb25cbiAgICApOnZvaWQgPT4ge1xuICAgICAgICBjb25zdCBwcm9taXNlczpBcnJheTxQcm9taXNlPHN0cmluZz4+ID0gW11cbiAgICAgICAgLypcbiAgICAgICAgICAgIE5PVEU6IFJlbW92aW5nIHN5bWJvbHMgYWZ0ZXIgYSBcIiZcIiBpbiBoYXNoIHN0cmluZyBpcyBuZWNlc3NhcnkgdG9cbiAgICAgICAgICAgIG1hdGNoIHRoZSBnZW5lcmF0ZWQgcmVxdWVzdCBzdHJpbmdzIGluIG9mZmxpbmUgcGx1Z2luLlxuICAgICAgICAqL1xuICAgICAgICBmb3IgKGNvbnN0IGh0bWxDb25maWd1cmF0aW9uIG9mIGNvbmZpZ3VyYXRpb24uZmlsZXMuaHRtbClcbiAgICAgICAgICAgIGlmIChodG1sQ29uZmlndXJhdGlvbi5maWxlbmFtZSBpbiBjb21waWxhdGlvbi5hc3NldHMpXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChuZXcgUHJvbWlzZSgoXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmU6UHJvbWlzZUNhbGxiYWNrRnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdDpQcm9taXNlQ2FsbGJhY2tGdW5jdGlvblxuICAgICAgICAgICAgICAgICk6V2luZG93ID0+IGRvbS5lbnYoY29tcGlsYXRpb24uYXNzZXRzW1xuICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi5maWxlbmFtZVxuICAgICAgICAgICAgICAgIF0uc291cmNlKCksIChlcnJvcjo/RXJyb3IsIHdpbmRvdzpXaW5kb3cpOj9Qcm9taXNlPHN0cmluZz4gPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rYWJsZXM6e1trZXk6c3RyaW5nXTpzdHJpbmd9ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0OiAnc3JjJywgbGluazogJ2hyZWYnfVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRhZ05hbWU6c3RyaW5nIGluIGxpbmthYmxlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rYWJsZXMuaGFzT3duUHJvcGVydHkodGFnTmFtZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9tTm9kZTpEb21Ob2RlIG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGFnTmFtZX1bJHtsaW5rYWJsZXNbdGFnTmFtZV19Kj1cIj9gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24uaGFzaEFsZ29yaXRobX09XCJdYClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbU5vZGUuc2V0QXR0cmlidXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua2FibGVzW3RhZ05hbWVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tTm9kZS5nZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua2FibGVzW3RhZ05hbWVdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnJlcGxhY2UobmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKFxcXFw/JHtjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG19PWAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdbXiZdKykuKiQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCAnJDEnKSlcbiAgICAgICAgICAgICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW2h0bWxDb25maWd1cmF0aW9uLmZpbGVuYW1lXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgV2VicGFja1Jhd1NvdXJjZShjb21waWxhdGlvbi5hc3NldHNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb24uZmlsZW5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uc291cmNlKCkucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXihcXHMqPCFkb2N0eXBlW14+XSs/PlxccyopW1xcc1xcU10qJC9pLCAnJDEnXG4gICAgICAgICAgICAgICAgICAgICAgICApICsgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW2h0bWxDb25maWd1cmF0aW9uLmZpbGVuYW1lXSlcbiAgICAgICAgICAgICAgICB9KSkpXG4gICAgICAgIGlmICghY29uZmlndXJhdGlvbi5leHBvcnRGb3JtYXQuZXh0ZXJuYWwuc3RhcnRzV2l0aCgndW1kJykpIHtcbiAgICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpOnZvaWQgPT4gY2FsbGJhY2soKSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIC8qXG4gICAgICAgICAgICBOT1RFOiBUaGUgdW1kIG1vZHVsZSBleHBvcnQgZG9lc24ndCBoYW5kbGUgY2FzZXMgd2hlcmUgdGhlIHBhY2thZ2VcbiAgICAgICAgICAgIG5hbWUgZG9lc24ndCBtYXRjaCBleHBvcnRlZCBsaWJyYXJ5IG5hbWUuIFRoaXMgcG9zdCBwcm9jZXNzaW5nXG4gICAgICAgICAgICBmaXhlcyB0aGlzIGlzc3VlLlxuICAgICAgICAqL1xuICAgICAgICBmb3IgKGNvbnN0IGFzc2V0UmVxdWVzdDpzdHJpbmcgaW4gY29tcGlsYXRpb24uYXNzZXRzKVxuICAgICAgICAgICAgaWYgKGFzc2V0UmVxdWVzdC5yZXBsYWNlKC8oW14/XSspXFw/LiokLywgJyQxJykuZW5kc1dpdGgoXG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5idWlsZC5qYXZhU2NyaXB0Lm91dHB1dEV4dGVuc2lvblxuICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgIGxldCBzb3VyY2U6c3RyaW5nID0gY29tcGlsYXRpb24uYXNzZXRzW2Fzc2V0UmVxdWVzdF0uc291cmNlKClcbiAgICAgICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudDpzdHJpbmcgaW5cbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5pbmplY3Rpb24uZXh0ZXJuYWxBbGlhc2VzXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5pbmplY3Rpb24uZXh0ZXJuYWxBbGlhc2VzLmhhc093blByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IHNvdXJjZS5yZXBsYWNlKG5ldyBSZWdFeHAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyhyZXF1aXJlXFxcXCgpXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuY29udmVydFRvVmFsaWRSZWd1bGFyRXhwcmVzc2lvblN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5pbmplY3Rpb24uZXh0ZXJuYWxBbGlhc2VzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSArICdcIihcXFxcKSknLCAnZydcbiAgICAgICAgICAgICAgICAgICAgICAgICksIGAkMScke3JlcGxhY2VtZW50fSckMmApLnJlcGxhY2UobmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKGRlZmluZVxcXFwoXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuY29udmVydFRvVmFsaWRSZWd1bGFyRXhwcmVzc2lvblN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlicmFyeU5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApICsgJ1wiLCBcXFxcWy4qKVwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmNvbnZlcnRUb1ZhbGlkUmVndWxhckV4cHJlc3Npb25TdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmV4dGVybmFsQWxpYXNlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50XVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgKyAnXCIoLipcXFxcXSwgZmFjdG9yeVxcXFwpOyknXG4gICAgICAgICAgICAgICAgICAgICAgICApLCBgJDEnJHtyZXBsYWNlbWVudH0nJDJgKVxuICAgICAgICAgICAgICAgIHNvdXJjZSA9IHNvdXJjZS5yZXBsYWNlKG5ldyBSZWdFeHAoXG4gICAgICAgICAgICAgICAgICAgICcocm9vdFxcXFxbKVwiJyArXG4gICAgICAgICAgICAgICAgICAgIEhlbHBlci5jb252ZXJ0VG9WYWxpZFJlZ3VsYXJFeHByZXNzaW9uU3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlicmFyeU5hbWVcbiAgICAgICAgICAgICAgICAgICAgKSArICdcIihcXFxcXSA9ICknXG4gICAgICAgICAgICAgICAgKSwgYCQxJyR7SGVscGVyLmNvbnZlcnRUb1ZhbGlkVmFyaWFibGVOYW1lKGxpYnJhcnlOYW1lKX0nJDJgKVxuICAgICAgICAgICAgICAgIGNvbXBpbGF0aW9uLmFzc2V0c1thc3NldFJlcXVlc3RdID0gbmV3IFdlYnBhY2tSYXdTb3VyY2UoXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCk6dm9pZCA9PiBjYWxsYmFjaygpKVxuICAgIH0pXG59fSlcbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gYWRkIGF1dG9tYXRpYyBpbWFnZSBjb21wcmVzc2lvblxuLy8gTk9URTogVGhpcyBwbHVnaW4gc2hvdWxkIGJlIGxvYWRlZCBhdCBsYXN0IHRvIGVuc3VyZSB0aGF0IGFsbCBlbWl0dGVkIGltYWdlc1xuLy8gcmFuIHRocm91Z2guXG5wbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgcGx1Z2lucy5JbWFnZW1pbihcbiAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5vcHRpbWl6ZXIuaW1hZ2UuY29udGVudCkpXG4vLyAvLy8gZW5kcmVnaW9uXG4vLyAvLyBlbmRyZWdpb25cbi8vIC8gcmVnaW9uIGxvYWRlclxubGV0IGltYWdlTG9hZGVyOnN0cmluZyA9ICd1cmw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmltYWdlLmZpbGUpXG5jb25zdCBsb2FkZXI6e1xuICAgIHByZXByb2Nlc3Nvcjp7XG4gICAgICAgIGNhc2NhZGluZ1N0eWxlU2hlZXQ6c3RyaW5nO1xuICAgICAgICBsZXNzOnN0cmluZztcbiAgICAgICAgc2FzczpzdHJpbmc7XG4gICAgICAgIHNjc3M6c3RyaW5nO1xuICAgICAgICBqYXZhU2NyaXB0OnN0cmluZztcbiAgICAgICAgY29mZmVlOnN0cmluZztcbiAgICAgICAgcHVnOnN0cmluZztcbiAgICAgICAgbGl0ZXJhdGVDb2ZmZWU6c3RyaW5nXG4gICAgfTtcbiAgICBodG1sOnN0cmluZztcbiAgICBjYXNjYWRpbmdTdHlsZVNoZWV0OnN0cmluZztcbiAgICBzdHlsZTpzdHJpbmc7XG4gICAgcG9zdHByb2Nlc3Nvcjp7XG4gICAgICAgIGltYWdlOnN0cmluZztcbiAgICAgICAgZm9udDp7XG4gICAgICAgICAgICBlb3Q6c3RyaW5nO1xuICAgICAgICAgICAgd29mZjpzdHJpbmc7XG4gICAgICAgICAgICB0dGY6c3RyaW5nO1xuICAgICAgICAgICAgc3ZnOnN0cmluZ1xuICAgICAgICB9O1xuICAgICAgICBkYXRhOnN0cmluZ1xuICAgIH1cbn0gPSB7XG4gICAgcHJlcHJvY2Vzc29yOiB7XG4gICAgICAgIGNhc2NhZGluZ1N0eWxlU2hlZXQ6ICdwb3N0Y3NzJyxcbiAgICAgICAgamF2YVNjcmlwdDogJ2JhYmVsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUucHJlcHJvY2Vzc29yLm1vZGVybkphdmFTY3JpcHQpLFxuICAgICAgICBwdWc6ICdwdWc/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5wcmVwcm9jZXNzb3IucHVnKSxcbiAgICAgICAgLy8gVE9ETyBkZXByZWNhdGVkXG4gICAgICAgIGNvZmZlZTogJ2NvZmZlZScsXG4gICAgICAgIGxpdGVyYXRlQ29mZmVlOiAnY29mZmVlP2xpdGVyYXRlJyxcbiAgICAgICAgbGVzczogJ2xlc3M/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5wcmVwcm9jZXNzb3IubGVzcyksXG4gICAgICAgIHNhc3M6ICdzYXNzPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUucHJlcHJvY2Vzc29yLnNhc3MpLFxuICAgICAgICBzY3NzOiAnc2Fzcz8nICsgSGVscGVyLmNvbnZlcnRDaXJjdWxhck9iamVjdFRvSlNPTihcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLnByZXByb2Nlc3Nvci5zY3NzKVxuICAgICAgICAvL1xuICAgIH0sXG4gICAgaHRtbDogJ2h0bWw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmh0bWwpLFxuICAgIGNhc2NhZGluZ1N0eWxlU2hlZXQ6ICdjc3M/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmNhc2NhZGluZ1N0eWxlU2hlZXQpLFxuICAgIHN0eWxlOiAnc3R5bGU/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLnN0eWxlKSxcbiAgICBwb3N0cHJvY2Vzc29yOiB7XG4gICAgICAgIGltYWdlOiBpbWFnZUxvYWRlcixcbiAgICAgICAgZm9udDoge1xuICAgICAgICAgICAgZW90OiAndXJsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci5mb250LmVvdCksXG4gICAgICAgICAgICB3b2ZmOiAndXJsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci5mb250LndvZmYpLFxuICAgICAgICAgICAgdHRmOiAndXJsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci5mb250LnR0ZiksXG4gICAgICAgICAgICBzdmc6ICd1cmw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmZvbnQuc3ZnKVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiAndXJsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmRhdGEpXG4gICAgfVxufVxuLy8gLyBlbmRyZWdpb25cbi8vIGVuZHJlZ2lvblxuLy8gcmVnaW9uIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBjb250ZXh0OiBjb25maWd1cmF0aW9uLnBhdGguY29udGV4dCxcbiAgICBkZWJ1ZzogY29uZmlndXJhdGlvbi5kZWJ1ZyxcbiAgICBkZXZ0b29sOiBjb25maWd1cmF0aW9uLmRldmVsb3BtZW50LnRvb2wsXG4gICAgZGV2U2VydmVyOiBjb25maWd1cmF0aW9uLmRldmVsb3BtZW50LnNlcnZlcixcbiAgICAvLyByZWdpb24gaW5wdXRcbiAgICBlbnRyeTogbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uLCBleHRlcm5hbHM6IGluamVjdGlvbi5leHRlcm5hbCxcbiAgICByZXNvbHZlTG9hZGVyOiB7XG4gICAgICAgIGFsaWFzOiBjb25maWd1cmF0aW9uLmxvYWRlci5hbGlhc2VzLFxuICAgICAgICBleHRlbnNpb25zOiBjb25maWd1cmF0aW9uLmxvYWRlci5leHRlbnNpb25zLFxuICAgICAgICBtb2R1bGVzRGlyZWN0b3JpZXM6IGNvbmZpZ3VyYXRpb24ubG9hZGVyLm1vZHVsZURpcmVjdG9yaWVzXG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICAgIGFsaWFzOiBjb25maWd1cmF0aW9uLm1vZHVsZS5hbGlhc2VzLFxuICAgICAgICBleHRlbnNpb25zOiBjb25maWd1cmF0aW9uLmtub3duRXh0ZW5zaW9ucyxcbiAgICAgICAgcm9vdDogWyhjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuc291cmNlOnN0cmluZyldXG4gICAgfSxcbiAgICAvLyBlbmRyZWdpb25cbiAgICAvLyByZWdpb24gb3V0cHV0XG4gICAgb3V0cHV0OiB7XG4gICAgICAgIGZpbGVuYW1lOiBwYXRoLnJlbGF0aXZlKFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRhcmdldCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZS5qYXZhU2NyaXB0KSxcbiAgICAgICAgaGFzaEZ1bmN0aW9uOiBjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG0sXG4gICAgICAgIGxpYnJhcnk6IGxpYnJhcnlOYW1lLFxuICAgICAgICBsaWJyYXJ5VGFyZ2V0OiAoXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl0gPT09ICdidWlsZERMTCdcbiAgICAgICAgKSA/ICd2YXInIDogY29uZmlndXJhdGlvbi5leHBvcnRGb3JtYXQuc2VsZixcbiAgICAgICAgcGF0aDogY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRhcmdldCxcbiAgICAgICAgcHVibGljUGF0aDogY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnB1YmxpY1RhcmdldCxcbiAgICAgICAgcGF0aGluZm86IGNvbmZpZ3VyYXRpb24uZGVidWcsXG4gICAgICAgIHVtZE5hbWVkRGVmaW5lOiB0cnVlXG4gICAgfSxcbiAgICB0YXJnZXQ6IGNvbmZpZ3VyYXRpb24udGFyZ2V0VGVjaG5vbG9neSxcbiAgICAvLyBlbmRyZWdpb25cbiAgICBtb2R1bGU6IHtcbiAgICAgICAgbm9QYXJzZTogY29uZmlndXJhdGlvbi5tb2R1bGUuc2tpcFBhcnNlUmVndWxhckV4cHJlc3Npb24sXG4gICAgICAgIHByZUxvYWRlcnM6IFtcbiAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gbmF0aXZlIHdlYiB0eXBlcy5cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBzY3JpcHRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuanMkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wcmVwcm9jZXNzb3IuamF2YVNjcmlwdCxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBbcGF0aC5qb2luKFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuamF2YVNjcmlwdFxuICAgICAgICAgICAgICAgICldLmNvbmNhdChtb2R1bGVMb2NhdGlvbnMuZGlyZWN0b3J5UGF0aHMpLFxuICAgICAgICAgICAgICAgIGV4Y2x1ZGU6IChmaWxlUGF0aDpzdHJpbmcpOmJvb2xlYW4gPT5cbiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmlzRmlsZVBhdGhJbkxvY2F0aW9uKGZpbGVQYXRoLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAvXiguKykoPzpcXD9bXj9dKikkLywgJyQxJ1xuICAgICAgICAgICAgICAgICAgICApLCBjb25maWd1cmF0aW9uLnBhdGguaWdub3JlKVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5jb2ZmZWUkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wcmVwcm9jZXNzb3IuY29mZmVlLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5jb2ZmZWVTY3JpcHRcbiAgICAgICAgICAgICAgICApXS5jb25jYXQobW9kdWxlTG9jYXRpb25zLmRpcmVjdG9yeVBhdGhzKVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC4oPzpjb2ZmZWVcXC5tZHxsaXRjb2ZmZWUpJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBsb2FkZXIucHJlcHJvY2Vzc29yLmxpdGVyYXRlQ29mZmVlLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5jb2ZmZWVTY3JpcHRcbiAgICAgICAgICAgICAgICApXS5jb25jYXQobW9kdWxlTG9jYXRpb25zLmRpcmVjdG9yeVBhdGhzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGVuZHJlZ2lvblxuICAgICAgICAgICAgLy8gcmVnaW9uIGh0bWwgKHRlbXBsYXRlcylcbiAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgZW5zdXJlcyB0aGF0IHdpbGwgYmUgdXNlZCBhcyBhIHNwZWNpYWwgbG9hZGVyIGFsaWFzLlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IG5ldyBSZWdFeHAoSGVscGVyLmNvbnZlcnRUb1ZhbGlkUmVndWxhckV4cHJlc3Npb25TdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuZGVmYXVsdEhUTUwudGVtcGxhdGUuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5maWxlcy5kZWZhdWx0SFRNTC50ZW1wbGF0ZS5sYXN0SW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnISdcbiAgICAgICAgICAgICAgICAgICAgICAgICkgKyAxKSkpLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogY29uZmlndXJhdGlvbi5maWxlcy5kZWZhdWx0SFRNTC50ZW1wbGF0ZS5zdWJzdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIDAsIGNvbmZpZ3VyYXRpb24uZmlsZXMuZGVmYXVsdEhUTUwudGVtcGxhdGUubGFzdEluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAnIScpKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwucHVnJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOlxuICAgICAgICAgICAgICAgICAgICBgZmlsZT9uYW1lPSR7Y29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRlbXBsYXRlfWAgK1xuICAgICAgICAgICAgICAgICAgICBgW25hbWVdLmh0bWw/JHtjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG19PVtoYXNoXSFgICtcbiAgICAgICAgICAgICAgICAgICAgYGV4dHJhY3QhJHtsb2FkZXIuaHRtbH0hJHtsb2FkZXIucHJlcHJvY2Vzc29yLnB1Z31gLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IHBhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICBleGNsdWRlOiBjb25maWd1cmF0aW9uLmZpbGVzLmh0bWwuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmZpbGVzLmRlZmF1bHRIVE1MXG4gICAgICAgICAgICAgICAgKS5tYXAoKFxuICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbjpIVE1MQ29uZmlndXJhdGlvblxuICAgICAgICAgICAgICAgICk6c3RyaW5nID0+IGh0bWxDb25maWd1cmF0aW9uLnRlbXBsYXRlLnN1YnN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUubGFzdEluZGV4T2YoJyEnKSArIDEpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZW5kcmVnaW9uXG4gICAgICAgIF0sXG4gICAgICAgIGxvYWRlcnM6IFtcbiAgICAgICAgICAgIC8vIExvYWRzIGRlcGVuZGVuY2llcy5cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBzdHlsZVxuICAgICAgICAgICAgLy8gVE9ETyBkZXByZWNhdGVkXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLmxlc3MkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IHBsdWdpbnMuRXh0cmFjdFRleHQuZXh0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVyLnN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBgJHtsb2FkZXIuY2FzY2FkaW5nU3R5bGVTaGVldH0hJHtsb2FkZXIucHJlcHJvY2Vzc29yLmxlc3N9YFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuc2FzcyQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogcGx1Z2lucy5FeHRyYWN0VGV4dC5leHRyYWN0KFxuICAgICAgICAgICAgICAgICAgICBsb2FkZXIuc3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIGAke2xvYWRlci5jYXNjYWRpbmdTdHlsZVNoZWV0fSEke2xvYWRlci5wcmVwcm9jZXNzb3Iuc2Fzc31gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5zY3NzJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBwbHVnaW5zLkV4dHJhY3RUZXh0LmV4dHJhY3QoXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlci5zdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgYCR7bG9hZGVyLmNhc2NhZGluZ1N0eWxlU2hlZXR9ISR7bG9hZGVyLnByZXByb2Nlc3Nvci5zY3NzfWBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuY3NzJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBwbHVnaW5zLkV4dHJhY3RUZXh0LmV4dHJhY3QoXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlci5zdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgYCR7bG9hZGVyLnByZXByb2Nlc3Nvci5jYXNjYWRpbmdTdHlsZVNoZWV0fSFgICtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVyLmNhc2NhZGluZ1N0eWxlU2hlZXQpLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5jYXNjYWRpbmdTdHlsZVNoZWV0XG4gICAgICAgICAgICAgICAgKV0uY29uY2F0KG1vZHVsZUxvY2F0aW9ucy5kaXJlY3RvcnlQYXRocyksXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogKGZpbGVQYXRoOnN0cmluZyk6Ym9vbGVhbiA9PlxuICAgICAgICAgICAgICAgICAgICBIZWxwZXIuaXNGaWxlUGF0aEluTG9jYXRpb24oZmlsZVBhdGgucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIC9eKC4rKSg/OlxcP1teP10qKSQvLCAnJDEnXG4gICAgICAgICAgICAgICAgICAgICksIGNvbmZpZ3VyYXRpb24ucGF0aC5pZ25vcmUpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gZW5kcmVnaW9uXG4gICAgICAgICAgICAvLyByZWdpb24gaHRtbCAodGVtcGxhdGVzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5odG1sJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOlxuICAgICAgICAgICAgICAgICAgICBgZmlsZT9uYW1lPSR7Y29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRlbXBsYXRlfWAgK1xuICAgICAgICAgICAgICAgICAgICBgW25hbWVdLltleHRdPyR7Y29uZmlndXJhdGlvbi5oYXNoQWxnb3JpdGhtfT1baGFzaF0hYCArXG4gICAgICAgICAgICAgICAgICAgIGBleHRyYWN0ISR7bG9hZGVyLmh0bWx9YCxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC50ZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogY29uZmlndXJhdGlvbi5maWxlcy5odG1sLm1hcCgoXG4gICAgICAgICAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uOkhUTUxDb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgICAgKTpzdHJpbmcgPT4gaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZS5sYXN0SW5kZXhPZignIScpICsgMSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgXSxcbiAgICAgICAgcG9zdExvYWRlcnM6IFtcbiAgICAgICAgICAgIC8vIE9wdGltaXplIGxvYWRlZCBhc3NldHMuXG4gICAgICAgICAgICAvLyByZWdpb24gZm9udFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5lb3QoPzpcXD92PVxcZCtcXC5cXGQrXFwuXFxkKyk/JC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBsb2FkZXIucG9zdHByb2Nlc3Nvci5mb250LmVvdFxuICAgICAgICAgICAgfSwge3Rlc3Q6IC9cXC53b2ZmMj8kLywgbG9hZGVyOiBsb2FkZXIucG9zdHByb2Nlc3Nvci5mb250LndvZmZ9LCB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLnR0Zig/OlxcP3Y9XFxkK1xcLlxcZCtcXC5cXGQrKT8kLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wb3N0cHJvY2Vzc29yLmZvbnQudHRmXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLnN2Zyg/OlxcP3Y9XFxkK1xcLlxcZCtcXC5cXGQrKT8kLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wb3N0cHJvY2Vzc29yLmZvbnQuc3ZnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gZW5kcmVnaW9uXG4gICAgICAgICAgICAvLyByZWdpb24gaW1hZ2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuKD86cG5nfGpwZ3xpY298Z2lmKSQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogbG9hZGVyLnBvc3Rwcm9jZXNzb3IuaW1hZ2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBkYXRhXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogLy4rLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wb3N0cHJvY2Vzc29yLmRhdGEsXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogcGF0aC5qb2luKFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuZGF0YSksXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogKGZpbGVQYXRoOnN0cmluZyk6Ym9vbGVhbiA9PlxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmtub3duRXh0ZW5zaW9ucy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGguZXh0bmFtZShmaWxlUGF0aC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9eKC4rKSg/OlxcP1teP10qKSQvLCAnJDEnKSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgXVxuICAgIH0sXG4gICAgcG9zdGNzczogKCk6QXJyYXk8T2JqZWN0PiA9PiBbXG4gICAgICAgIGF1dG9wcmVmaXhlciwgcG9zdGNzc0ltcG9ydCh7YWRkRGVwZW5kZW5jeVRvOiB3ZWJwYWNrfSlcbiAgICBdLFxuICAgIGh0bWw6IGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci5odG1sTWluaWZpZXIsXG4gICAgLy8gTGV0IHRoZSBcImh0bWwtbG9hZGVyXCIgYWNjZXNzIGZ1bGwgaHRtbCBtaW5pZmllciBwcm9jZXNzaW5nXG4gICAgLy8gY29uZmlndXJhdGlvbi5cbiAgICBwdWc6IGNvbmZpZ3VyYXRpb24ubW9kdWxlLnByZXByb2Nlc3Nvci5wdWcsXG4gICAgcGx1Z2luczogcGx1Z2luSW5zdGFuY2VzXG59XG4vLyBlbmRyZWdpb25cbi8vIHJlZ2lvbiB2aW0gbW9kbGluZVxuLy8gdmltOiBzZXQgdGFic3RvcD00IHNoaWZ0d2lkdGg9NCBleHBhbmR0YWI6XG4vLyB2aW06IGZvbGRtZXRob2Q9bWFya2VyIGZvbGRtYXJrZXI9cmVnaW9uLGVuZHJlZ2lvbjpcbi8vIGVuZHJlZ2lvblxuIl19