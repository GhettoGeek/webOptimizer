#!/usr/bin/env node


// -*- coding: utf-8 -*-
'use strict';
/* !
    region header
    Copyright Torben Sickert (info["~at~"]torben.website) 16.12.2012

    License
    -------

    This library written by Torben Sickert stand under a creative commons naming
    3.0 unported license. see http://creativecommons.org/licenses/by/3.0/deed.de
    endregion
*/
// region imports

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _fs = require('fs');

var fileSystem = _interopRequireWildcard(_fs);

var _jsdom = require('jsdom');

var dom = _interopRequireWildcard(_jsdom);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _postcssImport = require('postcss-import');

var _postcssImport2 = _interopRequireDefault(_postcssImport);

var _postcssCssnext = require('postcss-cssnext');

var _postcssCssnext2 = _interopRequireDefault(_postcssCssnext);

var _rimraf = require('rimraf');

var _webpack = require('webpack');

var _webpack2 = _interopRequireDefault(_webpack);

var _webpackSources = require('webpack-sources');

var _configurator = require('./configurator.compiled');

var _configurator2 = _interopRequireDefault(_configurator);

var _helper = require('./helper.compiled');

var _helper2 = _interopRequireDefault(_helper);

var _htmlLoader = require('html-loader');

var _htmlLoader2 = _interopRequireDefault(_htmlLoader);

var _loaderUtils = require('loader-utils');

var _loaderUtils2 = _interopRequireDefault(_loaderUtils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

// NOTE: Only needed for debugging this file.
try {
    require('source-map-support/register');
} catch (error) {}

const plugins = require('webpack-load-plugins')();


plugins.HTML = plugins.html;
plugins.ExtractText = plugins.extractText;
plugins.AddAssetHTMLPlugin = require('add-asset-html-webpack-plugin');
plugins.OpenBrowser = plugins.openBrowser;
plugins.Favicon = require('favicons-webpack-plugin');
plugins.Imagemin = require('imagemin-webpack-plugin').default;
plugins.Offline = require('offline-plugin');

// / region monkey patches
// Monkey-Patch html loader to retrieve html loader options since the
// "webpack-html-plugin" doesn't preserve the original loader interface.

require.cache[require.resolve('html-loader')].exports = function () {
    _helper2.default.extendObject(true, this.options, module, this.options);
    return _htmlLoader2.default.apply(this, arguments);
};
// Monkey-Patch loader-utils to define which url is a local request.

const loaderUtilsIsUrlRequestBackup = _loaderUtils2.default.isUrlRequest;
require.cache[require.resolve('loader-utils')].exports.isUrlRequest = function (url) {
    if (url.match(/^[a-z]+:.+/)) return false;
    return loaderUtilsIsUrlRequestBackup.apply(_loaderUtils2.default, arguments);
};
// / endregion
// endregion
// region initialisation
let libraryName = _configurator2.default.exportFormat.self === 'var' ? _helper2.default.convertToValidVariableName(_configurator2.default.name) : _configurator2.default.name;
if ('libraryName' in _configurator2.default && _configurator2.default.libraryName) libraryName = _configurator2.default.libraryName;
// // region plugins
const pluginInstances = [new _webpack2.default.optimize.OccurrenceOrderPlugin(true)];
// /// region define modules to ignore
for (const ignorePattern of _configurator2.default.injection.ignorePattern) pluginInstances.push(new _webpack2.default.IgnorePlugin(new RegExp(ignorePattern)));
// /// endregion
// /// region generate html file
let htmlAvailable = false;
if (_configurator2.default.givenCommandLineArguments[2] !== 'buildDLL') for (let htmlConfiguration of _configurator2.default.files.html) if (_helper2.default.isFileSync(htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1))) {
    if (htmlConfiguration.template === _configurator2.default.files.defaultHTML.template) htmlConfiguration.template = htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1);
    pluginInstances.push(new plugins.HTML(htmlConfiguration));
    htmlAvailable = true;
}
// /// endregion
// /// region generate favicons
if (htmlAvailable && _configurator2.default.favicon && _helper2.default.isFileSync(_configurator2.default.favicon.logo)) pluginInstances.push(new plugins.Favicon(_configurator2.default.favicon));
// /// endregion
// /// region provide offline functionality
if (htmlAvailable && _configurator2.default.offline) {
    if (!['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2])) {
        if (_configurator2.default.inPlace.cascadingStyleSheet) _configurator2.default.offline.excludes.push(`${ _configurator2.default.path.asset.cascadingStyleSheet }*.css?` + `${ _configurator2.default.hashAlgorithm }=*`);
        if (_configurator2.default.inPlace.javaScript) _configurator2.default.offline.excludes.push(`${ _configurator2.default.path.asset.javaScript }*.js?` + `${ _configurator2.default.hashAlgorithm }=*`);
    }
    pluginInstances.push(new plugins.Offline(_configurator2.default.offline));
}
// /// endregion
// /// region opens browser automatically
if (_configurator2.default.development.openBrowser && htmlAvailable && ['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2])) pluginInstances.push(new plugins.OpenBrowser(_configurator2.default.development.openBrowser));
// /// endregion
// /// region provide build environment
pluginInstances.push(new _webpack2.default.DefinePlugin(_configurator2.default.buildDefinition));
// /// endregion
// /// region modules/assets
const moduleLocations = _helper2.default.determineModuleLocations(_configurator2.default.injection.internal, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, _configurator2.default.path.context, _configurator2.default.path.ignore);
// //// region perform javaScript minification/optimisation
if (_configurator2.default.module.optimizer.uglifyJS) pluginInstances.push(new _webpack2.default.optimize.UglifyJsPlugin(_configurator2.default.module.optimizer.uglifyJS));
// //// endregion
// //// region apply module pattern
pluginInstances.push({ apply: compiler => {
        compiler.plugin('emit', (compilation, callback) => {
            for (const request in compilation.assets) if (compilation.assets.hasOwnProperty(request)) {
                const filePath = request.replace(/\?[^?]+$/, '');
                const type = _helper2.default.determineAssetType(filePath, _configurator2.default.build, _configurator2.default.path);
                if (type && _configurator2.default.assetPattern[type] && !new RegExp(_configurator2.default.assetPattern[type].excludeFilePathRegularExpression).test(filePath)) {
                    const source = compilation.assets[request].source();
                    if (typeof source === 'string') compilation.assets[request] = new _webpackSources.RawSource(_configurator2.default.assetPattern[type].pattern.replace(/\{1\}/g, source.replace(/\$/g, '$$$')));
                }
            }
            callback();
        });
    } });
// //// endregion
// //// region in-place configured assets in the main html file
if (htmlAvailable && !['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2])) pluginInstances.push({ apply: compiler => {
        compiler.plugin('emit', (compilation, callback) => {
            if (_configurator2.default.files.html[0].filename in compilation.assets && (_configurator2.default.inPlace.cascadingStyleSheet || _configurator2.default.inPlace.javaScript)) dom.env(compilation.assets[_configurator2.default.files.html[0].filename].source(), (error, window) => {
                if (_configurator2.default.inPlace.cascadingStyleSheet) {
                    const urlPrefix = _configurator2.default.files.compose.cascadingStyleSheet.replace('[contenthash]', '');
                    const domNode = window.document.querySelector(`link[href^="${ urlPrefix }"]`);
                    if (domNode) {
                        let asset;
                        for (asset in compilation.assets) if (asset.startsWith(urlPrefix)) break;
                        const inPlaceDomNode = window.document.createElement('style');
                        inPlaceDomNode.textContent = compilation.assets[asset].source();
                        domNode.parentNode.insertBefore(inPlaceDomNode, domNode);
                        domNode.parentNode.removeChild(domNode);
                        /*
                            NOTE: This doesn't prevent webpack from
                            creating this file if present in another chunk
                            so removing it (and a potential source map
                            file) later in the "done" hook.
                        */
                        delete compilation.assets[asset];
                    } else console.warn('No referenced cascading style sheet file in' + ' resulting markup found with ' + `selector: link[href^="${ urlPrefix }"]`);
                }
                if (_configurator2.default.inPlace.javaScript) {
                    const urlPrefix = _configurator2.default.files.compose.javaScript.replace('[hash]', '');
                    const domNode = window.document.querySelector(`script[src^="${ urlPrefix }"]`);
                    if (domNode) {
                        let asset;
                        for (asset in compilation.assets) if (asset.startsWith(urlPrefix)) break;
                        domNode.textContent = compilation.assets[asset].source();
                        domNode.removeAttribute('src');
                        /*
                            NOTE: This doesn't prevent webpack from
                            creating this file if present in another chunk
                            so removing it (and a potential source map
                            file) later in the "done" hook.
                        */
                        delete compilation.assets[asset];
                    } else console.warn('No referenced javaScript file in resulting ' + 'markup found with selector: ' + `script[src^="${ urlPrefix }"]`);
                }
                compilation.assets[_configurator2.default.files.html[0].filename] = new _webpackSources.RawSource(compilation.assets[_configurator2.default.files.html[0].filename].source().replace(/^(\s*<!doctype[^>]+?>\s*)[\s\S]*$/i, '$1') + window.document.documentElement.outerHTML);
                callback();
            });else callback();
        });
        compiler.plugin('after-emit', (compilation, callback) => {
            if (_configurator2.default.files.html[0].filename in compilation.assets) {
                if (_configurator2.default.inPlace.cascadingStyleSheet) (0, _rimraf.sync)(_path2.default.join(_configurator2.default.path.asset.target, _configurator2.default.path.asset.cascadingStyleSheet), { glob: false });
                if (_configurator2.default.inPlace.javaScript) {
                    const assetFilePath = _path2.default.join(_configurator2.default.path.asset.target, _configurator2.default.files.compose.javaScript.replace(`?${ _configurator2.default.hashAlgorithm }=[hash]`, ''));
                    for (const filePath of [assetFilePath, `${ assetFilePath }.map`]) if (_helper2.default.isFileSync(filePath)) fileSystem.unlinkSync(filePath);
                    const javaScriptPath = _path2.default.join(_configurator2.default.path.asset.target, _configurator2.default.path.asset.javaScript);
                    if (fileSystem.readdirSync(javaScriptPath).length === 0) fileSystem.rmdirSync(javaScriptPath);
                }
            }
            callback();
        });
    } });
// //// endregion
const injection = _helper2.default.resolveInjection(_configurator2.default.injection, _helper2.default.resolveBuildConfigurationFilePaths(_configurator2.default.build, _configurator2.default.path.asset.source, _configurator2.default.path.context, _configurator2.default.path.ignore), _configurator2.default.testInBrowser.injection.internal, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, _configurator2.default.path.context, _configurator2.default.path.ignore);
const normalizedInternalInjection = _helper2.default.normalizeInternalInjection(injection.internal);
// //// region remove chunks if a corresponding dll package exists
if (_configurator2.default.givenCommandLineArguments[2] !== 'buildDLL') for (const chunkID in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkID) && _configurator2.default.dllManifestFilePaths.includes(`${ _configurator2.default.path.target }${ chunkID }.dll-manifest.json`)) {
    delete normalizedInternalInjection[chunkID];
    // TODO replace all placeholder like "[id]", "[ext]", "[hash]" and
    // everywhere else
    const filePath = _configurator2.default.files.compose.javaScript.replace(/^(.+)(?:\?[^?]*)$/, '$1').replace(/\[name\]/g, chunkID);
    pluginInstances.push(new plugins.AddAssetHTMLPlugin({
        filepath: filePath,
        hash: true,
        includeSourcemap: _helper2.default.isFileSync(`${ filePath }.map`)
    }));
    pluginInstances.push(new _webpack2.default.DllReferencePlugin({
        context: _configurator2.default.path.context, manifest: require(`${ _configurator2.default.path.target }${ chunkID }.dll-manifest.json`)
    }));
}
// //// endregion
// //// region generate common chunks
if (_configurator2.default.givenCommandLineArguments[2] !== 'buildDLL') for (const chunkID of _configurator2.default.injection.commonChunkIDs) if (normalizedInternalInjection.hasOwnProperty(chunkID)) pluginInstances.push(new _webpack2.default.optimize.CommonsChunkPlugin({
    async: false,
    children: false,
    filename: _configurator2.default.files.compose.javaScript,
    minChunks: Infinity,
    name: chunkID,
    minSize: 0
}));
// //// endregion
let javaScriptNeeded = _configurator2.default.debug && ['serve', 'testInBrowser'].includes(_configurator2.default.givenCommandLineArguments[2]);
if (!javaScriptNeeded) for (const chunkName in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkName)) for (const moduleID of normalizedInternalInjection[chunkName]) {
    const type = _helper2.default.determineAssetType(_helper2.default.determineModuleFilePath(moduleID, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, _configurator2.default.path.context), _configurator2.default.build, _configurator2.default.path);
    if (type && _configurator2.default.build[type] && _configurator2.default.build[type].outputExtension === 'js') {
        javaScriptNeeded = true;
        break;
    }
}
// //// region mark empty javaScript modules as dummy
if (!javaScriptNeeded) _configurator2.default.files.compose.javaScript = _path2.default.join(_configurator2.default.path.asset.javaScript, '.__dummy__.compiled.js');
// //// endregion
// //// region extract cascading style sheets
pluginInstances.push(new plugins.ExtractText(_configurator2.default.files.compose.cascadingStyleSheet, { allChunks: true, disable: !_configurator2.default.files.compose.cascadingStyleSheet }));
// //// endregion
// //// region performs implicit external logic
if (injection.external === '__implicit__')
    /*
        We only want to process modules from local context in library mode,
        since a concrete project using this library should combine all assets
        (and deduplicate them) for optimal bundling results. NOTE: Only native
        javaScript and json modules will be marked as external dependency.
    */
    injection.external = (context, request, callback) => {
        const filePath = _helper2.default.determineModuleFilePath(request.substring(request.lastIndexOf('!') + 1), _configurator2.default.module.aliases, _configurator2.default.knownExtensions, context);
        if (filePath.endsWith('.js') || filePath.endsWith('.json')) {
            const originalRequest = request;
            // NOTE: We apply alias on externals additionally.
            request = _helper2.default.applyAliases(request.substring(request.lastIndexOf('!') + 1), _configurator2.default.module.aliases);
            const applyExternalRequest = () => {
                if (['var', 'umd'].includes(_configurator2.default.exportFormat.external) && originalRequest in _configurator2.default.injection.externalAliases) request = _configurator2.default.injection.externalAliases[originalRequest];
                if (_configurator2.default.exportFormat.external === 'var') request = _helper2.default.convertToValidVariableName(request, '0-9a-zA-Z_$\\.');
                return callback(null, request, _configurator2.default.exportFormat.external);
            };
            if (_helper2.default.isAnyMatching(request, _configurator2.default.injection.implicitExternalIncludePattern)) return applyExternalRequest();
            if (_helper2.default.isAnyMatching(request, _configurator2.default.injection.implicitExternalExcludePattern)) return callback();
            for (const chunkName in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkName)) for (const moduleID of normalizedInternalInjection[chunkName]) if (_helper2.default.determineModuleFilePath(moduleID, _configurator2.default.module.aliases, _configurator2.default.knownExtensions, context) === filePath) return callback();
            /*
                NOTE: We mark dependencies as external if they does not contain
                a loader in their request and aren't part of the current node
                package.
            */
            if (!_configurator2.default.inPlace.externalLibrary.normal && !(_configurator2.default.inPlace.externalLibrary.shimmed && originalRequest.includes('!')) && (!_path2.default.resolve(filePath).startsWith(_configurator2.default.path.context) || _helper2.default.isFilePathInLocation(filePath, _configurator2.default.path.ignore))) return applyExternalRequest();
        }
        return callback();
    };
// //// endregion
// //// region build dll packages
if (_configurator2.default.givenCommandLineArguments[2] === 'buildDLL') {
    let dllChunkIDExists = false;
    for (const chunkID in normalizedInternalInjection) if (normalizedInternalInjection.hasOwnProperty(chunkID)) if (_configurator2.default.injection.dllChunkIDs.includes(chunkID)) dllChunkIDExists = true;else delete normalizedInternalInjection[chunkID];
    if (dllChunkIDExists) {
        libraryName = '[name]DLLPackage';
        pluginInstances.push(new _webpack2.default.DllPlugin({
            path: `${ _configurator2.default.path.target }[name].dll-manifest.json`,
            name: libraryName
        }));
    } else console.warn('No dll chunk id found.');
}
// //// endregion
// /// endregion
// /// region apply final dom/javaScript modifications/fixes
pluginInstances.push({ apply: compiler => {
        compiler.plugin('emit', (compilation, callback) => {
            const promises = [];
            /*
                NOTE: Removing symbols after a "&" in hash string is necessary to
                match the generated request strings in offline plugin.
            */
            for (const htmlConfiguration of _configurator2.default.files.html) if (htmlConfiguration.filename in compilation.assets) promises.push(new Promise((resolve, reject) => dom.env(compilation.assets[htmlConfiguration.filename].source(), (error, window) => {
                if (error) return reject(error);
                const linkables = {
                    script: 'src', link: 'href' };
                for (const tagName in linkables) if (linkables.hasOwnProperty(tagName)) for (const domNode of window.document.querySelectorAll(`${ tagName }[${ linkables[tagName] }*="?` + `${ _configurator2.default.hashAlgorithm }="]`)) domNode.setAttribute(linkables[tagName], domNode.getAttribute(linkables[tagName]).replace(new RegExp(`(\\?${ _configurator2.default.hashAlgorithm }=` + '[^&]+).*$'), '$1'));
                compilation.assets[htmlConfiguration.filename] = new _webpackSources.RawSource(compilation.assets[htmlConfiguration.filename].source().replace(/^(\s*<!doctype[^>]+?>\s*)[\s\S]*$/i, '$1') + window.document.documentElement.outerHTML);
                return resolve(compilation.assets[htmlConfiguration.filename]);
            })));
            if (!_configurator2.default.exportFormat.external.startsWith('umd')) {
                Promise.all(promises).then(() => callback());
                return;
            }
            const bundleName = typeof libraryName === 'string' ? libraryName : libraryName[0];
            /*
                NOTE: The umd module export doesn't handle cases where the package
                name doesn't match exported library name. This post processing
                fixes this issue.
            */
            for (const assetRequest in compilation.assets) if (assetRequest.replace(/([^?]+)\?.*$/, '$1').endsWith(_configurator2.default.build.javaScript.outputExtension)) {
                let source = compilation.assets[assetRequest].source();
                if (typeof source === 'string') {
                    for (const replacement in _configurator2.default.injection.externalAliases) if (_configurator2.default.injection.externalAliases.hasOwnProperty(replacement)) source = source.replace(new RegExp('(require\\()"' + _helper2.default.convertToValidRegularExpressionString(_configurator2.default.injection.externalAliases[replacement]) + '"(\\))', 'g'), `$1'${ replacement }'$2`).replace(new RegExp('(define\\("' + _helper2.default.convertToValidRegularExpressionString(bundleName) + '", \\[.*)"' + _helper2.default.convertToValidRegularExpressionString(_configurator2.default.injection.externalAliases[replacement]) + '"(.*\\], factory\\);)'), `$1'${ replacement }'$2`);
                    source = source.replace(new RegExp('(root\\[)"' + _helper2.default.convertToValidRegularExpressionString(bundleName) + '"(\\] = )'), `$1'${ _helper2.default.convertToValidVariableName(bundleName) }'$2`);
                    compilation.assets[assetRequest] = new _webpackSources.RawSource(source);
                }
            }
            Promise.all(promises).then(() => callback());
        });
    } });
// /// endregion
// /// region add automatic image compression
// NOTE: This plugin should be loaded at last to ensure that all emitted images
// ran through.
pluginInstances.push(new plugins.Imagemin(_configurator2.default.module.optimizer.image.content));
// /// endregion
// // endregion
// / region loader
let imageLoader = 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.image.file);
const loader = {
    preprocessor: {
        cascadingStyleSheet: 'postcss' + _configurator2.default.module.preprocessor.cascadingStyleSheet,
        javaScript: 'babel?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.modernJavaScript),
        pug: 'pug?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.pug),
        // TODO deprecated
        coffee: 'coffee',
        literateCoffee: 'coffee?literate',
        less: 'less?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.less),
        sass: 'sass?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.sass),
        scss: 'sass?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.preprocessor.scss)
        //
    },
    html: 'html?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.html),
    cascadingStyleSheet: 'css?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.cascadingStyleSheet),
    style: 'style?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.style),
    postprocessor: {
        image: imageLoader,
        font: {
            eot: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.eot),
            woff: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.woff),
            ttf: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.ttf),
            svg: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.font.svg)
        },
        data: 'url?' + _helper2.default.convertCircularObjectToJSON(_configurator2.default.module.optimizer.data)
    }
};
// / endregion
// endregion
// region configuration
exports.default = {
    context: _configurator2.default.path.context,
    debug: _configurator2.default.debug,
    devtool: _configurator2.default.development.tool,
    devServer: _configurator2.default.development.server,
    // region input
    entry: normalizedInternalInjection, externals: injection.external,
    resolveLoader: {
        alias: _configurator2.default.loader.aliases,
        extensions: _configurator2.default.loader.extensions,
        modulesDirectories: _configurator2.default.loader.moduleDirectories
    },
    resolve: {
        alias: _configurator2.default.module.aliases,
        extensions: _configurator2.default.knownExtensions,
        root: [_configurator2.default.path.asset.source]
    },
    // endregion
    // region output
    output: {
        filename: _path2.default.relative(_configurator2.default.path.asset.target, _configurator2.default.files.compose.javaScript),
        hashFunction: _configurator2.default.hashAlgorithm,
        library: libraryName,
        libraryTarget: _configurator2.default.givenCommandLineArguments[2] === 'buildDLL' ? 'var' : _configurator2.default.exportFormat.self,
        path: _configurator2.default.path.asset.target,
        publicPath: _configurator2.default.path.asset.publicTarget,
        pathinfo: _configurator2.default.debug,
        umdNamedDefine: true
    },
    target: _configurator2.default.targetTechnology,
    // endregion
    module: {
        noParse: _configurator2.default.module.skipParseRegularExpression,
        preLoaders: [
        // Convert to native web types.
        // region script
        {
            test: /\.js$/,
            loader: loader.preprocessor.javaScript,
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.javaScript)].concat(moduleLocations.directoryPaths),
            exclude: filePath => _helper2.default.isFilePathInLocation(filePath.replace(/^(.+)(?:\?[^?]*)$/, '$1'), _configurator2.default.path.ignore)
        }, {
            test: /\.coffee$/,
            loader: loader.preprocessor.coffee,
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.coffeeScript)].concat(moduleLocations.directoryPaths)
        }, {
            test: /\.(?:coffee\.md|litcoffee)$/,
            loader: loader.preprocessor.literateCoffee,
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.coffeeScript)].concat(moduleLocations.directoryPaths)
        },
        // endregion
        // region html (templates)
        // NOTE: This ensures that will be used as a special loader alias.
        {
            test: new RegExp(_helper2.default.convertToValidRegularExpressionString(_configurator2.default.files.defaultHTML.template.substring(_configurator2.default.files.defaultHTML.template.lastIndexOf('!') + 1))),
            loader: _configurator2.default.files.defaultHTML.template.substring(0, _configurator2.default.files.defaultHTML.template.lastIndexOf('!'))
        }, {
            test: /\.pug$/,
            loader: `file?name=${ _configurator2.default.path.asset.template }` + `[name].html?${ _configurator2.default.hashAlgorithm }=[hash]!` + `extract!${ loader.html }!${ loader.preprocessor.pug }`,
            include: _path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.template),
            exclude: _configurator2.default.files.html.concat(_configurator2.default.files.defaultHTML).map(htmlConfiguration => htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1))
        }
        // endregion
        ],
        loaders: [
        // Loads dependencies.
        // region style
        // TODO deprecated
        {
            test: /\.less$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!${ loader.preprocessor.less }`)
        }, {
            test: /\.sass$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!${ loader.preprocessor.sass }`)
        }, {
            test: /\.scss$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!${ loader.preprocessor.scss }`)
        },
        //
        {
            test: /\.css$/,
            loader: plugins.ExtractText.extract(loader.style, `${ loader.cascadingStyleSheet }!` + loader.preprocessor.cascadingStyleSheet),
            include: [_path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.cascadingStyleSheet)].concat(moduleLocations.directoryPaths),
            exclude: filePath => _helper2.default.isFilePathInLocation(filePath.replace(/^(.+)(?:\?[^?]*)$/, '$1'), _configurator2.default.path.ignore)
        },
        // endregion
        // region html (templates)
        {
            test: /\.html$/,
            loader: `file?name=${ _configurator2.default.path.asset.template }` + `[name].[ext]?${ _configurator2.default.hashAlgorithm }=[hash]!` + `extract!${ loader.html }`,
            include: _path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.template),
            exclude: _configurator2.default.files.html.map(htmlConfiguration => htmlConfiguration.template.substring(htmlConfiguration.template.lastIndexOf('!') + 1))
        }
        // endregion
        ],
        postLoaders: [
        // Optimize loaded assets.
        // region font
        {
            test: /\.eot(?:\?v=\d+\.\d+\.\d+)?$/,
            loader: loader.postprocessor.font.eot
        }, { test: /\.woff2?$/, loader: loader.postprocessor.font.woff }, {
            test: /\.ttf(?:\?v=\d+\.\d+\.\d+)?$/,
            loader: loader.postprocessor.font.ttf
        }, {
            test: /\.svg(?:\?v=\d+\.\d+\.\d+)?$/,
            loader: loader.postprocessor.font.svg
        },
        // endregion
        // region image
        {
            test: /\.(?:png|jpg|ico|gif)$/,
            loader: loader.postprocessor.image
        },
        // endregion
        // region data
        {
            test: /.+/,
            loader: loader.postprocessor.data,
            include: _path2.default.join(_configurator2.default.path.asset.source, _configurator2.default.path.asset.data),
            exclude: filePath => _configurator2.default.knownExtensions.includes(_path2.default.extname(filePath.replace(/^(.+)(?:\?[^?]*)$/, '$1')))
        }
        // endregion
        ]
    },
    postcss: () => [(0, _postcssImport2.default)({ addDependencyTo: _webpack2.default }), (0, _postcssCssnext2.default)()],
    html: _configurator2.default.module.optimizer.htmlMinifier,
    // Let the "html-loader" access full html minifier processing
    // configuration.
    pug: _configurator2.default.module.preprocessor.pug,
    plugins: pluginInstances
};
// endregion
// region vim modline
// vim: set tabstop=4 shiftwidth=4 expandtab:
// vim: foldmethod=marker foldmarker=region,endregion:
// endregion

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2tDb25maWd1cmF0b3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FBV0E7Ozs7OztBQUNBOztJQUFZLFU7O0FBQ1o7O0lBQVksRzs7QUFDWjs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFLQTs7OztBQUVBOztBQWNBOzs7O0FBQ0E7Ozs7QUFLQTs7OztBQU1BOzs7Ozs7OztBQWhDQTtBQUNBLElBQUk7QUFDQSxZQUFRLDZCQUFSO0FBQ0gsQ0FGRCxDQUVFLE9BQU8sS0FBUCxFQUFjLENBQUU7O0FBRWxCLE1BQU0sVUFBVSxRQUFRLHNCQUFSLEdBQWhCOzs7QUFHQSxRQUFRLElBQVIsR0FBZSxRQUFRLElBQXZCO0FBQ0EsUUFBUSxXQUFSLEdBQXNCLFFBQVEsV0FBOUI7QUFDQSxRQUFRLGtCQUFSLEdBQTZCLFFBQVEsK0JBQVIsQ0FBN0I7QUFDQSxRQUFRLFdBQVIsR0FBc0IsUUFBUSxXQUE5QjtBQUNBLFFBQVEsT0FBUixHQUFrQixRQUFRLHlCQUFSLENBQWxCO0FBQ0EsUUFBUSxRQUFSLEdBQW1CLFFBQVEseUJBQVIsRUFBbUMsT0FBdEQ7QUFDQSxRQUFRLE9BQVIsR0FBa0IsUUFBUSxnQkFBUixDQUFsQjs7QUFTQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxLQUFSLENBQWMsUUFBUSxPQUFSLENBQWdCLGFBQWhCLENBQWQsRUFBOEMsT0FBOUMsR0FBd0QsWUFBZTtBQUNuRSxxQkFBTyxZQUFQLENBQW9CLElBQXBCLEVBQTBCLEtBQUssT0FBL0IsRUFBd0MsTUFBeEMsRUFBZ0QsS0FBSyxPQUFyRDtBQUNBLFdBQU8scUJBQXVCLEtBQXZCLENBQTZCLElBQTdCLEVBQW1DLFNBQW5DLENBQVA7QUFDSCxDQUhEO0FBSUE7O0FBRUEsTUFBTSxnQ0FDRixzQkFBd0IsWUFENUI7QUFFQSxRQUFRLEtBQVIsQ0FBYyxRQUFRLE9BQVIsQ0FBZ0IsY0FBaEIsQ0FBZCxFQUErQyxPQUEvQyxDQUF1RCxZ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QVMsZUFBSyxJQUFMLENBQ0wsdUJBQWMsSUFBZCxDQUFtQixLQUFuQixDQUF5QixNQURwQixFQUVMLHVCQUFjLElBQWQsQ0FBbUIsS0FBbkIsQ0FBeUIsSUFGcEIsQ0FIYjtBQU1JLHFCQUFVLFFBQUQsSUFDTCx1QkFBYyxlQUFkLENBQThCLFFBQTlCLENBQ0ksZUFBSyxPQUFMLENBQWEsU0FBUyxPQUFULENBQ1QsbUJBRFMsRUFDWSxJQURaLENBQWIsQ0FESjtBQVBSO0FBV0E7QUFoQ1M7QUF2SFQsS0FuQ0c7QUE2TFgsYUFBUyxNQUFvQixDQUN6Qiw2QkFBYyxFQUFDLGtDQUFELEVBQWQsQ0FEeUIsRUFFekIsK0JBRnlCLENBN0xsQjtBQWlNWCxVQUFNLHVCQUFjLE1BQWQsQ0FBcUIsU0FBckIsQ0FBK0IsWUFqTTFCO0FBa01YO0FBQ0E7QUFDQSxTQUFLLHVCQUFjLE1BQWQsQ0FBcUIsWUFBckIsQ0FBa0MsR0FwTTVCO0FBcU1YLGFBQVM7QUFyTUUsQztBQXVNZjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IndlYnBhY2tDb25maWd1cmF0b3IuY29tcGlsZWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIjIS91c3IvYmluL2VudiBub2RlXG4vLyBAZmxvd1xuLy8gLSotIGNvZGluZzogdXRmLTggLSotXG4ndXNlIHN0cmljdCdcbi8qICFcbiAgICByZWdpb24gaGVhZGVyXG4gICAgQ29weXJpZ2h0IFRvcmJlbiBTaWNrZXJ0IChpbmZvW1wifmF0flwiXXRvcmJlbi53ZWJzaXRlKSAxNi4xMi4yMDEyXG5cbiAgICBMaWNlbnNlXG4gICAgLS0tLS0tLVxuXG4gICAgVGhpcyBsaWJyYXJ5IHdyaXR0ZW4gYnkgVG9yYmVuIFNpY2tlcnQgc3RhbmQgdW5kZXIgYSBjcmVhdGl2ZSBjb21tb25zIG5hbWluZ1xuICAgIDMuMCB1bnBvcnRlZCBsaWNlbnNlLiBzZWUgaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnkvMy4wL2RlZWQuZGVcbiAgICBlbmRyZWdpb25cbiovXG4vLyByZWdpb24gaW1wb3J0c1xuaW1wb3J0ICogYXMgZmlsZVN5c3RlbSBmcm9tICdmcydcbmltcG9ydCAqIGFzIGRvbSBmcm9tICdqc2RvbSdcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5cbmltcG9ydCBwb3N0Y3NzSW1wb3J0IGZyb20gJ3Bvc3Rjc3MtaW1wb3J0J1xuaW1wb3J0IHBvc3Rjc3NDU1NuZXh0IGZyb20gJ3Bvc3Rjc3MtY3NzbmV4dCdcbmltcG9ydCB7c3luYyBhcyByZW1vdmVEaXJlY3RvcnlSZWN1cnNpdmVseVN5bmN9IGZyb20gJ3JpbXJhZidcbi8vIE5PVEU6IE9ubHkgbmVlZGVkIGZvciBkZWJ1Z2dpbmcgdGhpcyBmaWxlLlxudHJ5IHtcbiAgICByZXF1aXJlKCdzb3VyY2UtbWFwLXN1cHBvcnQvcmVnaXN0ZXInKVxufSBjYXRjaCAoZXJyb3IpIHt9XG5pbXBvcnQgd2VicGFjayBmcm9tICd3ZWJwYWNrJ1xuY29uc3QgcGx1Z2lucyA9IHJlcXVpcmUoJ3dlYnBhY2stbG9hZC1wbHVnaW5zJykoKVxuaW1wb3J0IHtSYXdTb3VyY2UgYXMgV2VicGFja1Jhd1NvdXJjZX0gZnJvbSAnd2VicGFjay1zb3VyY2VzJ1xuXG5wbHVnaW5zLkhUTUwgPSBwbHVnaW5zLmh0bWxcbnBsdWdpbnMuRXh0cmFjdFRleHQgPSBwbHVnaW5zLmV4dHJhY3RUZXh0XG5wbHVnaW5zLkFkZEFzc2V0SFRNTFBsdWdpbiA9IHJlcXVpcmUoJ2FkZC1hc3NldC1odG1sLXdlYnBhY2stcGx1Z2luJylcbnBsdWdpbnMuT3BlbkJyb3dzZXIgPSBwbHVnaW5zLm9wZW5Ccm93c2VyXG5wbHVnaW5zLkZhdmljb24gPSByZXF1aXJlKCdmYXZpY29ucy13ZWJwYWNrLXBsdWdpbicpXG5wbHVnaW5zLkltYWdlbWluID0gcmVxdWlyZSgnaW1hZ2VtaW4td2VicGFjay1wbHVnaW4nKS5kZWZhdWx0XG5wbHVnaW5zLk9mZmxpbmUgPSByZXF1aXJlKCdvZmZsaW5lLXBsdWdpbicpXG5cbmltcG9ydCB0eXBlIHtcbiAgICBEb21Ob2RlLCBIVE1MQ29uZmlndXJhdGlvbiwgSW5qZWN0aW9uLCBOb3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24sXG4gICAgUHJvY2VkdXJlRnVuY3Rpb24sIFByb21pc2VDYWxsYmFja0Z1bmN0aW9uLCBXaW5kb3dcbn0gZnJvbSAnLi90eXBlJ1xuaW1wb3J0IGNvbmZpZ3VyYXRpb24gZnJvbSAnLi9jb25maWd1cmF0b3IuY29tcGlsZWQnXG5pbXBvcnQgSGVscGVyIGZyb20gJy4vaGVscGVyLmNvbXBpbGVkJ1xuXG4vLyAvIHJlZ2lvbiBtb25rZXkgcGF0Y2hlc1xuLy8gTW9ua2V5LVBhdGNoIGh0bWwgbG9hZGVyIHRvIHJldHJpZXZlIGh0bWwgbG9hZGVyIG9wdGlvbnMgc2luY2UgdGhlXG4vLyBcIndlYnBhY2staHRtbC1wbHVnaW5cIiBkb2Vzbid0IHByZXNlcnZlIHRoZSBvcmlnaW5hbCBsb2FkZXIgaW50ZXJmYWNlLlxuaW1wb3J0IGh0bWxMb2FkZXJNb2R1bGVCYWNrdXAgZnJvbSAnaHRtbC1sb2FkZXInXG5yZXF1aXJlLmNhY2hlW3JlcXVpcmUucmVzb2x2ZSgnaHRtbC1sb2FkZXInKV0uZXhwb3J0cyA9IGZ1bmN0aW9uKCk6YW55IHtcbiAgICBIZWxwZXIuZXh0ZW5kT2JqZWN0KHRydWUsIHRoaXMub3B0aW9ucywgbW9kdWxlLCB0aGlzLm9wdGlvbnMpXG4gICAgcmV0dXJuIGh0bWxMb2FkZXJNb2R1bGVCYWNrdXAuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuLy8gTW9ua2V5LVBhdGNoIGxvYWRlci11dGlscyB0byBkZWZpbmUgd2hpY2ggdXJsIGlzIGEgbG9jYWwgcmVxdWVzdC5cbmltcG9ydCBsb2FkZXJVdGlsc01vZHVsZUJhY2t1cCBmcm9tICdsb2FkZXItdXRpbHMnXG5jb25zdCBsb2FkZXJVdGlsc0lzVXJsUmVxdWVzdEJhY2t1cDoodXJsOnN0cmluZykgPT4gYm9vbGVhbiA9XG4gICAgbG9hZGVyVXRpbHNNb2R1bGVCYWNrdXAuaXNVcmxSZXF1ZXN0XG5yZXF1aXJlLmNhY2hlW3JlcXVpcmUucmVzb2x2ZSgnbG9hZGVyLXV0aWxzJyldLmV4cG9ydHMuaXNVcmxSZXF1ZXN0ID0gZnVuY3Rpb24oXG4gICAgdXJsOnN0cmluZ1xuKTpib29sZWFuIHtcbiAgICBpZiAodXJsLm1hdGNoKC9eW2Etel0rOi4rLykpXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBsb2FkZXJVdGlsc0lzVXJsUmVxdWVzdEJhY2t1cC5hcHBseShcbiAgICAgICAgbG9hZGVyVXRpbHNNb2R1bGVCYWNrdXAsIGFyZ3VtZW50cylcbn1cbi8vIC8gZW5kcmVnaW9uXG4vLyBlbmRyZWdpb25cbi8vIHJlZ2lvbiBpbml0aWFsaXNhdGlvblxubGV0IGxpYnJhcnlOYW1lOnN0cmluZyA9IGNvbmZpZ3VyYXRpb24uZXhwb3J0Rm9ybWF0LnNlbGYgPT09ICd2YXInID9cbiAgICBIZWxwZXIuY29udmVydFRvVmFsaWRWYXJpYWJsZU5hbWUoY29uZmlndXJhdGlvbi5uYW1lKSA6IGNvbmZpZ3VyYXRpb24ubmFtZVxuaWYgKCdsaWJyYXJ5TmFtZScgaW4gY29uZmlndXJhdGlvbiAmJiBjb25maWd1cmF0aW9uLmxpYnJhcnlOYW1lKVxuICAgIGxpYnJhcnlOYW1lID0gY29uZmlndXJhdGlvbi5saWJyYXJ5TmFtZVxuLy8gLy8gcmVnaW9uIHBsdWdpbnNcbmNvbnN0IHBsdWdpbkluc3RhbmNlczpBcnJheTxPYmplY3Q+ID0gW1xuICAgIG5ldyB3ZWJwYWNrLm9wdGltaXplLk9jY3VycmVuY2VPcmRlclBsdWdpbih0cnVlKV1cbi8vIC8vLyByZWdpb24gZGVmaW5lIG1vZHVsZXMgdG8gaWdub3JlXG5mb3IgKGNvbnN0IGlnbm9yZVBhdHRlcm46c3RyaW5nIG9mIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmlnbm9yZVBhdHRlcm4pXG4gICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHdlYnBhY2suSWdub3JlUGx1Z2luKG5ldyBSZWdFeHAoaWdub3JlUGF0dGVybikpKVxuLy8gLy8vIGVuZHJlZ2lvblxuLy8gLy8vIHJlZ2lvbiBnZW5lcmF0ZSBodG1sIGZpbGVcbmxldCBodG1sQXZhaWxhYmxlOmJvb2xlYW4gPSBmYWxzZVxuaWYgKGNvbmZpZ3VyYXRpb24uZ2l2ZW5Db21tYW5kTGluZUFyZ3VtZW50c1syXSAhPT0gJ2J1aWxkRExMJylcbiAgICBmb3IgKGxldCBodG1sQ29uZmlndXJhdGlvbjpIVE1MQ29uZmlndXJhdGlvbiBvZiBjb25maWd1cmF0aW9uLmZpbGVzLmh0bWwpXG4gICAgICAgIGlmIChIZWxwZXIuaXNGaWxlU3luYyhodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZS5zdWJzdHJpbmcoXG4gICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZS5sYXN0SW5kZXhPZignIScpICsgMVxuICAgICAgICApKSkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uLnRlbXBsYXRlID09PVxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuZGVmYXVsdEhUTUwudGVtcGxhdGVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZSA9XG4gICAgICAgICAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uLnRlbXBsYXRlLnN1YnN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uLnRlbXBsYXRlLmxhc3RJbmRleE9mKCchJykgKyAxKVxuICAgICAgICAgICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHBsdWdpbnMuSFRNTChodG1sQ29uZmlndXJhdGlvbikpXG4gICAgICAgICAgICBodG1sQXZhaWxhYmxlID0gdHJ1ZVxuICAgICAgICB9XG4vLyAvLy8gZW5kcmVnaW9uXG4vLyAvLy8gcmVnaW9uIGdlbmVyYXRlIGZhdmljb25zXG5pZiAoaHRtbEF2YWlsYWJsZSAmJiBjb25maWd1cmF0aW9uLmZhdmljb24gJiYgSGVscGVyLmlzRmlsZVN5bmMoXG4gICAgY29uZmlndXJhdGlvbi5mYXZpY29uLmxvZ29cbikpXG4gICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHBsdWdpbnMuRmF2aWNvbihjb25maWd1cmF0aW9uLmZhdmljb24pKVxuLy8gLy8vIGVuZHJlZ2lvblxuLy8gLy8vIHJlZ2lvbiBwcm92aWRlIG9mZmxpbmUgZnVuY3Rpb25hbGl0eVxuaWYgKGh0bWxBdmFpbGFibGUgJiYgY29uZmlndXJhdGlvbi5vZmZsaW5lKSB7XG4gICAgaWYgKCFbJ3NlcnZlJywgJ3Rlc3RJbkJyb3dzZXInXS5pbmNsdWRlcyhcbiAgICAgICAgY29uZmlndXJhdGlvbi5naXZlbkNvbW1hbmRMaW5lQXJndW1lbnRzWzJdXG4gICAgKSkge1xuICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5pblBsYWNlLmNhc2NhZGluZ1N0eWxlU2hlZXQpXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm9mZmxpbmUuZXhjbHVkZXMucHVzaChcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuY2FzY2FkaW5nU3R5bGVTaGVldH0qLmNzcz9gICtcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG19PSpgKVxuICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5pblBsYWNlLmphdmFTY3JpcHQpXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm9mZmxpbmUuZXhjbHVkZXMucHVzaChcbiAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuamF2YVNjcmlwdH0qLmpzP2AgK1xuICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24uaGFzaEFsZ29yaXRobX09KmApXG4gICAgfVxuICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyBwbHVnaW5zLk9mZmxpbmUoY29uZmlndXJhdGlvbi5vZmZsaW5lKSlcbn1cbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gb3BlbnMgYnJvd3NlciBhdXRvbWF0aWNhbGx5XG5pZiAoY29uZmlndXJhdGlvbi5kZXZlbG9wbWVudC5vcGVuQnJvd3NlciAmJiAoaHRtbEF2YWlsYWJsZSAmJiBbXG4gICAgJ3NlcnZlJywgJ3Rlc3RJbkJyb3dzZXInXG5dLmluY2x1ZGVzKGNvbmZpZ3VyYXRpb24uZ2l2ZW5Db21tYW5kTGluZUFyZ3VtZW50c1syXSkpKVxuICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyBwbHVnaW5zLk9wZW5Ccm93c2VyKFxuICAgICAgICBjb25maWd1cmF0aW9uLmRldmVsb3BtZW50Lm9wZW5Ccm93c2VyKSlcbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gcHJvdmlkZSBidWlsZCBlbnZpcm9ubWVudFxucGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHdlYnBhY2suRGVmaW5lUGx1Z2luKGNvbmZpZ3VyYXRpb24uYnVpbGREZWZpbml0aW9uKSlcbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gbW9kdWxlcy9hc3NldHNcbmNvbnN0IG1vZHVsZUxvY2F0aW9uczp7W2tleTpzdHJpbmddOkFycmF5PHN0cmluZz59ID1cbiAgICBIZWxwZXIuZGV0ZXJtaW5lTW9kdWxlTG9jYXRpb25zKFxuICAgICAgICBjb25maWd1cmF0aW9uLmluamVjdGlvbi5pbnRlcm5hbCwgY29uZmlndXJhdGlvbi5tb2R1bGUuYWxpYXNlcyxcbiAgICAgICAgY29uZmlndXJhdGlvbi5rbm93bkV4dGVuc2lvbnMsIGNvbmZpZ3VyYXRpb24ucGF0aC5jb250ZXh0LFxuICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguaWdub3JlKVxuLy8gLy8vLyByZWdpb24gcGVyZm9ybSBqYXZhU2NyaXB0IG1pbmlmaWNhdGlvbi9vcHRpbWlzYXRpb25cbmlmIChjb25maWd1cmF0aW9uLm1vZHVsZS5vcHRpbWl6ZXIudWdsaWZ5SlMpXG4gICAgcGx1Z2luSW5zdGFuY2VzLnB1c2gobmV3IHdlYnBhY2sub3B0aW1pemUuVWdsaWZ5SnNQbHVnaW4oXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci51Z2xpZnlKUykpXG4vLyAvLy8vIGVuZHJlZ2lvblxuLy8gLy8vLyByZWdpb24gYXBwbHkgbW9kdWxlIHBhdHRlcm5cbnBsdWdpbkluc3RhbmNlcy5wdXNoKHthcHBseTogKGNvbXBpbGVyOk9iamVjdCk6dm9pZCA9PiB7XG4gICAgY29tcGlsZXIucGx1Z2luKCdlbWl0JywgKFxuICAgICAgICBjb21waWxhdGlvbjpPYmplY3QsIGNhbGxiYWNrOlByb2NlZHVyZUZ1bmN0aW9uXG4gICAgKTp2b2lkID0+IHtcbiAgICAgICAgZm9yIChjb25zdCByZXF1ZXN0OnN0cmluZyBpbiBjb21waWxhdGlvbi5hc3NldHMpXG4gICAgICAgICAgICBpZiAoY29tcGlsYXRpb24uYXNzZXRzLmhhc093blByb3BlcnR5KHJlcXVlc3QpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZVBhdGg6c3RyaW5nID0gcmVxdWVzdC5yZXBsYWNlKC9cXD9bXj9dKyQvLCAnJylcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlOj9zdHJpbmcgPSBIZWxwZXIuZGV0ZXJtaW5lQXNzZXRUeXBlKFxuICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aCwgY29uZmlndXJhdGlvbi5idWlsZCwgY29uZmlndXJhdGlvbi5wYXRoKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlICYmIGNvbmZpZ3VyYXRpb24uYXNzZXRQYXR0ZXJuW3R5cGVdICYmICEobmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5hc3NldFBhdHRlcm5bdHlwZV1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5leGNsdWRlRmlsZVBhdGhSZWd1bGFyRXhwcmVzc2lvblxuICAgICAgICAgICAgICAgICkpLnRlc3QoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZTo/c3RyaW5nID0gY29tcGlsYXRpb24uYXNzZXRzW3JlcXVlc3RdLnNvdXJjZSgpXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBpbGF0aW9uLmFzc2V0c1tyZXF1ZXN0XSA9IG5ldyBXZWJwYWNrUmF3U291cmNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uYXNzZXRQYXR0ZXJuW3R5cGVdLnBhdHRlcm4ucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL1xcezFcXH0vZywgc291cmNlLnJlcGxhY2UoL1xcJC9nLCAnJCQkJykpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soKVxuICAgIH0pXG59fSlcbi8vIC8vLy8gZW5kcmVnaW9uXG4vLyAvLy8vIHJlZ2lvbiBpbi1wbGFjZSBjb25maWd1cmVkIGFzc2V0cyBpbiB0aGUgbWFpbiBodG1sIGZpbGVcbmlmIChodG1sQXZhaWxhYmxlICYmICFbJ3NlcnZlJywgJ3Rlc3RJbkJyb3dzZXInXS5pbmNsdWRlcyhcbiAgICBjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl1cbikpXG4gICAgcGx1Z2luSW5zdGFuY2VzLnB1c2goe2FwcGx5OiAoY29tcGlsZXI6T2JqZWN0KTp2b2lkID0+IHtcbiAgICAgICAgY29tcGlsZXIucGx1Z2luKCdlbWl0JywgKFxuICAgICAgICAgICAgY29tcGlsYXRpb246T2JqZWN0LCBjYWxsYmFjazpQcm9jZWR1cmVGdW5jdGlvblxuICAgICAgICApOnZvaWQgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uZmlsZXMuaHRtbFswXS5maWxlbmFtZSBpbiBjb21waWxhdGlvbi5hc3NldHMgJiYgKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uaW5QbGFjZS5jYXNjYWRpbmdTdHlsZVNoZWV0IHx8XG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5pblBsYWNlLmphdmFTY3JpcHRcbiAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgZG9tLmVudihjb21waWxhdGlvbi5hc3NldHNbY29uZmlndXJhdGlvbi5maWxlcy5odG1sW1xuICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgXS5maWxlbmFtZV0uc291cmNlKCksIChlcnJvcjo/RXJyb3IsIHdpbmRvdzpPYmplY3QpOnZvaWQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5pblBsYWNlLmNhc2NhZGluZ1N0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybFByZWZpeDpzdHJpbmcgPSBjb25maWd1cmF0aW9uLmZpbGVzLmNvbXBvc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2FzY2FkaW5nU3R5bGVTaGVldC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnW2NvbnRlbnRoYXNoXScsICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9tTm9kZTpEb21Ob2RlID0gd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYGxpbmtbaHJlZl49XCIke3VybFByZWZpeH1cIl1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbU5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXNzZXQ6c3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChhc3NldCBpbiBjb21waWxhdGlvbi5hc3NldHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhc3NldC5zdGFydHNXaXRoKHVybFByZWZpeCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluUGxhY2VEb21Ob2RlOkRvbU5vZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluUGxhY2VEb21Ob2RlLnRleHRDb250ZW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW2Fzc2V0XS5zb3VyY2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbU5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluUGxhY2VEb21Ob2RlLCBkb21Ob2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbU5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkb21Ob2RlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PVEU6IFRoaXMgZG9lc24ndCBwcmV2ZW50IHdlYnBhY2sgZnJvbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGluZyB0aGlzIGZpbGUgaWYgcHJlc2VudCBpbiBhbm90aGVyIGNodW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvIHJlbW92aW5nIGl0IChhbmQgYSBwb3RlbnRpYWwgc291cmNlIG1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlKSBsYXRlciBpbiB0aGUgXCJkb25lXCIgaG9vay5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21waWxhdGlvbi5hc3NldHNbYXNzZXRdXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdObyByZWZlcmVuY2VkIGNhc2NhZGluZyBzdHlsZSBzaGVldCBmaWxlIGluJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgcmVzdWx0aW5nIG1hcmt1cCBmb3VuZCB3aXRoICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgc2VsZWN0b3I6IGxpbmtbaHJlZl49XCIke3VybFByZWZpeH1cIl1gKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLmluUGxhY2UuamF2YVNjcmlwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsUHJlZml4OnN0cmluZyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5maWxlcy5jb21wb3NlLmphdmFTY3JpcHQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1toYXNoXScsICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG9tTm9kZTpEb21Ob2RlID0gd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYHNjcmlwdFtzcmNePVwiJHt1cmxQcmVmaXh9XCJdYClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb21Ob2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFzc2V0OnN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYXNzZXQgaW4gY29tcGlsYXRpb24uYXNzZXRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXNzZXQuc3RhcnRzV2l0aCh1cmxQcmVmaXgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Ob2RlLnRleHRDb250ZW50ID0gY29tcGlsYXRpb24uYXNzZXRzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uc291cmNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZSgnc3JjJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT1RFOiBUaGlzIGRvZXNuJ3QgcHJldmVudCB3ZWJwYWNrIGZyb21cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRpbmcgdGhpcyBmaWxlIGlmIHByZXNlbnQgaW4gYW5vdGhlciBjaHVua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbyByZW1vdmluZyBpdCAoYW5kIGEgcG90ZW50aWFsIHNvdXJjZSBtYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSkgbGF0ZXIgaW4gdGhlIFwiZG9uZVwiIGhvb2suXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29tcGlsYXRpb24uYXNzZXRzW2Fzc2V0XVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm8gcmVmZXJlbmNlZCBqYXZhU2NyaXB0IGZpbGUgaW4gcmVzdWx0aW5nICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWFya3VwIGZvdW5kIHdpdGggc2VsZWN0b3I6ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgc2NyaXB0W3NyY149XCIke3VybFByZWZpeH1cIl1gKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbXBpbGF0aW9uLmFzc2V0c1tjb25maWd1cmF0aW9uLmZpbGVzLmh0bWxbXG4gICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgIF0uZmlsZW5hbWVdID0gbmV3IFdlYnBhY2tSYXdTb3VyY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21waWxhdGlvbi5hc3NldHNbY29uZmlndXJhdGlvbi5maWxlcy5odG1sW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uZmlsZW5hbWVdLnNvdXJjZSgpLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgL14oXFxzKjwhZG9jdHlwZVtePl0rPz5cXHMqKVtcXHNcXFNdKiQvaSwgJyQxJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKSArIHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MKVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgIH0pXG4gICAgICAgIGNvbXBpbGVyLnBsdWdpbignYWZ0ZXItZW1pdCcsIChcbiAgICAgICAgICAgIGNvbXBpbGF0aW9uOk9iamVjdCwgY2FsbGJhY2s6UHJvY2VkdXJlRnVuY3Rpb25cbiAgICAgICAgKTp2b2lkID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLmZpbGVzLmh0bWxbMF0uZmlsZW5hbWUgaW4gY29tcGlsYXRpb24uYXNzZXRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uaW5QbGFjZS5jYXNjYWRpbmdTdHlsZVNoZWV0KVxuICAgICAgICAgICAgICAgICAgICByZW1vdmVEaXJlY3RvcnlSZWN1cnNpdmVseVN5bmMocGF0aC5qb2luKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5jYXNjYWRpbmdTdHlsZVNoZWV0XG4gICAgICAgICAgICAgICAgICAgICksIHtnbG9iOiBmYWxzZX0pXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uaW5QbGFjZS5qYXZhU2NyaXB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0RmlsZVBhdGggPSBwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5maWxlcy5jb21wb3NlLmphdmFTY3JpcHQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPyR7Y29uZmlndXJhdGlvbi5oYXNoQWxnb3JpdGhtfT1baGFzaF1gLCAnJykpXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZVBhdGg6c3RyaW5nIG9mIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0RmlsZVBhdGgsIGAke2Fzc2V0RmlsZVBhdGh9Lm1hcGBcbiAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChIZWxwZXIuaXNGaWxlU3luYyhmaWxlUGF0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVN5c3RlbS51bmxpbmtTeW5jKGZpbGVQYXRoKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBqYXZhU2NyaXB0UGF0aDpzdHJpbmcgPSBwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LmphdmFTY3JpcHQpXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlU3lzdGVtLnJlYWRkaXJTeW5jKGphdmFTY3JpcHRQYXRoKS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlU3lzdGVtLnJtZGlyU3luYyhqYXZhU2NyaXB0UGF0aClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgIH0pXG4gICAgfX0pXG4vLyAvLy8vIGVuZHJlZ2lvblxuY29uc3QgaW5qZWN0aW9uOkluamVjdGlvbiA9IEhlbHBlci5yZXNvbHZlSW5qZWN0aW9uKFxuICAgIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLCBIZWxwZXIucmVzb2x2ZUJ1aWxkQ29uZmlndXJhdGlvbkZpbGVQYXRocyhcbiAgICAgICAgY29uZmlndXJhdGlvbi5idWlsZCwgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnNvdXJjZSxcbiAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmNvbnRleHQsIGNvbmZpZ3VyYXRpb24ucGF0aC5pZ25vcmVcbiAgICApLCBjb25maWd1cmF0aW9uLnRlc3RJbkJyb3dzZXIuaW5qZWN0aW9uLmludGVybmFsLFxuICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmFsaWFzZXMsIGNvbmZpZ3VyYXRpb24ua25vd25FeHRlbnNpb25zLFxuICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5jb250ZXh0LCBjb25maWd1cmF0aW9uLnBhdGguaWdub3JlKVxuY29uc3Qgbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uOk5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbiA9XG4gICAgSGVscGVyLm5vcm1hbGl6ZUludGVybmFsSW5qZWN0aW9uKGluamVjdGlvbi5pbnRlcm5hbClcbi8vIC8vLy8gcmVnaW9uIHJlbW92ZSBjaHVua3MgaWYgYSBjb3JyZXNwb25kaW5nIGRsbCBwYWNrYWdlIGV4aXN0c1xuaWYgKGNvbmZpZ3VyYXRpb24uZ2l2ZW5Db21tYW5kTGluZUFyZ3VtZW50c1syXSAhPT0gJ2J1aWxkRExMJylcbiAgICBmb3IgKGNvbnN0IGNodW5rSUQ6c3RyaW5nIGluIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbilcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uLmhhc093blByb3BlcnR5KGNodW5rSUQpICYmXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLmRsbE1hbmlmZXN0RmlsZVBhdGhzLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgIGAke2NvbmZpZ3VyYXRpb24ucGF0aC50YXJnZXR9JHtjaHVua0lEfS5kbGwtbWFuaWZlc3QuanNvbmApXG4gICAgICAgICkge1xuICAgICAgICAgICAgZGVsZXRlIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbltjaHVua0lEXVxuICAgICAgICAgICAgLy8gVE9ETyByZXBsYWNlIGFsbCBwbGFjZWhvbGRlciBsaWtlIFwiW2lkXVwiLCBcIltleHRdXCIsIFwiW2hhc2hdXCIgYW5kXG4gICAgICAgICAgICAvLyBldmVyeXdoZXJlIGVsc2VcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoOnN0cmluZyA9XG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5maWxlcy5jb21wb3NlLmphdmFTY3JpcHQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgL14oLispKD86XFw/W14/XSopJC8sICckMSdcbiAgICAgICAgICAgICAgICApLnJlcGxhY2UoL1xcW25hbWVcXF0vZywgY2h1bmtJRClcbiAgICAgICAgICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyBwbHVnaW5zLkFkZEFzc2V0SFRNTFBsdWdpbih7XG4gICAgICAgICAgICAgICAgZmlsZXBhdGg6IGZpbGVQYXRoLFxuICAgICAgICAgICAgICAgIGhhc2g6IHRydWUsXG4gICAgICAgICAgICAgICAgaW5jbHVkZVNvdXJjZW1hcDogSGVscGVyLmlzRmlsZVN5bmMoYCR7ZmlsZVBhdGh9Lm1hcGApXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIHBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyB3ZWJwYWNrLkRsbFJlZmVyZW5jZVBsdWdpbih7XG4gICAgICAgICAgICAgICAgY29udGV4dDogY29uZmlndXJhdGlvbi5wYXRoLmNvbnRleHQsIG1hbmlmZXN0OiByZXF1aXJlKFxuICAgICAgICAgICAgICAgICAgICBgJHtjb25maWd1cmF0aW9uLnBhdGgudGFyZ2V0fSR7Y2h1bmtJRH0uZGxsLW1hbmlmZXN0Lmpzb25gKVxuICAgICAgICAgICAgfSkpXG4gICAgICAgIH1cbi8vIC8vLy8gZW5kcmVnaW9uXG4vLyAvLy8vIHJlZ2lvbiBnZW5lcmF0ZSBjb21tb24gY2h1bmtzXG5pZiAoY29uZmlndXJhdGlvbi5naXZlbkNvbW1hbmRMaW5lQXJndW1lbnRzWzJdICE9PSAnYnVpbGRETEwnKVxuICAgIGZvciAoY29uc3QgY2h1bmtJRDpzdHJpbmcgb2YgY29uZmlndXJhdGlvbi5pbmplY3Rpb24uY29tbW9uQ2h1bmtJRHMpXG4gICAgICAgIGlmIChub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24uaGFzT3duUHJvcGVydHkoY2h1bmtJRCkpXG4gICAgICAgICAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgd2VicGFjay5vcHRpbWl6ZS5Db21tb25zQ2h1bmtQbHVnaW4oe1xuICAgICAgICAgICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZmlsZW5hbWU6IGNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZS5qYXZhU2NyaXB0LFxuICAgICAgICAgICAgICAgIG1pbkNodW5rczogSW5maW5pdHksXG4gICAgICAgICAgICAgICAgbmFtZTogY2h1bmtJRCxcbiAgICAgICAgICAgICAgICBtaW5TaXplOiAwXG4gICAgICAgICAgICB9KSlcbi8vIC8vLy8gZW5kcmVnaW9uXG5sZXQgamF2YVNjcmlwdE5lZWRlZDpib29sZWFuID0gY29uZmlndXJhdGlvbi5kZWJ1ZyAmJiBbXG4gICAgJ3NlcnZlJywgJ3Rlc3RJbkJyb3dzZXInXG5dLmluY2x1ZGVzKGNvbmZpZ3VyYXRpb24uZ2l2ZW5Db21tYW5kTGluZUFyZ3VtZW50c1syXSlcbmlmICghamF2YVNjcmlwdE5lZWRlZClcbiAgICBmb3IgKGNvbnN0IGNodW5rTmFtZTpzdHJpbmcgaW4gbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uKVxuICAgICAgICBpZiAobm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uLmhhc093blByb3BlcnR5KGNodW5rTmFtZSkpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1vZHVsZUlEOnN0cmluZyBvZiBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb25bXG4gICAgICAgICAgICAgICAgY2h1bmtOYW1lXG4gICAgICAgICAgICBdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZTo/c3RyaW5nID0gSGVscGVyLmRldGVybWluZUFzc2V0VHlwZShcbiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmRldGVybWluZU1vZHVsZUZpbGVQYXRoKFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlSUQsIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmFsaWFzZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmtub3duRXh0ZW5zaW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5jb250ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5idWlsZCwgY29uZmlndXJhdGlvbi5wYXRoKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlICYmIGNvbmZpZ3VyYXRpb24uYnVpbGRbdHlwZV0gJiYgY29uZmlndXJhdGlvbi5idWlsZFtcbiAgICAgICAgICAgICAgICAgICAgdHlwZVxuICAgICAgICAgICAgICAgIF0ub3V0cHV0RXh0ZW5zaW9uID09PSAnanMnKSB7XG4gICAgICAgICAgICAgICAgICAgIGphdmFTY3JpcHROZWVkZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuLy8gLy8vLyByZWdpb24gbWFyayBlbXB0eSBqYXZhU2NyaXB0IG1vZHVsZXMgYXMgZHVtbXlcbmlmICghamF2YVNjcmlwdE5lZWRlZClcbiAgICBjb25maWd1cmF0aW9uLmZpbGVzLmNvbXBvc2UuamF2YVNjcmlwdCA9IHBhdGguam9pbihcbiAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LmphdmFTY3JpcHQsICcuX19kdW1teV9fLmNvbXBpbGVkLmpzJylcbi8vIC8vLy8gZW5kcmVnaW9uXG4vLyAvLy8vIHJlZ2lvbiBleHRyYWN0IGNhc2NhZGluZyBzdHlsZSBzaGVldHNcbnBsdWdpbkluc3RhbmNlcy5wdXNoKG5ldyBwbHVnaW5zLkV4dHJhY3RUZXh0KFxuICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZS5jYXNjYWRpbmdTdHlsZVNoZWV0LCB7YWxsQ2h1bmtzOiB0cnVlLCBkaXNhYmxlOlxuICAgICAgICAhY29uZmlndXJhdGlvbi5maWxlcy5jb21wb3NlLmNhc2NhZGluZ1N0eWxlU2hlZXR9KSlcbi8vIC8vLy8gZW5kcmVnaW9uXG4vLyAvLy8vIHJlZ2lvbiBwZXJmb3JtcyBpbXBsaWNpdCBleHRlcm5hbCBsb2dpY1xuaWYgKGluamVjdGlvbi5leHRlcm5hbCA9PT0gJ19faW1wbGljaXRfXycpXG4gICAgLypcbiAgICAgICAgV2Ugb25seSB3YW50IHRvIHByb2Nlc3MgbW9kdWxlcyBmcm9tIGxvY2FsIGNvbnRleHQgaW4gbGlicmFyeSBtb2RlLFxuICAgICAgICBzaW5jZSBhIGNvbmNyZXRlIHByb2plY3QgdXNpbmcgdGhpcyBsaWJyYXJ5IHNob3VsZCBjb21iaW5lIGFsbCBhc3NldHNcbiAgICAgICAgKGFuZCBkZWR1cGxpY2F0ZSB0aGVtKSBmb3Igb3B0aW1hbCBidW5kbGluZyByZXN1bHRzLiBOT1RFOiBPbmx5IG5hdGl2ZVxuICAgICAgICBqYXZhU2NyaXB0IGFuZCBqc29uIG1vZHVsZXMgd2lsbCBiZSBtYXJrZWQgYXMgZXh0ZXJuYWwgZGVwZW5kZW5jeS5cbiAgICAqL1xuICAgIGluamVjdGlvbi5leHRlcm5hbCA9IChcbiAgICAgICAgY29udGV4dDpzdHJpbmcsIHJlcXVlc3Q6c3RyaW5nLCBjYWxsYmFjazpQcm9jZWR1cmVGdW5jdGlvblxuICAgICk6dm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoOnN0cmluZyA9IEhlbHBlci5kZXRlcm1pbmVNb2R1bGVGaWxlUGF0aChcbiAgICAgICAgICAgIHJlcXVlc3Quc3Vic3RyaW5nKHJlcXVlc3QubGFzdEluZGV4T2YoJyEnKSArIDEpLFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUuYWxpYXNlcywgY29uZmlndXJhdGlvbi5rbm93bkV4dGVuc2lvbnMsXG4gICAgICAgICAgICBjb250ZXh0KVxuICAgICAgICBpZiAoZmlsZVBhdGguZW5kc1dpdGgoJy5qcycpIHx8IGZpbGVQYXRoLmVuZHNXaXRoKCcuanNvbicpKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbFJlcXVlc3Q6c3RyaW5nID0gcmVxdWVzdFxuICAgICAgICAgICAgLy8gTk9URTogV2UgYXBwbHkgYWxpYXMgb24gZXh0ZXJuYWxzIGFkZGl0aW9uYWxseS5cbiAgICAgICAgICAgIHJlcXVlc3QgPSBIZWxwZXIuYXBwbHlBbGlhc2VzKFxuICAgICAgICAgICAgICAgIHJlcXVlc3Quc3Vic3RyaW5nKHJlcXVlc3QubGFzdEluZGV4T2YoJyEnKSArIDEpLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmFsaWFzZXMpXG4gICAgICAgICAgICBjb25zdCBhcHBseUV4dGVybmFsUmVxdWVzdDpGdW5jdGlvbiA9ICgpOnZvaWQgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChbJ3ZhcicsICd1bWQnXS5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5leHBvcnRGb3JtYXQuZXh0ZXJuYWxcbiAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxSZXF1ZXN0IGluIGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmV4dGVybmFsQWxpYXNlcylcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCA9IGNvbmZpZ3VyYXRpb24uaW5qZWN0aW9uLmV4dGVybmFsQWxpYXNlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsUmVxdWVzdF1cbiAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5leHBvcnRGb3JtYXQuZXh0ZXJuYWwgPT09ICd2YXInKVxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0gSGVscGVyLmNvbnZlcnRUb1ZhbGlkVmFyaWFibGVOYW1lKFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCwgJzAtOWEtekEtWl8kXFxcXC4nKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhcbiAgICAgICAgICAgICAgICAgICAgbnVsbCwgcmVxdWVzdCwgY29uZmlndXJhdGlvbi5leHBvcnRGb3JtYXQuZXh0ZXJuYWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoSGVscGVyLmlzQW55TWF0Y2hpbmcoXG4gICAgICAgICAgICAgICAgcmVxdWVzdCwgY29uZmlndXJhdGlvbi5pbmplY3Rpb24uaW1wbGljaXRFeHRlcm5hbEluY2x1ZGVQYXR0ZXJuXG4gICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgIHJldHVybiBhcHBseUV4dGVybmFsUmVxdWVzdCgpXG4gICAgICAgICAgICBpZiAoSGVscGVyLmlzQW55TWF0Y2hpbmcoXG4gICAgICAgICAgICAgICAgcmVxdWVzdCwgY29uZmlndXJhdGlvbi5pbmplY3Rpb24uaW1wbGljaXRFeHRlcm5hbEV4Y2x1ZGVQYXR0ZXJuXG4gICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNodW5rTmFtZTpzdHJpbmcgaW4gbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uKVxuICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb24uaGFzT3duUHJvcGVydHkoY2h1bmtOYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZHVsZUlEOnN0cmluZyBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uW2NodW5rTmFtZV1cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEhlbHBlci5kZXRlcm1pbmVNb2R1bGVGaWxlUGF0aChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVJRCwgY29uZmlndXJhdGlvbi5tb2R1bGUuYWxpYXNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmtub3duRXh0ZW5zaW9ucywgY29udGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgKSA9PT0gZmlsZVBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKClcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgTk9URTogV2UgbWFyayBkZXBlbmRlbmNpZXMgYXMgZXh0ZXJuYWwgaWYgdGhleSBkb2VzIG5vdCBjb250YWluXG4gICAgICAgICAgICAgICAgYSBsb2FkZXIgaW4gdGhlaXIgcmVxdWVzdCBhbmQgYXJlbid0IHBhcnQgb2YgdGhlIGN1cnJlbnQgbm9kZVxuICAgICAgICAgICAgICAgIHBhY2thZ2UuXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCFjb25maWd1cmF0aW9uLmluUGxhY2UuZXh0ZXJuYWxMaWJyYXJ5Lm5vcm1hbCAmJiAhKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uaW5QbGFjZS5leHRlcm5hbExpYnJhcnkuc2hpbW1lZCAmJlxuICAgICAgICAgICAgICAgIG9yaWdpbmFsUmVxdWVzdC5pbmNsdWRlcygnIScpXG4gICAgICAgICAgICApICYmICghcGF0aC5yZXNvbHZlKGZpbGVQYXRoKS5zdGFydHNXaXRoKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5jb250ZXh0XG4gICAgICAgICAgICApIHx8IEhlbHBlci5pc0ZpbGVQYXRoSW5Mb2NhdGlvbihcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCwgY29uZmlndXJhdGlvbi5wYXRoLmlnbm9yZVxuICAgICAgICAgICAgKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcGx5RXh0ZXJuYWxSZXF1ZXN0KClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2soKVxuICAgIH1cbi8vIC8vLy8gZW5kcmVnaW9uXG4vLyAvLy8vIHJlZ2lvbiBidWlsZCBkbGwgcGFja2FnZXNcbmlmIChjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl0gPT09ICdidWlsZERMTCcpIHtcbiAgICBsZXQgZGxsQ2h1bmtJREV4aXN0czpib29sZWFuID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IGNodW5rSUQ6c3RyaW5nIGluIG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbilcbiAgICAgICAgaWYgKG5vcm1hbGl6ZWRJbnRlcm5hbEluamVjdGlvbi5oYXNPd25Qcm9wZXJ0eShjaHVua0lEKSlcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLmluamVjdGlvbi5kbGxDaHVua0lEcy5pbmNsdWRlcyhjaHVua0lEKSlcbiAgICAgICAgICAgICAgICBkbGxDaHVua0lERXhpc3RzID0gdHJ1ZVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBub3JtYWxpemVkSW50ZXJuYWxJbmplY3Rpb25bY2h1bmtJRF1cbiAgICBpZiAoZGxsQ2h1bmtJREV4aXN0cykge1xuICAgICAgICBsaWJyYXJ5TmFtZSA9ICdbbmFtZV1ETExQYWNrYWdlJ1xuICAgICAgICBwbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgd2VicGFjay5EbGxQbHVnaW4oe1xuICAgICAgICAgICAgcGF0aDogYCR7Y29uZmlndXJhdGlvbi5wYXRoLnRhcmdldH1bbmFtZV0uZGxsLW1hbmlmZXN0Lmpzb25gLFxuICAgICAgICAgICAgbmFtZTogbGlicmFyeU5hbWVcbiAgICAgICAgfSkpXG4gICAgfSBlbHNlXG4gICAgICAgIGNvbnNvbGUud2FybignTm8gZGxsIGNodW5rIGlkIGZvdW5kLicpXG59XG4vLyAvLy8vIGVuZHJlZ2lvblxuLy8gLy8vIGVuZHJlZ2lvblxuLy8gLy8vIHJlZ2lvbiBhcHBseSBmaW5hbCBkb20vamF2YVNjcmlwdCBtb2RpZmljYXRpb25zL2ZpeGVzXG5wbHVnaW5JbnN0YW5jZXMucHVzaCh7YXBwbHk6IChjb21waWxlcjpPYmplY3QpOnZvaWQgPT4ge1xuICAgIGNvbXBpbGVyLnBsdWdpbignZW1pdCcsIChcbiAgICAgICAgY29tcGlsYXRpb246T2JqZWN0LCBjYWxsYmFjazpQcm9jZWR1cmVGdW5jdGlvblxuICAgICk6dm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IHByb21pc2VzOkFycmF5PFByb21pc2U8c3RyaW5nPj4gPSBbXVxuICAgICAgICAvKlxuICAgICAgICAgICAgTk9URTogUmVtb3Zpbmcgc3ltYm9scyBhZnRlciBhIFwiJlwiIGluIGhhc2ggc3RyaW5nIGlzIG5lY2Vzc2FyeSB0b1xuICAgICAgICAgICAgbWF0Y2ggdGhlIGdlbmVyYXRlZCByZXF1ZXN0IHN0cmluZ3MgaW4gb2ZmbGluZSBwbHVnaW4uXG4gICAgICAgICovXG4gICAgICAgIGZvciAoY29uc3QgaHRtbENvbmZpZ3VyYXRpb24gb2YgY29uZmlndXJhdGlvbi5maWxlcy5odG1sKVxuICAgICAgICAgICAgaWYgKGh0bWxDb25maWd1cmF0aW9uLmZpbGVuYW1lIGluIGNvbXBpbGF0aW9uLmFzc2V0cylcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKG5ldyBQcm9taXNlKChcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZTpQcm9taXNlQ2FsbGJhY2tGdW5jdGlvbixcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0OlByb21pc2VDYWxsYmFja0Z1bmN0aW9uXG4gICAgICAgICAgICAgICAgKTpXaW5kb3cgPT4gZG9tLmVudihjb21waWxhdGlvbi5hc3NldHNbXG4gICAgICAgICAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uLmZpbGVuYW1lXG4gICAgICAgICAgICAgICAgXS5zb3VyY2UoKSwgKGVycm9yOj9FcnJvciwgd2luZG93OldpbmRvdyk6P1Byb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmthYmxlczp7W2tleTpzdHJpbmddOnN0cmluZ30gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQ6ICdzcmMnLCBsaW5rOiAnaHJlZid9XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGFnTmFtZTpzdHJpbmcgaW4gbGlua2FibGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmthYmxlcy5oYXNPd25Qcm9wZXJ0eSh0YWdOYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkb21Ob2RlOkRvbU5vZGUgb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0YWdOYW1lfVske2xpbmthYmxlc1t0YWdOYW1lXX0qPVwiP2AgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7Y29uZmlndXJhdGlvbi5oYXNoQWxnb3JpdGhtfT1cIl1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tTm9kZS5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rYWJsZXNbdGFnTmFtZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb21Ob2RlLmdldEF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rYWJsZXNbdGFnTmFtZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkucmVwbGFjZShuZXcgUmVnRXhwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAoXFxcXD8ke2NvbmZpZ3VyYXRpb24uaGFzaEFsZ29yaXRobX09YCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1teJl0rKS4qJCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksICckMScpKVxuICAgICAgICAgICAgICAgICAgICBjb21waWxhdGlvbi5hc3NldHNbaHRtbENvbmZpZ3VyYXRpb24uZmlsZW5hbWVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBXZWJwYWNrUmF3U291cmNlKGNvbXBpbGF0aW9uLmFzc2V0c1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi5maWxlbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgXS5zb3VyY2UoKS5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9eKFxccyo8IWRvY3R5cGVbXj5dKz8+XFxzKilbXFxzXFxTXSokL2ksICckMSdcbiAgICAgICAgICAgICAgICAgICAgICAgICkgKyB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21waWxhdGlvbi5hc3NldHNbaHRtbENvbmZpZ3VyYXRpb24uZmlsZW5hbWVdKVxuICAgICAgICAgICAgICAgIH0pKSlcbiAgICAgICAgaWYgKCFjb25maWd1cmF0aW9uLmV4cG9ydEZvcm1hdC5leHRlcm5hbC5zdGFydHNXaXRoKCd1bWQnKSkge1xuICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCk6dm9pZCA9PiBjYWxsYmFjaygpKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnVuZGxlTmFtZTpzdHJpbmcgPSAoXG4gICAgICAgICAgICB0eXBlb2YgbGlicmFyeU5hbWUgPT09ICdzdHJpbmcnXG4gICAgICAgICkgPyBsaWJyYXJ5TmFtZSA6IGxpYnJhcnlOYW1lWzBdXG4gICAgICAgIC8qXG4gICAgICAgICAgICBOT1RFOiBUaGUgdW1kIG1vZHVsZSBleHBvcnQgZG9lc24ndCBoYW5kbGUgY2FzZXMgd2hlcmUgdGhlIHBhY2thZ2VcbiAgICAgICAgICAgIG5hbWUgZG9lc24ndCBtYXRjaCBleHBvcnRlZCBsaWJyYXJ5IG5hbWUuIFRoaXMgcG9zdCBwcm9jZXNzaW5nXG4gICAgICAgICAgICBmaXhlcyB0aGlzIGlzc3VlLlxuICAgICAgICAqL1xuICAgICAgICBmb3IgKGNvbnN0IGFzc2V0UmVxdWVzdDpzdHJpbmcgaW4gY29tcGlsYXRpb24uYXNzZXRzKVxuICAgICAgICAgICAgaWYgKGFzc2V0UmVxdWVzdC5yZXBsYWNlKC8oW14/XSspXFw/LiokLywgJyQxJykuZW5kc1dpdGgoXG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5idWlsZC5qYXZhU2NyaXB0Lm91dHB1dEV4dGVuc2lvblxuICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgIGxldCBzb3VyY2U6c3RyaW5nID0gY29tcGlsYXRpb24uYXNzZXRzW2Fzc2V0UmVxdWVzdF0uc291cmNlKClcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50OnN0cmluZyBpblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5pbmplY3Rpb24uZXh0ZXJuYWxBbGlhc2VzXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGFzT3duUHJvcGVydHkocmVwbGFjZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0gc291cmNlLnJlcGxhY2UobmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyhyZXF1aXJlXFxcXCgpXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmNvbnZlcnRUb1ZhbGlkUmVndWxhckV4cHJlc3Npb25TdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgKyAnXCIoXFxcXCkpJywgJ2cnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwgYCQxJyR7cmVwbGFjZW1lbnR9JyQyYCkucmVwbGFjZShuZXcgUmVnRXhwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKGRlZmluZVxcXFwoXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmNvbnZlcnRUb1ZhbGlkUmVndWxhckV4cHJlc3Npb25TdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgKyAnXCIsIFxcXFxbLiopXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSGVscGVyLmNvbnZlcnRUb1ZhbGlkUmVndWxhckV4cHJlc3Npb25TdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmluamVjdGlvbi5leHRlcm5hbEFsaWFzZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgKyAnXCIoLipcXFxcXSwgZmFjdG9yeVxcXFwpOyknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwgYCQxJyR7cmVwbGFjZW1lbnR9JyQyYClcbiAgICAgICAgICAgICAgICAgICAgc291cmNlID0gc291cmNlLnJlcGxhY2UobmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgICAgICcocm9vdFxcXFxbKVwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuY29udmVydFRvVmFsaWRSZWd1bGFyRXhwcmVzc2lvblN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICApICsgJ1wiKFxcXFxdID0gKSdcbiAgICAgICAgICAgICAgICAgICAgKSwgYCQxJyR7SGVscGVyLmNvbnZlcnRUb1ZhbGlkVmFyaWFibGVOYW1lKGJ1bmRsZU5hbWUpfSckMmBcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICBjb21waWxhdGlvbi5hc3NldHNbYXNzZXRSZXF1ZXN0XSA9IG5ldyBXZWJwYWNrUmF3U291cmNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCk6dm9pZCA9PiBjYWxsYmFjaygpKVxuICAgIH0pXG59fSlcbi8vIC8vLyBlbmRyZWdpb25cbi8vIC8vLyByZWdpb24gYWRkIGF1dG9tYXRpYyBpbWFnZSBjb21wcmVzc2lvblxuLy8gTk9URTogVGhpcyBwbHVnaW4gc2hvdWxkIGJlIGxvYWRlZCBhdCBsYXN0IHRvIGVuc3VyZSB0aGF0IGFsbCBlbWl0dGVkIGltYWdlc1xuLy8gcmFuIHRocm91Z2guXG5wbHVnaW5JbnN0YW5jZXMucHVzaChuZXcgcGx1Z2lucy5JbWFnZW1pbihcbiAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5vcHRpbWl6ZXIuaW1hZ2UuY29udGVudCkpXG4vLyAvLy8gZW5kcmVnaW9uXG4vLyAvLyBlbmRyZWdpb25cbi8vIC8gcmVnaW9uIGxvYWRlclxubGV0IGltYWdlTG9hZGVyOnN0cmluZyA9ICd1cmw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmltYWdlLmZpbGUpXG5jb25zdCBsb2FkZXI6e1xuICAgIHByZXByb2Nlc3Nvcjp7XG4gICAgICAgIGNhc2NhZGluZ1N0eWxlU2hlZXQ6c3RyaW5nO1xuICAgICAgICBsZXNzOnN0cmluZztcbiAgICAgICAgc2FzczpzdHJpbmc7XG4gICAgICAgIHNjc3M6c3RyaW5nO1xuICAgICAgICBqYXZhU2NyaXB0OnN0cmluZztcbiAgICAgICAgY29mZmVlOnN0cmluZztcbiAgICAgICAgcHVnOnN0cmluZztcbiAgICAgICAgbGl0ZXJhdGVDb2ZmZWU6c3RyaW5nXG4gICAgfTtcbiAgICBodG1sOnN0cmluZztcbiAgICBjYXNjYWRpbmdTdHlsZVNoZWV0OnN0cmluZztcbiAgICBzdHlsZTpzdHJpbmc7XG4gICAgcG9zdHByb2Nlc3Nvcjp7XG4gICAgICAgIGltYWdlOnN0cmluZztcbiAgICAgICAgZm9udDp7XG4gICAgICAgICAgICBlb3Q6c3RyaW5nO1xuICAgICAgICAgICAgd29mZjpzdHJpbmc7XG4gICAgICAgICAgICB0dGY6c3RyaW5nO1xuICAgICAgICAgICAgc3ZnOnN0cmluZ1xuICAgICAgICB9O1xuICAgICAgICBkYXRhOnN0cmluZ1xuICAgIH1cbn0gPSB7XG4gICAgcHJlcHJvY2Vzc29yOiB7XG4gICAgICAgIGNhc2NhZGluZ1N0eWxlU2hlZXQ6ICdwb3N0Y3NzJyArXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5wcmVwcm9jZXNzb3IuY2FzY2FkaW5nU3R5bGVTaGVldCxcbiAgICAgICAgamF2YVNjcmlwdDogJ2JhYmVsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUucHJlcHJvY2Vzc29yLm1vZGVybkphdmFTY3JpcHQpLFxuICAgICAgICBwdWc6ICdwdWc/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5wcmVwcm9jZXNzb3IucHVnKSxcbiAgICAgICAgLy8gVE9ETyBkZXByZWNhdGVkXG4gICAgICAgIGNvZmZlZTogJ2NvZmZlZScsXG4gICAgICAgIGxpdGVyYXRlQ29mZmVlOiAnY29mZmVlP2xpdGVyYXRlJyxcbiAgICAgICAgbGVzczogJ2xlc3M/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLm1vZHVsZS5wcmVwcm9jZXNzb3IubGVzcyksXG4gICAgICAgIHNhc3M6ICdzYXNzPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUucHJlcHJvY2Vzc29yLnNhc3MpLFxuICAgICAgICBzY3NzOiAnc2Fzcz8nICsgSGVscGVyLmNvbnZlcnRDaXJjdWxhck9iamVjdFRvSlNPTihcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLnByZXByb2Nlc3Nvci5zY3NzKVxuICAgICAgICAvL1xuICAgIH0sXG4gICAgaHRtbDogJ2h0bWw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmh0bWwpLFxuICAgIGNhc2NhZGluZ1N0eWxlU2hlZXQ6ICdjc3M/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLmNhc2NhZGluZ1N0eWxlU2hlZXQpLFxuICAgIHN0eWxlOiAnc3R5bGU/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLnN0eWxlKSxcbiAgICBwb3N0cHJvY2Vzc29yOiB7XG4gICAgICAgIGltYWdlOiBpbWFnZUxvYWRlcixcbiAgICAgICAgZm9udDoge1xuICAgICAgICAgICAgZW90OiAndXJsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci5mb250LmVvdCksXG4gICAgICAgICAgICB3b2ZmOiAndXJsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci5mb250LndvZmYpLFxuICAgICAgICAgICAgdHRmOiAndXJsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ubW9kdWxlLm9wdGltaXplci5mb250LnR0ZiksXG4gICAgICAgICAgICBzdmc6ICd1cmw/JyArIEhlbHBlci5jb252ZXJ0Q2lyY3VsYXJPYmplY3RUb0pTT04oXG4gICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmZvbnQuc3ZnKVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiAndXJsPycgKyBIZWxwZXIuY29udmVydENpcmN1bGFyT2JqZWN0VG9KU09OKFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5tb2R1bGUub3B0aW1pemVyLmRhdGEpXG4gICAgfVxufVxuLy8gLyBlbmRyZWdpb25cbi8vIGVuZHJlZ2lvblxuLy8gcmVnaW9uIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBjb250ZXh0OiBjb25maWd1cmF0aW9uLnBhdGguY29udGV4dCxcbiAgICBkZWJ1ZzogY29uZmlndXJhdGlvbi5kZWJ1ZyxcbiAgICBkZXZ0b29sOiBjb25maWd1cmF0aW9uLmRldmVsb3BtZW50LnRvb2wsXG4gICAgZGV2U2VydmVyOiBjb25maWd1cmF0aW9uLmRldmVsb3BtZW50LnNlcnZlcixcbiAgICAvLyByZWdpb24gaW5wdXRcbiAgICBlbnRyeTogbm9ybWFsaXplZEludGVybmFsSW5qZWN0aW9uLCBleHRlcm5hbHM6IGluamVjdGlvbi5leHRlcm5hbCxcbiAgICByZXNvbHZlTG9hZGVyOiB7XG4gICAgICAgIGFsaWFzOiBjb25maWd1cmF0aW9uLmxvYWRlci5hbGlhc2VzLFxuICAgICAgICBleHRlbnNpb25zOiBjb25maWd1cmF0aW9uLmxvYWRlci5leHRlbnNpb25zLFxuICAgICAgICBtb2R1bGVzRGlyZWN0b3JpZXM6IGNvbmZpZ3VyYXRpb24ubG9hZGVyLm1vZHVsZURpcmVjdG9yaWVzXG4gICAgfSxcbiAgICByZXNvbHZlOiB7XG4gICAgICAgIGFsaWFzOiBjb25maWd1cmF0aW9uLm1vZHVsZS5hbGlhc2VzLFxuICAgICAgICBleHRlbnNpb25zOiBjb25maWd1cmF0aW9uLmtub3duRXh0ZW5zaW9ucyxcbiAgICAgICAgcm9vdDogWyhjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuc291cmNlOnN0cmluZyldXG4gICAgfSxcbiAgICAvLyBlbmRyZWdpb25cbiAgICAvLyByZWdpb24gb3V0cHV0XG4gICAgb3V0cHV0OiB7XG4gICAgICAgIGZpbGVuYW1lOiBwYXRoLnJlbGF0aXZlKFxuICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRhcmdldCxcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuY29tcG9zZS5qYXZhU2NyaXB0KSxcbiAgICAgICAgaGFzaEZ1bmN0aW9uOiBjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG0sXG4gICAgICAgIGxpYnJhcnk6IGxpYnJhcnlOYW1lLFxuICAgICAgICBsaWJyYXJ5VGFyZ2V0OiAoXG4gICAgICAgICAgICBjb25maWd1cmF0aW9uLmdpdmVuQ29tbWFuZExpbmVBcmd1bWVudHNbMl0gPT09ICdidWlsZERMTCdcbiAgICAgICAgKSA/ICd2YXInIDogY29uZmlndXJhdGlvbi5leHBvcnRGb3JtYXQuc2VsZixcbiAgICAgICAgcGF0aDogY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRhcmdldCxcbiAgICAgICAgcHVibGljUGF0aDogY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnB1YmxpY1RhcmdldCxcbiAgICAgICAgcGF0aGluZm86IGNvbmZpZ3VyYXRpb24uZGVidWcsXG4gICAgICAgIHVtZE5hbWVkRGVmaW5lOiB0cnVlXG4gICAgfSxcbiAgICB0YXJnZXQ6IGNvbmZpZ3VyYXRpb24udGFyZ2V0VGVjaG5vbG9neSxcbiAgICAvLyBlbmRyZWdpb25cbiAgICBtb2R1bGU6IHtcbiAgICAgICAgbm9QYXJzZTogY29uZmlndXJhdGlvbi5tb2R1bGUuc2tpcFBhcnNlUmVndWxhckV4cHJlc3Npb24sXG4gICAgICAgIHByZUxvYWRlcnM6IFtcbiAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gbmF0aXZlIHdlYiB0eXBlcy5cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBzY3JpcHRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuanMkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wcmVwcm9jZXNzb3IuamF2YVNjcmlwdCxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBbcGF0aC5qb2luKFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuamF2YVNjcmlwdFxuICAgICAgICAgICAgICAgICldLmNvbmNhdChtb2R1bGVMb2NhdGlvbnMuZGlyZWN0b3J5UGF0aHMpLFxuICAgICAgICAgICAgICAgIGV4Y2x1ZGU6IChmaWxlUGF0aDpzdHJpbmcpOmJvb2xlYW4gPT5cbiAgICAgICAgICAgICAgICAgICAgSGVscGVyLmlzRmlsZVBhdGhJbkxvY2F0aW9uKGZpbGVQYXRoLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAvXiguKykoPzpcXD9bXj9dKikkLywgJyQxJ1xuICAgICAgICAgICAgICAgICAgICApLCBjb25maWd1cmF0aW9uLnBhdGguaWdub3JlKVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5jb2ZmZWUkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wcmVwcm9jZXNzb3IuY29mZmVlLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5jb2ZmZWVTY3JpcHRcbiAgICAgICAgICAgICAgICApXS5jb25jYXQobW9kdWxlTG9jYXRpb25zLmRpcmVjdG9yeVBhdGhzKVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC4oPzpjb2ZmZWVcXC5tZHxsaXRjb2ZmZWUpJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBsb2FkZXIucHJlcHJvY2Vzc29yLmxpdGVyYXRlQ29mZmVlLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5jb2ZmZWVTY3JpcHRcbiAgICAgICAgICAgICAgICApXS5jb25jYXQobW9kdWxlTG9jYXRpb25zLmRpcmVjdG9yeVBhdGhzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIGVuZHJlZ2lvblxuICAgICAgICAgICAgLy8gcmVnaW9uIGh0bWwgKHRlbXBsYXRlcylcbiAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgZW5zdXJlcyB0aGF0IHdpbGwgYmUgdXNlZCBhcyBhIHNwZWNpYWwgbG9hZGVyIGFsaWFzLlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IG5ldyBSZWdFeHAoSGVscGVyLmNvbnZlcnRUb1ZhbGlkUmVndWxhckV4cHJlc3Npb25TdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZmlsZXMuZGVmYXVsdEhUTUwudGVtcGxhdGUuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5maWxlcy5kZWZhdWx0SFRNTC50ZW1wbGF0ZS5sYXN0SW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnISdcbiAgICAgICAgICAgICAgICAgICAgICAgICkgKyAxKSkpLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogY29uZmlndXJhdGlvbi5maWxlcy5kZWZhdWx0SFRNTC50ZW1wbGF0ZS5zdWJzdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgIDAsIGNvbmZpZ3VyYXRpb24uZmlsZXMuZGVmYXVsdEhUTUwudGVtcGxhdGUubGFzdEluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAnIScpKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwucHVnJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOlxuICAgICAgICAgICAgICAgICAgICBgZmlsZT9uYW1lPSR7Y29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRlbXBsYXRlfWAgK1xuICAgICAgICAgICAgICAgICAgICBgW25hbWVdLmh0bWw/JHtjb25maWd1cmF0aW9uLmhhc2hBbGdvcml0aG19PVtoYXNoXSFgICtcbiAgICAgICAgICAgICAgICAgICAgYGV4dHJhY3QhJHtsb2FkZXIuaHRtbH0hJHtsb2FkZXIucHJlcHJvY2Vzc29yLnB1Z31gLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IHBhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRlbXBsYXRlKSxcbiAgICAgICAgICAgICAgICBleGNsdWRlOiBjb25maWd1cmF0aW9uLmZpbGVzLmh0bWwuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmZpbGVzLmRlZmF1bHRIVE1MXG4gICAgICAgICAgICAgICAgKS5tYXAoKFxuICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbjpIVE1MQ29uZmlndXJhdGlvblxuICAgICAgICAgICAgICAgICk6c3RyaW5nID0+IGh0bWxDb25maWd1cmF0aW9uLnRlbXBsYXRlLnN1YnN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUubGFzdEluZGV4T2YoJyEnKSArIDEpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZW5kcmVnaW9uXG4gICAgICAgIF0sXG4gICAgICAgIGxvYWRlcnM6IFtcbiAgICAgICAgICAgIC8vIExvYWRzIGRlcGVuZGVuY2llcy5cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBzdHlsZVxuICAgICAgICAgICAgLy8gVE9ETyBkZXByZWNhdGVkXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLmxlc3MkLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IHBsdWdpbnMuRXh0cmFjdFRleHQuZXh0cmFjdChcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVyLnN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBgJHtsb2FkZXIuY2FzY2FkaW5nU3R5bGVTaGVldH0hJHtsb2FkZXIucHJlcHJvY2Vzc29yLmxlc3N9YFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuc2FzcyQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogcGx1Z2lucy5FeHRyYWN0VGV4dC5leHRyYWN0KFxuICAgICAgICAgICAgICAgICAgICBsb2FkZXIuc3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIGAke2xvYWRlci5jYXNjYWRpbmdTdHlsZVNoZWV0fSEke2xvYWRlci5wcmVwcm9jZXNzb3Iuc2Fzc31gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5zY3NzJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBwbHVnaW5zLkV4dHJhY3RUZXh0LmV4dHJhY3QoXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlci5zdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgYCR7bG9hZGVyLmNhc2NhZGluZ1N0eWxlU2hlZXR9ISR7bG9hZGVyLnByZXByb2Nlc3Nvci5zY3NzfWBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuY3NzJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBwbHVnaW5zLkV4dHJhY3RUZXh0LmV4dHJhY3QoXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlci5zdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgYCR7bG9hZGVyLmNhc2NhZGluZ1N0eWxlU2hlZXR9IWAgK1xuICAgICAgICAgICAgICAgICAgICBsb2FkZXIucHJlcHJvY2Vzc29yLmNhc2NhZGluZ1N0eWxlU2hlZXQpLFxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5jYXNjYWRpbmdTdHlsZVNoZWV0XG4gICAgICAgICAgICAgICAgKV0uY29uY2F0KG1vZHVsZUxvY2F0aW9ucy5kaXJlY3RvcnlQYXRocyksXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogKGZpbGVQYXRoOnN0cmluZyk6Ym9vbGVhbiA9PlxuICAgICAgICAgICAgICAgICAgICBIZWxwZXIuaXNGaWxlUGF0aEluTG9jYXRpb24oZmlsZVBhdGgucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgIC9eKC4rKSg/OlxcP1teP10qKSQvLCAnJDEnXG4gICAgICAgICAgICAgICAgICAgICksIGNvbmZpZ3VyYXRpb24ucGF0aC5pZ25vcmUpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gZW5kcmVnaW9uXG4gICAgICAgICAgICAvLyByZWdpb24gaHRtbCAodGVtcGxhdGVzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5odG1sJC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOlxuICAgICAgICAgICAgICAgICAgICBgZmlsZT9uYW1lPSR7Y29uZmlndXJhdGlvbi5wYXRoLmFzc2V0LnRlbXBsYXRlfWAgK1xuICAgICAgICAgICAgICAgICAgICBgW25hbWVdLltleHRdPyR7Y29uZmlndXJhdGlvbi5oYXNoQWxnb3JpdGhtfT1baGFzaF0hYCArXG4gICAgICAgICAgICAgICAgICAgIGBleHRyYWN0ISR7bG9hZGVyLmh0bWx9YCxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiBwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24ucGF0aC5hc3NldC50ZW1wbGF0ZSksXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogY29uZmlndXJhdGlvbi5maWxlcy5odG1sLm1hcCgoXG4gICAgICAgICAgICAgICAgICAgIGh0bWxDb25maWd1cmF0aW9uOkhUTUxDb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgICAgKTpzdHJpbmcgPT4gaHRtbENvbmZpZ3VyYXRpb24udGVtcGxhdGUuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICAgICAgICBodG1sQ29uZmlndXJhdGlvbi50ZW1wbGF0ZS5sYXN0SW5kZXhPZignIScpICsgMSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgXSxcbiAgICAgICAgcG9zdExvYWRlcnM6IFtcbiAgICAgICAgICAgIC8vIE9wdGltaXplIGxvYWRlZCBhc3NldHMuXG4gICAgICAgICAgICAvLyByZWdpb24gZm9udFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5lb3QoPzpcXD92PVxcZCtcXC5cXGQrXFwuXFxkKyk/JC8sXG4gICAgICAgICAgICAgICAgbG9hZGVyOiBsb2FkZXIucG9zdHByb2Nlc3Nvci5mb250LmVvdFxuICAgICAgICAgICAgfSwge3Rlc3Q6IC9cXC53b2ZmMj8kLywgbG9hZGVyOiBsb2FkZXIucG9zdHByb2Nlc3Nvci5mb250LndvZmZ9LCB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLnR0Zig/OlxcP3Y9XFxkK1xcLlxcZCtcXC5cXGQrKT8kLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wb3N0cHJvY2Vzc29yLmZvbnQudHRmXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdGVzdDogL1xcLnN2Zyg/OlxcP3Y9XFxkK1xcLlxcZCtcXC5cXGQrKT8kLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wb3N0cHJvY2Vzc29yLmZvbnQuc3ZnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gZW5kcmVnaW9uXG4gICAgICAgICAgICAvLyByZWdpb24gaW1hZ2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuKD86cG5nfGpwZ3xpY298Z2lmKSQvLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogbG9hZGVyLnBvc3Rwcm9jZXNzb3IuaW1hZ2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBkYXRhXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGVzdDogLy4rLyxcbiAgICAgICAgICAgICAgICBsb2FkZXI6IGxvYWRlci5wb3N0cHJvY2Vzc29yLmRhdGEsXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogcGF0aC5qb2luKFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLnBhdGguYXNzZXQuZGF0YSksXG4gICAgICAgICAgICAgICAgZXhjbHVkZTogKGZpbGVQYXRoOnN0cmluZyk6Ym9vbGVhbiA9PlxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmtub3duRXh0ZW5zaW9ucy5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGguZXh0bmFtZShmaWxlUGF0aC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9eKC4rKSg/OlxcP1teP10qKSQvLCAnJDEnKSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBlbmRyZWdpb25cbiAgICAgICAgXVxuICAgIH0sXG4gICAgcG9zdGNzczogKCk6QXJyYXk8T2JqZWN0PiA9PiBbXG4gICAgICAgIHBvc3Rjc3NJbXBvcnQoe2FkZERlcGVuZGVuY3lUbzogd2VicGFja30pLFxuICAgICAgICBwb3N0Y3NzQ1NTbmV4dCgpXG4gICAgXSxcbiAgICBodG1sOiBjb25maWd1cmF0aW9uLm1vZHVsZS5vcHRpbWl6ZXIuaHRtbE1pbmlmaWVyLFxuICAgIC8vIExldCB0aGUgXCJodG1sLWxvYWRlclwiIGFjY2VzcyBmdWxsIGh0bWwgbWluaWZpZXIgcHJvY2Vzc2luZ1xuICAgIC8vIGNvbmZpZ3VyYXRpb24uXG4gICAgcHVnOiBjb25maWd1cmF0aW9uLm1vZHVsZS5wcmVwcm9jZXNzb3IucHVnLFxuICAgIHBsdWdpbnM6IHBsdWdpbkluc3RhbmNlc1xufVxuLy8gZW5kcmVnaW9uXG4vLyByZWdpb24gdmltIG1vZGxpbmVcbi8vIHZpbTogc2V0IHRhYnN0b3A9NCBzaGlmdHdpZHRoPTQgZXhwYW5kdGFiOlxuLy8gdmltOiBmb2xkbWV0aG9kPW1hcmtlciBmb2xkbWFya2VyPXJlZ2lvbixlbmRyZWdpb246XG4vLyBlbmRyZWdpb25cbiJdfQ==